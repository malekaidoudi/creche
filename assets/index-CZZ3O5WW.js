import{r as b,b as Lc,a as al}from"./vendor-BKU87Gzz.js";import{u as Ns,L as W,O as nl,a as $c,b as ct,c as Ic,N as Fc,R as Vc,d as ee,B as Oc}from"./router-BqPYkyXk.js";import{z as U,G as Br,M as il,S as ll,U as me,a as Ys,L as xs,X as Ht,b as ol,c as zc,d as Ft,P as Re,e as Ue,C as ae,H as cl,B as le,f as Ur,g as Be,h as ar,i as Ze,j as dl,k as Na,l as Js,m as Bc,n as ps,o as ml,p as be,q as Uc,r as Qe,s as zs,t as gn,A as Vt,u as kt,v as qc,w as Hc,x as et,y as fn,D as nr,F as Gc,E as ye,I as Wc,J as dt,K as Ce,N as je,O as ka,Q as ul,R as Kc,T as Yc,V as Jc,Z as Xc,W as Zc,Y as Qc,_ as Oe,$ as ed,a0 as qr,a1 as Ot,a2 as Xs,a3 as bt,a4 as hl,a5 as Ke,a6 as yn,a7 as Hr,a8 as gs,a9 as Gr,aa as td,ab as _a,ac as Fe,ad as ir,ae as Gt,af as Sa,ag as xl,ah as _t,ai as Ne,aj as pl,ak as jt,al as sd,am as rd,an as ad,ao as nd,ap as id}from"./ui-Bn1Yhqel.js";import{u as Wt,i as ld,B as od,a as cd,b as dd}from"./i18n-BcJY-JlZ.js";import{u as lr}from"./forms-B32BAx9G.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();var gl={exports:{}},or={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md=b,ud=Symbol.for("react.element"),hd=Symbol.for("react.fragment"),xd=Object.prototype.hasOwnProperty,pd=md.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gd={key:!0,ref:!0,__self:!0,__source:!0};function fl(t,s,r){var a,n={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(a in s)xd.call(s,a)&&!gd.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:ud,type:t,key:l,ref:i,props:n,_owner:pd.current}}or.Fragment=hd;or.jsx=fl;or.jsxs=fl;gl.exports=or;var e=gl.exports,yl,bn=Lc;yl=bn.createRoot,bn.hydrateRoot;const bl=b.createContext(),Tt={fr:{code:"fr",name:"Français",nativeName:"Français",direction:"ltr",flag:"🇫🇷"},ar:{code:"ar",name:"Arabic",nativeName:"العربية",direction:"rtl",flag:"🇲🇦"}};function fd({children:t}){const{i18n:s}=Wt(),[r,a]=b.useState(()=>localStorage.getItem("language")||"fr"),n=async f=>{if(Tt[f])try{await s.changeLanguage(f),a(f),localStorage.setItem("language",f),f==="ar"?document.title="نظام إدارة الحضانة":document.title="Système de Gestion de Crèche"}catch(p){console.error("Erreur lors du changement de langue:",p)}};b.useEffect(()=>{(async()=>{try{await s.changeLanguage(r),document.documentElement.lang=r,document.documentElement.dir=Tt[r].direction}catch(p){console.error("Erreur lors de l'initialisation de la langue:",p)}})()},[s,r]);const l=()=>Tt[typeof r=="string"?r:"fr"]||Tt.fr,i=()=>l().direction==="rtl",o=()=>l().direction,d=()=>Object.values(Tt),m=()=>{n((typeof r=="string"?r:"fr")==="fr"?"ar":"fr")},c=(f,p={})=>{if(!f)return"";if(r==="ar"&&p.arabicNumerals){const x=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return f.replace(/\d/g,j=>x[parseInt(j)])}return f},u=(f,p="")=>{if(!f)return p;if(typeof f=="string")return f;const x=f[`${r==="fr"?"fr":"ar"}`];return x||f[`${r==="fr"?"ar":"fr"}`]||p},h=()=>{const f=o();return{"text-right":f==="rtl","text-left":f==="ltr"}},y={currentLanguage:r,language:r,direction:o(),isRTL:i(),languageInfo:l(),changeLanguage:n,toggleLanguage:m,getAvailableLanguages:d,formatText:c,getLocalizedText:u,getDirectionClasses:h,LANGUAGES:Tt};return e.jsx(bl.Provider,{value:y,children:t})}function cr(){const t=b.useContext(bl);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t}const te=cr;function jl(t,s){return function(){return t.apply(s,arguments)}}const{toString:yd}=Object.prototype,{getPrototypeOf:Ca}=Object,{iterator:dr,toStringTag:vl}=Symbol,mr=(t=>s=>{const r=yd.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),qe=t=>(t=t.toLowerCase(),s=>mr(s)===t),ur=t=>s=>typeof s===t,{isArray:Kt}=Array,zt=ur("undefined");function ks(t){return t!==null&&!zt(t)&&t.constructor!==null&&!zt(t.constructor)&&Pe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const wl=qe("ArrayBuffer");function bd(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&wl(t.buffer),s}const jd=ur("string"),Pe=ur("function"),Nl=ur("number"),_s=t=>t!==null&&typeof t=="object",vd=t=>t===!0||t===!1,Bs=t=>{if(mr(t)!=="object")return!1;const s=Ca(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(vl in t)&&!(dr in t)},wd=t=>{if(!_s(t)||ks(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Nd=qe("Date"),kd=qe("File"),_d=qe("Blob"),Sd=qe("FileList"),Cd=t=>_s(t)&&Pe(t.pipe),Ad=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Pe(t.append)&&((s=mr(t))==="formdata"||s==="object"&&Pe(t.toString)&&t.toString()==="[object FormData]"))},Td=qe("URLSearchParams"),[Ed,Pd,Dd,Rd]=["ReadableStream","Request","Response","Headers"].map(qe),Md=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ss(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),Kt(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if(ks(t))return;const l=r?Object.getOwnPropertyNames(t):Object.keys(t),i=l.length;let o;for(a=0;a<i;a++)o=l[a],s.call(null,t[o],o,t)}}function kl(t,s){if(ks(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const gt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_l=t=>!zt(t)&&t!==gt;function Wr(){const{caseless:t,skipUndefined:s}=_l(this)&&this||{},r={},a=(n,l)=>{const i=t&&kl(r,l)||l;Bs(r[i])&&Bs(n)?r[i]=Wr(r[i],n):Bs(n)?r[i]=Wr({},n):Kt(n)?r[i]=n.slice():(!s||!zt(n))&&(r[i]=n)};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&Ss(arguments[n],a);return r}const Ld=(t,s,r,{allOwnKeys:a}={})=>(Ss(s,(n,l)=>{r&&Pe(n)?t[l]=jl(n,r):t[l]=n},{allOwnKeys:a}),t),$d=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Id=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},Fd=(t,s,r,a)=>{let n,l,i;const o={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),l=n.length;l-- >0;)i=n[l],(!a||a(i,t,s))&&!o[i]&&(s[i]=t[i],o[i]=!0);t=r!==!1&&Ca(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},Vd=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},Od=t=>{if(!t)return null;if(Kt(t))return t;let s=t.length;if(!Nl(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},zd=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Ca(Uint8Array)),Bd=(t,s)=>{const a=(t&&t[dr]).call(t);let n;for(;(n=a.next())&&!n.done;){const l=n.value;s.call(t,l[0],l[1])}},Ud=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},qd=qe("HTMLFormElement"),Hd=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),jn=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),Gd=qe("RegExp"),Sl=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};Ss(r,(n,l)=>{let i;(i=s(n,l,t))!==!1&&(a[l]=i||n)}),Object.defineProperties(t,a)},Wd=t=>{Sl(t,(s,r)=>{if(Pe(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(Pe(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Kd=(t,s)=>{const r={},a=n=>{n.forEach(l=>{r[l]=!0})};return Kt(t)?a(t):a(String(t).split(s)),r},Yd=()=>{},Jd=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Xd(t){return!!(t&&Pe(t.append)&&t[vl]==="FormData"&&t[dr])}const Zd=t=>{const s=new Array(10),r=(a,n)=>{if(_s(a)){if(s.indexOf(a)>=0)return;if(ks(a))return a;if(!("toJSON"in a)){s[n]=a;const l=Kt(a)?[]:{};return Ss(a,(i,o)=>{const d=r(i,n+1);!zt(d)&&(l[o]=d)}),s[n]=void 0,l}}return a};return r(t,0)},Qd=qe("AsyncFunction"),em=t=>t&&(_s(t)||Pe(t))&&Pe(t.then)&&Pe(t.catch),Cl=((t,s)=>t?setImmediate:s?((r,a)=>(gt.addEventListener("message",({source:n,data:l})=>{n===gt&&l===r&&a.length&&a.shift()()},!1),n=>{a.push(n),gt.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Pe(gt.postMessage)),tm=typeof queueMicrotask<"u"?queueMicrotask.bind(gt):typeof process<"u"&&process.nextTick||Cl,sm=t=>t!=null&&Pe(t[dr]),E={isArray:Kt,isArrayBuffer:wl,isBuffer:ks,isFormData:Ad,isArrayBufferView:bd,isString:jd,isNumber:Nl,isBoolean:vd,isObject:_s,isPlainObject:Bs,isEmptyObject:wd,isReadableStream:Ed,isRequest:Pd,isResponse:Dd,isHeaders:Rd,isUndefined:zt,isDate:Nd,isFile:kd,isBlob:_d,isRegExp:Gd,isFunction:Pe,isStream:Cd,isURLSearchParams:Td,isTypedArray:zd,isFileList:Sd,forEach:Ss,merge:Wr,extend:Ld,trim:Md,stripBOM:$d,inherits:Id,toFlatObject:Fd,kindOf:mr,kindOfTest:qe,endsWith:Vd,toArray:Od,forEachEntry:Bd,matchAll:Ud,isHTMLForm:qd,hasOwnProperty:jn,hasOwnProp:jn,reduceDescriptors:Sl,freezeMethods:Wd,toObjectSet:Kd,toCamelCase:Hd,noop:Yd,toFiniteNumber:Jd,findKey:kl,global:gt,isContextDefined:_l,isSpecCompliantForm:Xd,toJSONObject:Zd,isAsyncFn:Qd,isThenable:em,setImmediate:Cl,asap:tm,isIterable:sm};function Y(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}E.inherits(Y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:E.toJSONObject(this.config),code:this.code,status:this.status}}});const Al=Y.prototype,Tl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Tl[t]={value:t}});Object.defineProperties(Y,Tl);Object.defineProperty(Al,"isAxiosError",{value:!0});Y.from=(t,s,r,a,n,l)=>{const i=Object.create(Al);E.toFlatObject(t,i,function(c){return c!==Error.prototype},m=>m!=="isAxiosError");const o=t&&t.message?t.message:"Error",d=s==null&&t?t.code:s;return Y.call(i,o,d,r,a,n),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",l&&Object.assign(i,l),i};const rm=null;function Kr(t){return E.isPlainObject(t)||E.isArray(t)}function El(t){return E.endsWith(t,"[]")?t.slice(0,-2):t}function vn(t,s,r){return t?t.concat(s).map(function(n,l){return n=El(n),!r&&l?"["+n+"]":n}).join(r?".":""):s}function am(t){return E.isArray(t)&&!t.some(Kr)}const nm=E.toFlatObject(E,{},null,function(s){return/^is[A-Z]/.test(s)});function hr(t,s,r){if(!E.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=E.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,x){return!E.isUndefined(x[p])});const a=r.metaTokens,n=r.visitor||c,l=r.dots,i=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&E.isSpecCompliantForm(s);if(!E.isFunction(n))throw new TypeError("visitor must be a function");function m(f){if(f===null)return"";if(E.isDate(f))return f.toISOString();if(E.isBoolean(f))return f.toString();if(!d&&E.isBlob(f))throw new Y("Blob is not supported. Use a Buffer instead.");return E.isArrayBuffer(f)||E.isTypedArray(f)?d&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function c(f,p,x){let j=f;if(f&&!x&&typeof f=="object"){if(E.endsWith(p,"{}"))p=a?p:p.slice(0,-2),f=JSON.stringify(f);else if(E.isArray(f)&&am(f)||(E.isFileList(f)||E.endsWith(p,"[]"))&&(j=E.toArray(f)))return p=El(p),j.forEach(function(k,N){!(E.isUndefined(k)||k===null)&&s.append(i===!0?vn([p],N,l):i===null?p:p+"[]",m(k))}),!1}return Kr(f)?!0:(s.append(vn(x,p,l),m(f)),!1)}const u=[],h=Object.assign(nm,{defaultVisitor:c,convertValue:m,isVisitable:Kr});function y(f,p){if(!E.isUndefined(f)){if(u.indexOf(f)!==-1)throw Error("Circular reference detected in "+p.join("."));u.push(f),E.forEach(f,function(j,v){(!(E.isUndefined(j)||j===null)&&n.call(s,j,E.isString(v)?v.trim():v,p,h))===!0&&y(j,p?p.concat(v):[v])}),u.pop()}}if(!E.isObject(t))throw new TypeError("data must be an object");return y(t),s}function wn(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function Aa(t,s){this._pairs=[],t&&hr(t,this,s)}const Pl=Aa.prototype;Pl.append=function(s,r){this._pairs.push([s,r])};Pl.toString=function(s){const r=s?function(a){return s.call(this,a,wn)}:wn;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function im(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Dl(t,s,r){if(!s)return t;const a=r&&r.encode||im;E.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let l;if(n?l=n(s,r):l=E.isURLSearchParams(s)?s.toString():new Aa(s,r).toString(a),l){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Nn{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){E.forEach(this.handlers,function(a){a!==null&&s(a)})}}const Rl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lm=typeof URLSearchParams<"u"?URLSearchParams:Aa,om=typeof FormData<"u"?FormData:null,cm=typeof Blob<"u"?Blob:null,dm={isBrowser:!0,classes:{URLSearchParams:lm,FormData:om,Blob:cm},protocols:["http","https","file","blob","url","data"]},Ta=typeof window<"u"&&typeof document<"u",Yr=typeof navigator=="object"&&navigator||void 0,mm=Ta&&(!Yr||["ReactNative","NativeScript","NS"].indexOf(Yr.product)<0),um=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hm=Ta&&window.location.href||"http://localhost",xm=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ta,hasStandardBrowserEnv:mm,hasStandardBrowserWebWorkerEnv:um,navigator:Yr,origin:hm},Symbol.toStringTag,{value:"Module"})),ke={...xm,...dm};function pm(t,s){return hr(t,new ke.classes.URLSearchParams,{visitor:function(r,a,n,l){return ke.isNode&&E.isBuffer(r)?(this.append(a,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function gm(t){return E.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function fm(t){const s={},r=Object.keys(t);let a;const n=r.length;let l;for(a=0;a<n;a++)l=r[a],s[l]=t[l];return s}function Ml(t){function s(r,a,n,l){let i=r[l++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),d=l>=r.length;return i=!i&&E.isArray(n)?n.length:i,d?(E.hasOwnProp(n,i)?n[i]=[n[i],a]:n[i]=a,!o):((!n[i]||!E.isObject(n[i]))&&(n[i]=[]),s(r,a,n[i],l)&&E.isArray(n[i])&&(n[i]=fm(n[i])),!o)}if(E.isFormData(t)&&E.isFunction(t.entries)){const r={};return E.forEachEntry(t,(a,n)=>{s(gm(a),n,r,0)}),r}return null}function ym(t,s,r){if(E.isString(t))try{return(s||JSON.parse)(t),E.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Cs={transitional:Rl,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,l=E.isObject(s);if(l&&E.isHTMLForm(s)&&(s=new FormData(s)),E.isFormData(s))return n?JSON.stringify(Ml(s)):s;if(E.isArrayBuffer(s)||E.isBuffer(s)||E.isStream(s)||E.isFile(s)||E.isBlob(s)||E.isReadableStream(s))return s;if(E.isArrayBufferView(s))return s.buffer;if(E.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return pm(s,this.formSerializer).toString();if((o=E.isFileList(s))||a.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return hr(o?{"files[]":s}:s,d&&new d,this.formSerializer)}}return l||n?(r.setContentType("application/json",!1),ym(s)):s}],transformResponse:[function(s){const r=this.transitional||Cs.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(E.isResponse(s)||E.isReadableStream(s))return s;if(s&&E.isString(s)&&(a&&!this.responseType||n)){const i=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(o){if(i)throw o.name==="SyntaxError"?Y.from(o,Y.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ke.classes.FormData,Blob:ke.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};E.forEach(["delete","get","head","post","put","patch"],t=>{Cs.headers[t]={}});const bm=E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jm=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(i){n=i.indexOf(":"),r=i.substring(0,n).trim().toLowerCase(),a=i.substring(n+1).trim(),!(!r||s[r]&&bm[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},kn=Symbol("internals");function ts(t){return t&&String(t).trim().toLowerCase()}function Us(t){return t===!1||t==null?t:E.isArray(t)?t.map(Us):String(t)}function vm(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const wm=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function vr(t,s,r,a,n){if(E.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!E.isString(s)){if(E.isString(a))return s.indexOf(a)!==-1;if(E.isRegExp(a))return a.test(s)}}function Nm(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function km(t,s){const r=E.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,l,i){return this[a].call(this,s,n,l,i)},configurable:!0})})}let De=class{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function l(o,d,m){const c=ts(d);if(!c)throw new Error("header name must be a non-empty string");const u=E.findKey(n,c);(!u||n[u]===void 0||m===!0||m===void 0&&n[u]!==!1)&&(n[u||d]=Us(o))}const i=(o,d)=>E.forEach(o,(m,c)=>l(m,c,d));if(E.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(E.isString(s)&&(s=s.trim())&&!wm(s))i(jm(s),r);else if(E.isObject(s)&&E.isIterable(s)){let o={},d,m;for(const c of s){if(!E.isArray(c))throw TypeError("Object iterator must return a key-value pair");o[m=c[0]]=(d=o[m])?E.isArray(d)?[...d,c[1]]:[d,c[1]]:c[1]}i(o,r)}else s!=null&&l(r,s,a);return this}get(s,r){if(s=ts(s),s){const a=E.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return vm(n);if(E.isFunction(r))return r.call(this,n,a);if(E.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=ts(s),s){const a=E.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||vr(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function l(i){if(i=ts(i),i){const o=E.findKey(a,i);o&&(!r||vr(a,a[o],o,r))&&(delete a[o],n=!0)}}return E.isArray(s)?s.forEach(l):l(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const l=r[a];(!s||vr(this,this[l],l,s,!0))&&(delete this[l],n=!0)}return n}normalize(s){const r=this,a={};return E.forEach(this,(n,l)=>{const i=E.findKey(a,l);if(i){r[i]=Us(n),delete r[l];return}const o=s?Nm(l):String(l).trim();o!==l&&delete r[l],r[o]=Us(n),a[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return E.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&E.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[kn]=this[kn]={accessors:{}}).accessors,n=this.prototype;function l(i){const o=ts(i);a[o]||(km(n,i),a[o]=!0)}return E.isArray(s)?s.forEach(l):l(s),this}};De.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);E.reduceDescriptors(De.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});E.freezeMethods(De);function wr(t,s){const r=this||Cs,a=s||r,n=De.from(a.headers);let l=a.data;return E.forEach(t,function(o){l=o.call(r,l,n.normalize(),s?s.status:void 0)}),n.normalize(),l}function Ll(t){return!!(t&&t.__CANCEL__)}function Yt(t,s,r){Y.call(this,t??"canceled",Y.ERR_CANCELED,s,r),this.name="CanceledError"}E.inherits(Yt,Y,{__CANCEL__:!0});function $l(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new Y("Request failed with status code "+r.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function _m(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Sm(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,l=0,i;return s=s!==void 0?s:1e3,function(d){const m=Date.now(),c=a[l];i||(i=m),r[n]=d,a[n]=m;let u=l,h=0;for(;u!==n;)h+=r[u++],u=u%t;if(n=(n+1)%t,n===l&&(l=(l+1)%t),m-i<s)return;const y=c&&m-c;return y?Math.round(h*1e3/y):void 0}}function Cm(t,s){let r=0,a=1e3/s,n,l;const i=(m,c=Date.now())=>{r=c,n=null,l&&(clearTimeout(l),l=null),t(...m)};return[(...m)=>{const c=Date.now(),u=c-r;u>=a?i(m,c):(n=m,l||(l=setTimeout(()=>{l=null,i(n)},a-u)))},()=>n&&i(n)]}const Zs=(t,s,r=3)=>{let a=0;const n=Sm(50,250);return Cm(l=>{const i=l.loaded,o=l.lengthComputable?l.total:void 0,d=i-a,m=n(d),c=i<=o;a=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:d,rate:m||void 0,estimated:m&&o&&c?(o-i)/m:void 0,event:l,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(u)},r)},_n=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},Sn=t=>(...s)=>E.asap(()=>t(...s)),Am=ke.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,ke.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(ke.origin),ke.navigator&&/(msie|trident)/i.test(ke.navigator.userAgent)):()=>!0,Tm=ke.hasStandardBrowserEnv?{write(t,s,r,a,n,l){const i=[t+"="+encodeURIComponent(s)];E.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),E.isString(a)&&i.push("path="+a),E.isString(n)&&i.push("domain="+n),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Em(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Pm(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Il(t,s,r){let a=!Em(s);return t&&(a||r==!1)?Pm(t,s):s}const Cn=t=>t instanceof De?{...t}:t;function St(t,s){s=s||{};const r={};function a(m,c,u,h){return E.isPlainObject(m)&&E.isPlainObject(c)?E.merge.call({caseless:h},m,c):E.isPlainObject(c)?E.merge({},c):E.isArray(c)?c.slice():c}function n(m,c,u,h){if(E.isUndefined(c)){if(!E.isUndefined(m))return a(void 0,m,u,h)}else return a(m,c,u,h)}function l(m,c){if(!E.isUndefined(c))return a(void 0,c)}function i(m,c){if(E.isUndefined(c)){if(!E.isUndefined(m))return a(void 0,m)}else return a(void 0,c)}function o(m,c,u){if(u in s)return a(m,c);if(u in t)return a(void 0,m)}const d={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(m,c,u)=>n(Cn(m),Cn(c),u,!0)};return E.forEach(Object.keys({...t,...s}),function(c){const u=d[c]||n,h=u(t[c],s[c],c);E.isUndefined(h)&&u!==o||(r[c]=h)}),r}const Fl=t=>{const s=St({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:l,headers:i,auth:o}=s;if(s.headers=i=De.from(i),s.url=Dl(Il(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),E.isFormData(r)){if(ke.hasStandardBrowserEnv||ke.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(E.isFunction(r.getHeaders)){const d=r.getHeaders(),m=["content-type","content-length"];Object.entries(d).forEach(([c,u])=>{m.includes(c.toLowerCase())&&i.set(c,u)})}}if(ke.hasStandardBrowserEnv&&(a&&E.isFunction(a)&&(a=a(s)),a||a!==!1&&Am(s.url))){const d=n&&l&&Tm.read(l);d&&i.set(n,d)}return s},Dm=typeof XMLHttpRequest<"u",Rm=Dm&&function(t){return new Promise(function(r,a){const n=Fl(t);let l=n.data;const i=De.from(n.headers).normalize();let{responseType:o,onUploadProgress:d,onDownloadProgress:m}=n,c,u,h,y,f;function p(){y&&y(),f&&f(),n.cancelToken&&n.cancelToken.unsubscribe(c),n.signal&&n.signal.removeEventListener("abort",c)}let x=new XMLHttpRequest;x.open(n.method.toUpperCase(),n.url,!0),x.timeout=n.timeout;function j(){if(!x)return;const k=De.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:k,config:t,request:x};$l(function(w){r(w),p()},function(w){a(w),p()},g),x=null}"onloadend"in x?x.onloadend=j:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(j)},x.onabort=function(){x&&(a(new Y("Request aborted",Y.ECONNABORTED,t,x)),x=null)},x.onerror=function(N){const g=N&&N.message?N.message:"Network Error",_=new Y(g,Y.ERR_NETWORK,t,x);_.event=N||null,a(_),x=null},x.ontimeout=function(){let N=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const g=n.transitional||Rl;n.timeoutErrorMessage&&(N=n.timeoutErrorMessage),a(new Y(N,g.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,t,x)),x=null},l===void 0&&i.setContentType(null),"setRequestHeader"in x&&E.forEach(i.toJSON(),function(N,g){x.setRequestHeader(g,N)}),E.isUndefined(n.withCredentials)||(x.withCredentials=!!n.withCredentials),o&&o!=="json"&&(x.responseType=n.responseType),m&&([h,f]=Zs(m,!0),x.addEventListener("progress",h)),d&&x.upload&&([u,y]=Zs(d),x.upload.addEventListener("progress",u),x.upload.addEventListener("loadend",y)),(n.cancelToken||n.signal)&&(c=k=>{x&&(a(!k||k.type?new Yt(null,t,x):k),x.abort(),x=null)},n.cancelToken&&n.cancelToken.subscribe(c),n.signal&&(n.signal.aborted?c():n.signal.addEventListener("abort",c)));const v=_m(n.url);if(v&&ke.protocols.indexOf(v)===-1){a(new Y("Unsupported protocol "+v+":",Y.ERR_BAD_REQUEST,t));return}x.send(l||null)})},Mm=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const l=function(m){if(!n){n=!0,o();const c=m instanceof Error?m:this.reason;a.abort(c instanceof Y?c:new Yt(c instanceof Error?c.message:c))}};let i=s&&setTimeout(()=>{i=null,l(new Y(`timeout ${s} of ms exceeded`,Y.ETIMEDOUT))},s);const o=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),t=null)};t.forEach(m=>m.addEventListener("abort",l));const{signal:d}=a;return d.unsubscribe=()=>E.asap(o),d}},Lm=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},$m=async function*(t,s){for await(const r of Im(t))yield*Lm(r,s)},Im=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},An=(t,s,r,a)=>{const n=$m(t,s);let l=0,i,o=d=>{i||(i=!0,a&&a(d))};return new ReadableStream({async pull(d){try{const{done:m,value:c}=await n.next();if(m){o(),d.close();return}let u=c.byteLength;if(r){let h=l+=u;r(h)}d.enqueue(new Uint8Array(c))}catch(m){throw o(m),m}},cancel(d){return o(d),n.return()}},{highWaterMark:2})},Tn=64*1024,{isFunction:Ds}=E,Fm=(({Request:t,Response:s})=>({Request:t,Response:s}))(E.global),{ReadableStream:En,TextEncoder:Pn}=E.global,Dn=(t,...s)=>{try{return!!t(...s)}catch{return!1}},Vm=t=>{t=E.merge.call({skipUndefined:!0},Fm,t);const{fetch:s,Request:r,Response:a}=t,n=s?Ds(s):typeof fetch=="function",l=Ds(r),i=Ds(a);if(!n)return!1;const o=n&&Ds(En),d=n&&(typeof Pn=="function"?(f=>p=>f.encode(p))(new Pn):async f=>new Uint8Array(await new r(f).arrayBuffer())),m=l&&o&&Dn(()=>{let f=!1;const p=new r(ke.origin,{body:new En,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!p}),c=i&&o&&Dn(()=>E.isReadableStream(new a("").body)),u={stream:c&&(f=>f.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!u[f]&&(u[f]=(p,x)=>{let j=p&&p[f];if(j)return j.call(p);throw new Y(`Response type '${f}' is not supported`,Y.ERR_NOT_SUPPORT,x)})});const h=async f=>{if(f==null)return 0;if(E.isBlob(f))return f.size;if(E.isSpecCompliantForm(f))return(await new r(ke.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(E.isArrayBufferView(f)||E.isArrayBuffer(f))return f.byteLength;if(E.isURLSearchParams(f)&&(f=f+""),E.isString(f))return(await d(f)).byteLength},y=async(f,p)=>{const x=E.toFiniteNumber(f.getContentLength());return x??h(p)};return async f=>{let{url:p,method:x,data:j,signal:v,cancelToken:k,timeout:N,onDownloadProgress:g,onUploadProgress:_,responseType:w,headers:P,withCredentials:D="same-origin",fetchOptions:C}=Fl(f),S=s||fetch;w=w?(w+"").toLowerCase():"text";let R=Mm([v,k&&k.toAbortSignal()],N),H=null;const z=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let T;try{if(_&&m&&x!=="get"&&x!=="head"&&(T=await y(P,j))!==0){let K=new r(p,{method:"POST",body:j,duplex:"half"}),ue;if(E.isFormData(j)&&(ue=K.headers.get("content-type"))&&P.setContentType(ue),K.body){const[Se,we]=_n(T,Zs(Sn(_)));j=An(K.body,Tn,Se,we)}}E.isString(D)||(D=D?"include":"omit");const A=l&&"credentials"in r.prototype,q={...C,signal:R,method:x.toUpperCase(),headers:P.normalize().toJSON(),body:j,duplex:"half",credentials:A?D:void 0};H=l&&new r(p,q);let M=await(l?S(H,C):S(p,q));const O=c&&(w==="stream"||w==="response");if(c&&(g||O&&z)){const K={};["status","statusText","headers"].forEach(ht=>{K[ht]=M[ht]});const ue=E.toFiniteNumber(M.headers.get("content-length")),[Se,we]=g&&_n(ue,Zs(Sn(g),!0))||[];M=new a(An(M.body,Tn,Se,()=>{we&&we(),z&&z()}),K)}w=w||"text";let X=await u[E.findKey(u,w)||"text"](M,f);return!O&&z&&z(),await new Promise((K,ue)=>{$l(K,ue,{data:X,headers:De.from(M.headers),status:M.status,statusText:M.statusText,config:f,request:H})})}catch(A){throw z&&z(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new Y("Network Error",Y.ERR_NETWORK,f,H),{cause:A.cause||A}):Y.from(A,A&&A.code,f,H)}}},Om=new Map,Vl=t=>{let s=t?t.env:{};const{fetch:r,Request:a,Response:n}=s,l=[a,n,r];let i=l.length,o=i,d,m,c=Om;for(;o--;)d=l[o],m=c.get(d),m===void 0&&c.set(d,m=o?new Map:Vm(s)),c=m;return m};Vl();const Jr={http:rm,xhr:Rm,fetch:{get:Vl}};E.forEach(Jr,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Rn=t=>`- ${t}`,zm=t=>E.isFunction(t)||t===null||t===!1,Ol={getAdapter:(t,s)=>{t=E.isArray(t)?t:[t];const{length:r}=t;let a,n;const l={};for(let i=0;i<r;i++){a=t[i];let o;if(n=a,!zm(a)&&(n=Jr[(o=String(a)).toLowerCase()],n===void 0))throw new Y(`Unknown adapter '${o}'`);if(n&&(E.isFunction(n)||(n=n.get(s))))break;l[o||"#"+i]=n}if(!n){const i=Object.entries(l).map(([d,m])=>`adapter ${d} `+(m===!1?"is not supported by the environment":"is not available in the build"));let o=r?i.length>1?`since :
`+i.map(Rn).join(`
`):" "+Rn(i[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Jr};function Nr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Yt(null,t)}function Mn(t){return Nr(t),t.headers=De.from(t.headers),t.data=wr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ol.getAdapter(t.adapter||Cs.adapter,t)(t).then(function(a){return Nr(t),a.data=wr.call(t,t.transformResponse,a),a.headers=De.from(a.headers),a},function(a){return Ll(a)||(Nr(t),a&&a.response&&(a.response.data=wr.call(t,t.transformResponse,a.response),a.response.headers=De.from(a.response.headers))),Promise.reject(a)})}const zl="1.12.2",xr={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{xr[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const Ln={};xr.transitional=function(s,r,a){function n(l,i){return"[Axios v"+zl+"] Transitional option '"+l+"'"+i+(a?". "+a:"")}return(l,i,o)=>{if(s===!1)throw new Y(n(i," has been removed"+(r?" in "+r:"")),Y.ERR_DEPRECATED);return r&&!Ln[i]&&(Ln[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(l,i,o):!0}};xr.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function Bm(t,s,r){if(typeof t!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const l=a[n],i=s[l];if(i){const o=t[l],d=o===void 0||i(o,l,t);if(d!==!0)throw new Y("option "+l+" must be "+d,Y.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Y("Unknown option "+l,Y.ERR_BAD_OPTION)}}const qs={assertOptions:Bm,validators:xr},He=qs.validators;let vt=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Nn,response:new Nn}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const l=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=St(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:l}=r;a!==void 0&&qs.assertOptions(a,{silentJSONParsing:He.transitional(He.boolean),forcedJSONParsing:He.transitional(He.boolean),clarifyTimeoutError:He.transitional(He.boolean)},!1),n!=null&&(E.isFunction(n)?r.paramsSerializer={serialize:n}:qs.assertOptions(n,{encode:He.function,serialize:He.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),qs.assertOptions(r,{baseUrl:He.spelling("baseURL"),withXsrfToken:He.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=l&&E.merge(l.common,l[r.method]);l&&E.forEach(["delete","get","head","post","put","patch","common"],f=>{delete l[f]}),r.headers=De.concat(i,l);const o=[];let d=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(d=d&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});const m=[];this.interceptors.response.forEach(function(p){m.push(p.fulfilled,p.rejected)});let c,u=0,h;if(!d){const f=[Mn.bind(this),void 0];for(f.unshift(...o),f.push(...m),h=f.length,c=Promise.resolve(r);u<h;)c=c.then(f[u++],f[u++]);return c}h=o.length;let y=r;for(;u<h;){const f=o[u++],p=o[u++];try{y=f(y)}catch(x){p.call(this,x);break}}try{c=Mn.call(this,y)}catch(f){return Promise.reject(f)}for(u=0,h=m.length;u<h;)c=c.then(m[u++],m[u++]);return c}getUri(s){s=St(this.defaults,s);const r=Il(s.baseURL,s.url,s.allowAbsoluteUrls);return Dl(r,s.params,s.paramsSerializer)}};E.forEach(["delete","get","head","options"],function(s){vt.prototype[s]=function(r,a){return this.request(St(a||{},{method:s,url:r,data:(a||{}).data}))}});E.forEach(["post","put","patch"],function(s){function r(a){return function(l,i,o){return this.request(St(o||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}vt.prototype[s]=r(),vt.prototype[s+"Form"]=r(!0)});let Um=class Bl{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const a=this;this.promise.then(n=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](n);a._listeners=null}),this.promise.then=n=>{let l;const i=new Promise(o=>{a.subscribe(o),l=o}).then(n);return i.cancel=function(){a.unsubscribe(l)},i},s(function(l,i,o){a.reason||(a.reason=new Yt(l,i,o),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new Bl(function(n){s=n}),cancel:s}}};function qm(t){return function(r){return t.apply(null,r)}}function Hm(t){return E.isObject(t)&&t.isAxiosError===!0}const Xr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xr).forEach(([t,s])=>{Xr[s]=t});function Ul(t){const s=new vt(t),r=jl(vt.prototype.request,s);return E.extend(r,vt.prototype,s,{allOwnKeys:!0}),E.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return Ul(St(t,n))},r}const xe=Ul(Cs);xe.Axios=vt;xe.CanceledError=Yt;xe.CancelToken=Um;xe.isCancel=Ll;xe.VERSION=zl;xe.toFormData=hr;xe.AxiosError=Y;xe.Cancel=xe.CanceledError;xe.all=function(s){return Promise.all(s)};xe.spread=qm;xe.isAxiosError=Hm;xe.mergeConfig=St;xe.AxiosHeaders=De;xe.formToJSON=t=>Ml(E.isHTMLForm(t)?new FormData(t):t);xe.getAdapter=Ol.getAdapter;xe.HttpStatusCode=Xr;xe.default=xe;const{Axios:yf,AxiosError:bf,CanceledError:jf,isCancel:vf,CancelToken:wf,VERSION:Nf,all:kf,Cancel:_f,isAxiosError:Sf,spread:Cf,toFormData:Af,AxiosHeaders:Tf,HttpStatusCode:Ef,formToJSON:Pf,getAdapter:Df,mergeConfig:Rf}=xe,pr={BASE_URL:window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="192.168.1.60"?"http://localhost:3003":"https://creche-backend.onrender.com"},B=xe.create({baseURL:pr.BASE_URL,timeout:1e4,headers:{"Content-Type":"application/json"}});B.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));B.interceptors.response.use(t=>t,t=>{var s,r;return((s=t.response)==null?void 0:s.status)===401?(localStorage.removeItem("token"),window.location.href="/login",U.error("Session expirée, veuillez vous reconnecter"),Promise.reject(t)):(((r=t.response)==null?void 0:r.status)>=500&&U.error("Erreur serveur, veuillez réessayer plus tard"),t.response||U.error("Erreur de connexion, vérifiez votre connexion internet"),Promise.reject(t))});const Rs={get:(t,s={})=>B.get(t,s),post:(t,s={},r={})=>B.post(t,s,r),put:(t,s={},r={})=>B.put(t,s,r),patch:(t,s={},r={})=>B.patch(t,s,r),delete:(t,s={})=>B.delete(t,s)},Gm=t=>{const s=new URLSearchParams;return Object.keys(t).forEach(r=>{const a=t[r];a!=null&&a!==""&&s.append(r,a)}),s.toString()},Wm=async(t,s={})=>{const r=Gm(s),a=r?`${t}?${r}`:t;return(await B.get(a)).data},$n=xe.create({baseURL:pr.BASE_URL,timeout:1e4});$n.interceptors.response.use(t=>t,async t=>{const{config:s}=t;return!s||!s.retry||(s.retryCount=s.retryCount||0,s.retryCount>=s.retry)?Promise.reject(t):(s.retryCount+=1,await new Promise(r=>{setTimeout(r,s.retryDelay||1e3)}),$n(s))});class Km{async login(s,r){return(await B.post("/api/auth/login",{email:s,password:r})).data}async register(s){return(await B.post("/api/auth/register",s)).data}async verifyToken(s){return(await B.get("/api/auth/me",{headers:{Authorization:`Bearer ${s}`}})).data}async changePassword(s,r){const a=localStorage.getItem("token");return(await B.post("/api/auth/change-password",{currentPassword:s,newPassword:r},{headers:{Authorization:`Bearer ${a}`}})).data}getToken(){return localStorage.getItem("token")}removeToken(){localStorage.removeItem("token")}isAuthenticated(){const s=this.getToken();if(!s)return!1;try{const r=JSON.parse(atob(s.split(".")[1])),a=Date.now()/1e3;return r.exp>a}catch{return!1}}getUserFromToken(){const s=this.getToken();if(!s)return null;try{const r=JSON.parse(atob(s.split(".")[1]));return{userId:r.userId,email:r.email,role:r.role}}catch{return null}}}const Ms=new Km,Ea=b.createContext(),Ym=(t,s)=>{switch(s.type){case"LOGIN_START":return{...t,loading:!0,error:null};case"LOGIN_SUCCESS":return{...t,loading:!1,isAuthenticated:!0,user:s.payload.user,token:s.payload.token,error:null};case"LOGIN_ERROR":return{...t,loading:!1,isAuthenticated:!1,user:null,token:null,error:s.payload};case"LOGOUT":return{...t,loading:!1,isAuthenticated:!1,user:null,token:null,error:null};case"UPDATE_USER":return{...t,user:{...t.user,...s.payload}};case"CLEAR_ERROR":return{...t,error:null};default:return t}},Jm={isAuthenticated:!1,user:null,token:null,loading:!0,error:null},Xm=({children:t})=>{const[s,r]=b.useReducer(Ym,Jm);b.useEffect(()=>{(async()=>{const x=localStorage.getItem("token");if(x)try{const j=await Ms.verifyToken(x);r({type:"LOGIN_SUCCESS",payload:{user:j.user,token:x}})}catch(j){console.error("Token invalide:",j),localStorage.removeItem("token"),r({type:"LOGOUT"})}else r({type:"LOGOUT"})})()},[]);const a=async(p,x)=>{var j,v;r({type:"LOGIN_START"});try{const k=await Ms.login(p,x);return localStorage.setItem("token",k.token),r({type:"LOGIN_SUCCESS",payload:{user:k.user,token:k.token}}),k}catch(k){const N=((v=(j=k.response)==null?void 0:j.data)==null?void 0:v.error)||"Erreur de connexion";throw r({type:"LOGIN_ERROR",payload:N}),k}},n=async p=>{var x,j;r({type:"LOGIN_START"});try{const v=await Ms.register(p);return localStorage.setItem("token",v.token),r({type:"LOGIN_SUCCESS",payload:{user:v.user,token:v.token}}),v}catch(v){const k=((j=(x=v.response)==null?void 0:x.data)==null?void 0:j.error)||"Erreur lors de l'inscription";throw r({type:"LOGIN_ERROR",payload:k}),v}},l=()=>{localStorage.removeItem("token"),r({type:"LOGOUT"})},i=p=>{r({type:"UPDATE_USER",payload:p})},o=()=>{r({type:"CLEAR_ERROR"})},d=async(p,x)=>{var j,v;try{return await Ms.changePassword(p,x),!0}catch(k){const N=((v=(j=k.response)==null?void 0:j.data)==null?void 0:v.error)||"Erreur lors du changement de mot de passe";throw r({type:"LOGIN_ERROR",payload:N}),k}},m=p=>{var x;return((x=s.user)==null?void 0:x.role)===p},c=p=>{var x;return p.includes((x=s.user)==null?void 0:x.role)},f={...s,login:a,register:n,logout:l,updateUser:i,clearError:o,changePassword:d,hasRole:m,hasAnyRole:c,isAdmin:()=>m("admin"),isStaff:()=>c(["admin","staff"]),isParent:()=>m("parent")};return e.jsx(Ea.Provider,{value:f,children:t})},Pa=()=>{const t=b.useContext(Ea);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},oe=()=>{const t=b.useContext(Ea);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Da=()=>{const{user:t}=oe(),[s,r]=b.useState(Date.now());return{imageKey:s,refreshImage:()=>{r(Date.now())},getImageUrl:(i=null)=>{if(!(t!=null&&t.profile_image)&&!(t!=null&&t.photo_url))return null;const o=i||s;return`${pr.BASE_URL}${t.profile_image||t.photo_url}?t=${o}`},hasImage:()=>!!(t!=null&&t.profile_image||t!=null&&t.photo_url),user:t}},Zm=()=>{const{user:t,isAuthenticated:s}=oe(),[r,a]=b.useState(!1),[n,l]=b.useState(!0);return b.useEffect(()=>{(async()=>{if(!s||!t){a(!1),l(!1);return}if(t.role==="parent"){a(!0),l(!1);return}if(t.role==="admin"||t.role==="staff")try{const o=await B.get("/api/user/has-children");a(o.data.hasChildren)}catch(o){console.error("Erreur vérification accès Mon Espace:",o),a(!1)}else a(!1);l(!1)})()},[t,s]),{hasAccess:r,loading:n}},Zr=({className:t=""})=>{const{currentLanguage:s,toggleLanguage:r,getAvailableLanguages:a}=te();return a(),e.jsxs("button",{onClick:r,className:`flex items-center space-x-2 rtl:space-x-reverse px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary-600 transition-colors duration-200 ${t}`,title:"Changer de langue / تغيير اللغة",children:[e.jsx(Br,{className:"w-4 h-4"}),e.jsx("span",{className:"uppercase font-semibold",children:(s==null?void 0:s.toUpperCase())||"FR"})]})};function In(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Qm(...t){return s=>{let r=!1;const a=t.map(n=>{const l=In(n,s);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let n=0;n<a.length;n++){const l=a[n];typeof l=="function"?l():In(t[n],null)}}}}function eu(t){const s=su(t),r=b.forwardRef((a,n)=>{const{children:l,...i}=a,o=b.Children.toArray(l),d=o.find(au);if(d){const m=d.props.children,c=o.map(u=>u===d?b.Children.count(m)>1?b.Children.only(null):b.isValidElement(m)?m.props.children:null:u);return e.jsx(s,{...i,ref:n,children:b.isValidElement(m)?b.cloneElement(m,void 0,c):null})}return e.jsx(s,{...i,ref:n,children:l})});return r.displayName=`${t}.Slot`,r}var tu=eu("Slot");function su(t){const s=b.forwardRef((r,a)=>{const{children:n,...l}=r;if(b.isValidElement(n)){const i=iu(n),o=nu(l,n.props);return n.type!==b.Fragment&&(o.ref=a?Qm(a,i):i),b.cloneElement(n,o)}return b.Children.count(n)>1?b.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var ru=Symbol("radix.slottable");function au(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ru}function nu(t,s){const r={...s};for(const a in s){const n=t[a],l=s[a];/^on[A-Z]/.test(a)?n&&l?r[a]=(...o)=>{const d=l(...o);return n(...o),d}:n&&(r[a]=n):a==="style"?r[a]={...n,...l}:a==="className"&&(r[a]=[n,l].filter(Boolean).join(" "))}return{...t,...r}}function iu(t){var a,n;let s=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function ql(t){var s,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(r=ql(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}function Hl(){for(var t,s,r=0,a="",n=arguments.length;r<n;r++)(t=arguments[r])&&(s=ql(t))&&(a&&(a+=" "),a+=s);return a}const Fn=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Vn=Hl,lu=(t,s)=>r=>{var a;if((s==null?void 0:s.variants)==null)return Vn(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:l}=s,i=Object.keys(n).map(m=>{const c=r==null?void 0:r[m],u=l==null?void 0:l[m];if(c===null)return null;const h=Fn(c)||Fn(u);return n[m][h]}),o=r&&Object.entries(r).reduce((m,c)=>{let[u,h]=c;return h===void 0||(m[u]=h),m},{}),d=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((m,c)=>{let{class:u,className:h,...y}=c;return Object.entries(y).every(f=>{let[p,x]=f;return Array.isArray(x)?x.includes({...l,...o}[p]):{...l,...o}[p]===x})?[...m,u,h]:m},[]);return Vn(t,i,d,r==null?void 0:r.class,r==null?void 0:r.className)},Ra="-",ou=t=>{const s=du(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:i=>{const o=i.split(Ra);return o[0]===""&&o.length!==1&&o.shift(),Gl(o,s)||cu(i)},getConflictingClassGroupIds:(i,o)=>{const d=r[i]||[];return o&&a[i]?[...d,...a[i]]:d}}},Gl=(t,s)=>{var i;if(t.length===0)return s.classGroupId;const r=t[0],a=s.nextPart.get(r),n=a?Gl(t.slice(1),a):void 0;if(n)return n;if(s.validators.length===0)return;const l=t.join(Ra);return(i=s.validators.find(({validator:o})=>o(l)))==null?void 0:i.classGroupId},On=/^\[(.+)\]$/,cu=t=>{if(On.test(t)){const s=On.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},du=t=>{const{theme:s,prefix:r}=t,a={nextPart:new Map,validators:[]};return uu(Object.entries(t.classGroups),r).forEach(([l,i])=>{Qr(i,a,l,s)}),a},Qr=(t,s,r,a)=>{t.forEach(n=>{if(typeof n=="string"){const l=n===""?s:zn(s,n);l.classGroupId=r;return}if(typeof n=="function"){if(mu(n)){Qr(n(a),s,r,a);return}s.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([l,i])=>{Qr(i,zn(s,l),r,a)})})},zn=(t,s)=>{let r=t;return s.split(Ra).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},mu=t=>t.isThemeGetter,uu=(t,s)=>s?t.map(([r,a])=>{const n=a.map(l=>typeof l=="string"?s+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([i,o])=>[s+i,o])):l);return[r,n]}):t,hu=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,a=new Map;const n=(l,i)=>{r.set(l,i),s++,s>t&&(s=0,a=r,r=new Map)};return{get(l){let i=r.get(l);if(i!==void 0)return i;if((i=a.get(l))!==void 0)return n(l,i),i},set(l,i){r.has(l)?r.set(l,i):n(l,i)}}},Wl="!",xu=t=>{const{separator:s,experimentalParseClassName:r}=t,a=s.length===1,n=s[0],l=s.length,i=o=>{const d=[];let m=0,c=0,u;for(let x=0;x<o.length;x++){let j=o[x];if(m===0){if(j===n&&(a||o.slice(x,x+l)===s)){d.push(o.slice(c,x)),c=x+l;continue}if(j==="/"){u=x;continue}}j==="["?m++:j==="]"&&m--}const h=d.length===0?o:o.substring(c),y=h.startsWith(Wl),f=y?h.substring(1):h,p=u&&u>c?u-c:void 0;return{modifiers:d,hasImportantModifier:y,baseClassName:f,maybePostfixModifierPosition:p}};return r?o=>r({className:o,parseClassName:i}):i},pu=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(a=>{a[0]==="["?(s.push(...r.sort(),a),r=[]):r.push(a)}),s.push(...r.sort()),s},gu=t=>({cache:hu(t.cacheSize),parseClassName:xu(t),...ou(t)}),fu=/\s+/,yu=(t,s)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=s,l=[],i=t.trim().split(fu);let o="";for(let d=i.length-1;d>=0;d-=1){const m=i[d],{modifiers:c,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:y}=r(m);let f=!!y,p=a(f?h.substring(0,y):h);if(!p){if(!f){o=m+(o.length>0?" "+o:o);continue}if(p=a(h),!p){o=m+(o.length>0?" "+o:o);continue}f=!1}const x=pu(c).join(":"),j=u?x+Wl:x,v=j+p;if(l.includes(v))continue;l.push(v);const k=n(p,f);for(let N=0;N<k.length;++N){const g=k[N];l.push(j+g)}o=m+(o.length>0?" "+o:o)}return o};function bu(){let t=0,s,r,a="";for(;t<arguments.length;)(s=arguments[t++])&&(r=Kl(s))&&(a&&(a+=" "),a+=r);return a}const Kl=t=>{if(typeof t=="string")return t;let s,r="";for(let a=0;a<t.length;a++)t[a]&&(s=Kl(t[a]))&&(r&&(r+=" "),r+=s);return r};function ju(t,...s){let r,a,n,l=i;function i(d){const m=s.reduce((c,u)=>u(c),t());return r=gu(m),a=r.cache.get,n=r.cache.set,l=o,o(d)}function o(d){const m=a(d);if(m)return m;const c=yu(d,r);return n(d,c),c}return function(){return l(bu.apply(null,arguments))}}const ie=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},Yl=/^\[(?:([a-z-]+):)?(.+)\]$/i,vu=/^\d+\/\d+$/,wu=new Set(["px","full","screen"]),Nu=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ku=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_u=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Su=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Cu=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Je=t=>Lt(t)||wu.has(t)||vu.test(t),rt=t=>Jt(t,"length",Lu),Lt=t=>!!t&&!Number.isNaN(Number(t)),kr=t=>Jt(t,"number",Lt),ss=t=>!!t&&Number.isInteger(Number(t)),Au=t=>t.endsWith("%")&&Lt(t.slice(0,-1)),Z=t=>Yl.test(t),at=t=>Nu.test(t),Tu=new Set(["length","size","percentage"]),Eu=t=>Jt(t,Tu,Jl),Pu=t=>Jt(t,"position",Jl),Du=new Set(["image","url"]),Ru=t=>Jt(t,Du,Iu),Mu=t=>Jt(t,"",$u),rs=()=>!0,Jt=(t,s,r)=>{const a=Yl.exec(t);return a?a[1]?typeof s=="string"?a[1]===s:s.has(a[1]):r(a[2]):!1},Lu=t=>ku.test(t)&&!_u.test(t),Jl=()=>!1,$u=t=>Su.test(t),Iu=t=>Cu.test(t),Fu=()=>{const t=ie("colors"),s=ie("spacing"),r=ie("blur"),a=ie("brightness"),n=ie("borderColor"),l=ie("borderRadius"),i=ie("borderSpacing"),o=ie("borderWidth"),d=ie("contrast"),m=ie("grayscale"),c=ie("hueRotate"),u=ie("invert"),h=ie("gap"),y=ie("gradientColorStops"),f=ie("gradientColorStopPositions"),p=ie("inset"),x=ie("margin"),j=ie("opacity"),v=ie("padding"),k=ie("saturate"),N=ie("scale"),g=ie("sepia"),_=ie("skew"),w=ie("space"),P=ie("translate"),D=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto",Z,s],R=()=>[Z,s],H=()=>["",Je,rt],z=()=>["auto",Lt,Z],T=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",Z],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[Lt,Z];return{cacheSize:500,separator:":",theme:{colors:[rs],spacing:[Je,rt],blur:["none","",at,Z],brightness:K(),borderColor:[t],borderRadius:["none","","full",at,Z],borderSpacing:R(),borderWidth:H(),contrast:K(),grayscale:O(),hueRotate:K(),invert:O(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[Au,rt],inset:S(),margin:S(),opacity:K(),padding:R(),saturate:K(),scale:K(),sepia:O(),skew:K(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Z]}],container:["container"],columns:[{columns:[at]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...T(),Z]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ss,Z]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Z]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",ss,Z]}],"grid-cols":[{"grid-cols":[rs]}],"col-start-end":[{col:["auto",{span:["full",ss,Z]},Z]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[rs]}],"row-start-end":[{row:["auto",{span:[ss,Z]},Z]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Z]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Z]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[w]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[w]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Z,s]}],"min-w":[{"min-w":[Z,s,"min","max","fit"]}],"max-w":[{"max-w":[Z,s,"none","full","min","max","fit","prose",{screen:[at]},at]}],h:[{h:[Z,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Z,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Z,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Z,s,"auto","min","max","fit"]}],"font-size":[{text:["base",at,rt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",kr]}],"font-family":[{font:[rs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Z]}],"line-clamp":[{"line-clamp":["none",Lt,kr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Je,Z]}],"list-image":[{"list-image":["none",Z]}],"list-style-type":[{list:["none","disc","decimal",Z]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Je,rt]}],"underline-offset":[{"underline-offset":["auto",Je,Z]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...T(),Pu]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Eu]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ru]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:A()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[Je,Z]}],"outline-w":[{outline:[Je,rt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Je,rt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",at,Mu]}],"shadow-color":[{shadow:[rs]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",at,Z]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[u]}],saturate:[{saturate:[k]}],sepia:[{sepia:[g]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[g]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Z]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",Z]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",Z]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[ss,Z]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Z]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Z]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Z]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Je,rt,kr]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Vu=ju(Fu);function mt(...t){return Vu(Hl(t))}const Ou=lu("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-full px-3 text-xs",lg:"h-10 rounded-full px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),L=b.forwardRef(({className:t,variant:s,size:r,asChild:a=!1,...n},l)=>{const i=a?tu:"button";return e.jsx(i,{className:mt(Ou({variant:s,size:r,className:t})),ref:l,...n})});L.displayName="Button";const ea=()=>{const[t,s]=b.useState("light");b.useEffect(()=>{const a=localStorage.getItem("theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",l=a||n;s(l),document.documentElement.classList.toggle("dark",l==="dark")},[]);const r=()=>{const a=t==="light"?"dark":"light";s(a),localStorage.setItem("theme",a),document.documentElement.classList.toggle("dark",a==="dark")};return e.jsxs(L,{variant:"ghost",size:"icon",onClick:r,className:"rounded-full",children:[t==="light"?e.jsx(il,{className:"h-4 w-4"}):e.jsx(ll,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Basculer le thème"})]})},zu=t=>{if(!t)return null;if(t.startsWith("http")||t.startsWith("blob:")||t.startsWith("data:"))return t;const s="/creche/",r=t.startsWith("/")?t.slice(1):t;return`${s}${r}`},Ct={logo:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iIzM3MzNkYyIvPgo8dGV4dCB4PSIyMCIgeT0iMjYiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5NPC90ZXh0Pgo8L3N2Zz4K",placeholder:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjZjNmNGY2Ii8+CjxwYXRoIGQ9Ik0yMDAgMTUwTDE3MCAyMDBIMjMwTDIwMCAxNTBaIiBmaWxsPSIjZDFkNWRiIi8+CjxjaXJjbGUgY3g9IjE1MCIgY3k9IjEwMCIgcj0iMjAiIGZpbGw9IiNkMWQ1ZGIiLz4KPHRleHQgeD0iMjAwIiB5PSIyNjAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzZiNzI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SW1hZ2UgZGUgZMOpbW9uc3RyYXRpb248L3RleHQ+Cjwvc3ZnPgo="},Bt=({src:t,alt:s,fallback:r=Ct.placeholder,className:a="",onLoad:n,onError:l,...i})=>{const o=c=>{c.target.src!==r&&(c.target.src=r),l&&l(c)},d=c=>{n&&n(c)},m=zu(t)||r;return e.jsx("img",{src:m,alt:s,className:a,onError:o,onLoad:d,...i})},Bu=()=>{const{t}=Wt(),{isRTL:s}=te(),{isAuthenticated:r,user:a,logout:n,isStaff:l}=oe(),{getImageUrl:i,hasImage:o}=Da(),{hasAccess:d}=Zm(),m=Ns(),[c,u]=b.useState(!1),[h,y]=b.useState(!1),f={name:"Mima Elghalia",nameAr:"ميما الغالية",logo:"/images/logo.jpg"},p=[{name:t("nav.home"),href:"/"},...r?[...(a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="staff"?[{name:s?"لوحة التحكم":"Dashboard",href:"/dashboard"}]:[],...d?[{name:s?"مساحتي":"Mon Espace",href:"/mon-espace"}]:[]]:[{name:t("nav.enrollment"),href:"/inscription"}],{name:t("nav.contact"),href:"/contact"}],x=j=>j==="/"?m.pathname==="/":m.pathname.startsWith(j);return e.jsxs("header",{className:"sticky top-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 transition-colors",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(W,{to:"/",className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx(Bt,{src:f.logo,alt:f.name,fallback:Ct.logo,className:"w-full h-full object-contain"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:s?f.nameAr:f.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s?"حضانة":"Crèche"})]})]})}),e.jsx("nav",{className:"hidden md:flex space-x-8 rtl:space-x-reverse",children:p.map(j=>e.jsx(W,{to:j.href,className:`px-3 py-2 text-sm font-medium transition-colors duration-200 ${x(j.href)?"text-primary-600 dark:text-primary-400 border-b-2 border-primary-600 dark:border-primary-400":"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"}`,children:j.name},j.name))}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsx(Zr,{}),e.jsx(ea,{}),r?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>y(!h),className:"flex items-center space-x-2 rtl:space-x-reverse p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center overflow-hidden",children:[o()?e.jsx("img",{src:i(),alt:"Photo de profil",className:"w-8 h-8 object-cover rounded-full",onError:j=>{j.target.style.display="none",j.target.nextElementSibling.style.display="flex"}}):null,e.jsx(me,{className:`w-4 h-4 text-primary-600 dark:text-primary-400 ${o()?"hidden":""}`})]}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a==null?void 0:a.first_name})]}),h&&e.jsx("div",{className:"absolute right-0 rtl:right-auto rtl:left-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 z-50",children:e.jsxs("div",{className:"py-1",children:[e.jsxs(W,{to:"/profile",onClick:()=>y(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(Ys,{className:"w-4 h-4 mr-3 rtl:mr-0 rtl:ml-3"}),s?"الملف الشخصي":"Profil"]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:()=>{n(),y(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(xs,{className:"w-4 h-4 mr-3 rtl:mr-0 rtl:ml-3"}),s?"تسجيل الخروج":"Déconnexion"]})})]})})]}):e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(L,{variant:"outline",asChild:!0,children:e.jsx(W,{to:"/login",children:s?"تسجيل الدخول":"Connexion"})}),e.jsx(L,{asChild:!0,children:e.jsx(W,{to:"/inscription",children:s?"سجل الآن":"S'inscrire"})})]})]}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:()=>u(!c),className:"p-2 rounded-md text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-100 dark:hover:bg-gray-800",children:c?e.jsx(Ht,{className:"w-6 h-6"}):e.jsx(ol,{className:"w-6 h-6"})})})]})}),c&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:[p.map(j=>e.jsx(W,{to:j.href,onClick:()=>u(!1),className:`block px-3 py-2 text-base font-medium transition-colors duration-200 rounded-lg ${x(j.href)?"text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20":"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:j.name},j.name)),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsx(Zr,{}),e.jsx(ea,{})]}),r?e.jsxs("div",{className:"px-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center overflow-hidden",children:[o()?e.jsx("img",{src:i(),alt:"Photo de profil",className:"w-10 h-10 object-cover rounded-full",onError:j=>{j.target.style.display="none",j.target.nextElementSibling.style.display="flex"}}):null,e.jsx(me,{className:`w-5 h-5 text-primary-600 dark:text-primary-400 ${o()?"hidden":""}`})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[a==null?void 0:a.first_name," ",a==null?void 0:a.last_name]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:(a==null?void 0:a.role)==="admin"?s?"مدير":"Admin":(a==null?void 0:a.role)==="staff"?s?"موظف":"Staff":s?"ولي أمر":"Parent"})]})]}),d&&e.jsxs(W,{to:"/mon-espace",onClick:()=>u(!1),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 mr-3 rtl:mr-0 rtl:ml-3"}),s?"مساحتي":"Mon espace"]}),l()&&e.jsxs(W,{to:"/dashboard",onClick:()=>u(!1),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[e.jsx(zc,{className:"w-4 h-4 mr-3 rtl:mr-0 rtl:ml-3"}),s?"لوحة التحكم":"Dashboard"]}),e.jsxs(W,{to:"/profile",onClick:()=>u(!1),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[e.jsx(Ys,{className:"w-4 h-4 mr-3 rtl:mr-0 rtl:ml-3"}),s?"الملف الشخصي":"Profil"]}),e.jsxs("button",{onClick:()=>{n(),u(!1)},className:"flex items-center w-full px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:[e.jsx(xs,{className:"w-4 h-4 mr-3 rtl:mr-0 rtl:ml-3"}),s?"تسجيل الخروج":"Déconnexion"]})]}):e.jsxs("div",{className:"px-3 space-y-2",children:[e.jsx(L,{variant:"outline",asChild:!0,className:"w-full",children:e.jsx(W,{to:"/login",onClick:()=>u(!1),children:s?"تسجيل الدخول":"Connexion"})}),e.jsx(L,{asChild:!0,className:"w-full",children:e.jsx(W,{to:"/inscription",onClick:()=>u(!1),children:s?"سجل الآن":"S'inscrire"})})]})]})]})})]})},Uu=()=>{const{isRTL:t}=te(),[s,r]=b.useState({}),[a,n]=b.useState(!0),[l,i]=b.useState(!1);b.useEffect(()=>{(async()=>{try{console.log("🏢 Footer: Chargement des paramètres crèche...");const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="192.168.1.60"?"http://localhost:3003":"https://creche-backend.onrender.com",h=await(await fetch(`${c}/api/contact`)).json();if(console.log("📋 Footer: Réponse API:",h),h&&h.success&&h.contact){const y=h.contact;r({nursery_name:{value:"Crèche Mima Elghalia",fr:"Crèche Mima Elghalia"},address:{value:y.address,fr:y.address},phone:{value:y.phone,fr:y.phone},email:{value:y.email,fr:y.email},hours_formatted:{value:y.hours,fr:y.hours}})}console.log("✅ Footer: Paramètres chargés")}catch{console.warn("⚠️ Footer: API non disponible, utilisation des données de fallback"),r({nursery_name:{value:t?"حضانة ميما الغالية":"Crèche Mima Elghalia"},nursery_description:{value:t?"بيئة آمنة ومحبة لنمو طفلك وتطوره":"Un environnement sûr et bienveillant pour l'épanouissement de votre enfant"},address:{value:t?"8 شارع بنزرت، مدنين 4100، تونس":"8 Rue Bizerte, Medenine 4100, Tunisie"},phone:{value:"+216 25 95 35 32"},email:{value:"contact@mimaelghalia.tn"},working_hours_weekdays:{value:'{"start": "07:00", "end": "18:00"}'},working_hours_saturday:{value:'{"start": "08:00", "end": "14:00"}'},saturday_open:{value:"true"},hours_formatted:{value:t?"الإثنين-الجمعة: 07:00-18:00 | السبت: 08:00-14:00":"Lun-Ven: 07:00-18:00 | Sam: 08:00-14:00"}})}finally{n(!1)}})()},[t]);const o=(m,c="")=>{var u;try{return((u=s[m])==null?void 0:u.value)||c}catch(h){return console.error("Erreur récupération setting:",m,h),c}},d=[{name:t?"الرئيسية":"Accueil",href:"/"},{name:t?"التسجيل":"Inscription",href:"/inscription"},{name:t?"اتصل بنا":"Contact",href:"/contact"},{name:t?"تسجيل الدخول":"Connexion",href:"/login"},{name:t?"جولة افتراضية":"Visite virtuelle",href:"/visite-virtuelle"}];return a?e.jsx("footer",{className:"bg-gray-900 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-48 mx-auto mb-4"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-32 mx-auto"})]})})})}):e.jsx("footer",{className:"bg-gray-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:o("nursery_name","Crèche Mima Elghalia")}),e.jsx("p",{className:"text-gray-300 mb-4",children:o("nursery_description","Un environnement sûr et bienveillant pour l'épanouissement de votre enfant")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t?"روابط سريعة":"Liens rapides"}),e.jsx("ul",{className:"space-y-3",children:d.map(m=>e.jsx("li",{children:e.jsx(W,{to:m.href,className:"text-gray-300 hover:text-white transition-colors duration-200",children:m.name})},m.href))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t?"معلومات الاتصال":"Contact"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx(Ft,{className:"w-4 h-4 text-primary-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-sm",children:o("address","8 Rue Bizerte, Medenine 4100, Tunisie")})]}),e.jsxs("li",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx(Re,{className:"w-4 h-4 text-primary-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-sm ltr",dir:"ltr",children:o("phone","+216 25 95 35 32")})]}),e.jsxs("li",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx(Ue,{className:"w-4 h-4 text-primary-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-sm",children:o("email","contact@mimaelghalia.tn")})]}),e.jsxs("li",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx(ae,{className:"w-4 h-4 text-primary-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-sm",children:o("hours_formatted",t?"الإثنين-الجمعة: 07:00-18:00":"Lun-Ven: 07:00-18:00")})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:t?`© ${new Date().getFullYear()} ${o("nursery_name","ميما الغالية")}. جميع الحقوق محفوظة.`:`© ${new Date().getFullYear()} ${o("nursery_name","Crèche Mima Elghalia")}. Tous droits réservés.`}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(W,{to:"/privacy",className:"text-gray-400 hover:text-white text-sm transition-colors duration-200",children:t?"سياسة الخصوصية":"Politique de confidentialité"}),e.jsx(W,{to:"/terms",className:"text-gray-400 hover:text-white text-sm transition-colors duration-200",children:t?"شروط الاستخدام":"Conditions d'utilisation"})]})})]})})]})})};let ta=class extends al.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){console.error("ErrorBoundary caught an error:",s,r)}render(){return this.state.hasError?e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsx("h3",{className:"text-red-800 dark:text-red-200 font-medium mb-2",children:"Une erreur s'est produite"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:this.props.fallbackMessage||"Veuillez rafraîchir la page ou réessayer plus tard."}),this.props.showRetry&&e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"mt-2 px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Réessayer"})]}):this.props.children}};const qu=()=>{const{t}=Wt(),{isRTL:s}=te();return e.jsxs("div",{className:`min-h-screen flex flex-col ${s?"font-arabic":"font-sans"}`,children:[e.jsx(Bu,{}),e.jsx("main",{className:"flex-1",children:e.jsx(ta,{children:e.jsx(nl,{})})}),e.jsx(ta,{children:e.jsx(Uu,{})})]})},Hu=()=>{const{user:t}=oe(),[s,r]=b.useState(!1),[a,n]=b.useState(0),[l,i]=b.useState(!0);return b.useEffect(()=>{(async()=>{if(!t){i(!1);return}try{const d=await B.get("/api/user/has-children");r(d.data.hasChildren),n(d.data.childrenCount)}catch(d){console.error("Erreur vérification enfants:",d)}finally{i(!1)}})()},[t]),{hasChildren:s,childrenCount:a,loading:l}},Gu=({isOpen:t,onClose:s})=>{const{user:r,isAdmin:a,isStaff:n}=oe(),{isRTL:l,currentLanguage:i}=te(),{hasChildren:o}=Hu(),d=Ns(),[m,c]=b.useState({}),u=x=>{c(j=>({...j,[x]:!j[x]}))},h=x=>d.pathname===x||d.pathname.startsWith(x+"/"),y=[{key:"dashboard",title:l?"الرئيسية":"Tableau de bord",icon:cl,path:"/dashboard",roles:["admin","staff"]},...o?[{key:"my-space",title:l?"مساحتي":"Mon Espace",icon:me,path:"/mon-espace",roles:["admin","staff","parent"]}]:[],{key:"children",title:l?"الأطفال":"Enfants",icon:le,roles:["admin","staff"],submenu:[{title:l?"قائمة الأطفال":"Liste des enfants",path:"/dashboard/children",roles:["admin","staff"]},{title:l?"إضافة طفل":"Ajouter un enfant",path:"/dashboard/children/add",roles:["admin"]}]},{key:"attendance",title:l?"الحضور":"Présences",icon:ae,roles:["admin","staff"],submenu:[{title:l?"اليوم":"Aujourd'hui",path:"/dashboard/attendance/today",roles:["admin","staff"]},{title:l?"التاريخ":"Historique",path:"/dashboard/attendance/history",roles:["admin","staff"]},{title:l?"الإحصائيات":"Statistiques",path:"/dashboard/attendance/stats",roles:["admin","staff"]}]},{key:"enrollments",title:l?"التسجيلات":"Inscriptions",icon:Ur,roles:["admin","staff"],submenu:[{title:l?"الطلبات المعلقة":"Demandes en attente",path:"/dashboard/pending-enrollments",roles:["admin","staff"]},{title:l?"جميع التسجيلات":"Toutes les inscriptions",path:"/dashboard/enrollments",roles:["admin","staff"]},{title:l?"الوثائق":"Documents",path:"/dashboard/documents",roles:["admin","staff"]}]},{key:"users",title:l?"المستخدمون":"Utilisateurs",icon:Be,roles:["admin"],submenu:[{title:l?"الأولياء":"Parents",path:"/dashboard/parents",roles:["admin"]},{title:l?"الموظفون":"Personnel",path:"/dashboard/staff",roles:["admin"]},{title:l?"إضافة مستخدم":"Ajouter utilisateur",path:"/dashboard/add-user",roles:["admin"]}]},{key:"reports",title:l?"التقارير":"Rapports",icon:ar,roles:["admin"],submenu:[{title:l?"إحصائيات عامة":"Statistiques générales",path:"/dashboard/general-stats",roles:["admin"]},{title:l?"تقرير الحضور":"Rapport présences",path:"/dashboard/attendance-report",roles:["admin"]}]},{key:"settings",title:l?"الإعدادات":"Paramètres",icon:Ys,path:"/dashboard/settings",roles:["admin"]}],f=x=>x.includes(r==null?void 0:r.role),p=({item:x,isSubmenu:j=!1})=>{const v=x.submenu&&x.submenu.length>0,k=m[x.key],N=h(x.path);return v?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>u(x.key),className:`w-full flex items-center justify-between px-4 py-3 text-sm font-medium rounded-lg transition-colors ${N?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(x.icon,{className:"w-5 h-5 mr-3 rtl:mr-0 rtl:ml-3"}),x.title]}),k?e.jsx(dl,{className:"w-4 h-4"}):e.jsx(Na,{className:"w-4 h-4"})]}),k&&e.jsx("div",{className:"ml-8 rtl:ml-0 rtl:mr-8 mt-2 space-y-1",children:x.submenu.filter(g=>f(g.roles)).map((g,_)=>e.jsx(W,{to:g.path,onClick:s,className:`block px-4 py-2 text-sm rounded-lg transition-colors ${h(g.path)?"bg-primary-50 dark:bg-primary-900/50 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:g.title},_))})]}):e.jsxs(W,{to:x.path,onClick:s,className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${N?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(x.icon,{className:"w-5 h-5 mr-3 rtl:mr-0 rtl:ml-3"}),x.title]})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`fixed inset-y-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-lg transform transition-transform duration-300 ease-in-out ${l?`right-0 ${t?"translate-x-0":"translate-x-full"} lg:translate-x-0`:`left-0 ${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`}`,style:{direction:l?"rtl":"ltr"},children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs(W,{to:"/dashboard",className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8",children:e.jsx(Bt,{src:"/images/logo.jpg",alt:"Mima Elghalia",fallback:Ct.logo,className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Mima Elghalia"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:l?"لوحة التحكم":"Dashboard"})]})]}),e.jsx("button",{onClick:s,className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Ht,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:y.filter(x=>f(x.roles)).map(x=>e.jsx(p,{item:x},x.key))}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:e.jsx(Ze,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:[r==null?void 0:r.first_name," ",r==null?void 0:r.last_name]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:l?(r==null?void 0:r.role)==="admin"?"مدير":"موظف":(r==null?void 0:r.role)==="admin"?"Admin":"Staff"})]})]})})]})})},Wu=()=>{const{user:t}=oe(),[s,r]=b.useState(0),[a,n]=b.useState([]),[l,i]=b.useState(!1),o=async()=>{var c;if(!t||t.role!=="admin"&&t.role!=="staff"){console.log("🚫 Chargement notifications ignoré - utilisateur non autorisé:",t==null?void 0:t.role);return}try{i(!0),console.log("📬 Chargement notifications pour:",t.email);const u=await B.get("/api/notifications");console.log("📨 Réponse notifications:",u.data),u.data.success?(n(u.data.notifications||[]),r(u.data.unread_count||0),console.log("✅ Notifications chargées:",((c=u.data.notifications)==null?void 0:c.length)||0)):console.log("⚠️ Réponse notifications non réussie:",u.data)}catch(u){console.error("❌ Erreur chargement notifications:",u),n([]),r(0)}finally{i(!1)}},d=async c=>{try{(await B.put(`/notifications/${c}/read`)).data.success&&(n(h=>h.map(y=>y.id===c?{...y,is_read:!0}:y)),r(h=>Math.max(0,h-1)))}catch(u){console.error("Erreur marquage notification:",u)}},m=async()=>{try{(await B.put("/api/notifications/read-all")).data.success&&(n(u=>u.map(h=>({...h,is_read:!0}))),r(0))}catch(c){console.error("Erreur marquage toutes notifications:",c)}};return b.useEffect(()=>{o()},[t]),b.useEffect(()=>{if(!t||t.role!=="admin"&&t.role!=="staff")return;const c=setInterval(()=>{o()},3e4);return()=>clearInterval(c)},[t]),{notifications:a,unreadCount:s,loading:l,loadNotifications:o,markAsRead:d,markAllAsRead:m}},Ma=b.createContext({});function La(t){const s=b.useRef(null);return s.current===null&&(s.current=t()),s.current}const $a=typeof window<"u",Xl=$a?b.useLayoutEffect:b.useEffect,gr=b.createContext(null);function Ia(t,s){t.indexOf(s)===-1&&t.push(s)}function Fa(t,s){const r=t.indexOf(s);r>-1&&t.splice(r,1)}const tt=(t,s,r)=>r>s?s:r<t?t:r;let Va=()=>{};const st={},Zl=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Ql(t){return typeof t=="object"&&t!==null}const eo=t=>/^0[^.\s]+$/u.test(t);function Oa(t){let s;return()=>(s===void 0&&(s=t()),s)}const Ve=t=>t,Ku=(t,s)=>r=>s(t(r)),As=(...t)=>t.reduce(Ku),fs=(t,s,r)=>{const a=s-t;return a===0?1:(r-t)/a};class za{constructor(){this.subscriptions=[]}add(s){return Ia(this.subscriptions,s),()=>Fa(this.subscriptions,s)}notify(s,r,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](s,r,a);else for(let l=0;l<n;l++){const i=this.subscriptions[l];i&&i(s,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ge=t=>t*1e3,Ie=t=>t/1e3;function to(t,s){return s?t*(1e3/s):0}const so=(t,s,r)=>(((1-3*r+3*s)*t+(3*r-6*s))*t+3*s)*t,Yu=1e-7,Ju=12;function Xu(t,s,r,a,n){let l,i,o=0;do i=s+(r-s)/2,l=so(i,a,n)-t,l>0?r=i:s=i;while(Math.abs(l)>Yu&&++o<Ju);return i}function Ts(t,s,r,a){if(t===s&&r===a)return Ve;const n=l=>Xu(l,0,1,t,r);return l=>l===0||l===1?l:so(n(l),s,a)}const ro=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,ao=t=>s=>1-t(1-s),no=Ts(.33,1.53,.69,.99),Ba=ao(no),io=ro(Ba),lo=t=>(t*=2)<1?.5*Ba(t):.5*(2-Math.pow(2,-10*(t-1))),Ua=t=>1-Math.sin(Math.acos(t)),oo=ao(Ua),co=ro(Ua),Zu=Ts(.42,0,1,1),Qu=Ts(0,0,.58,1),mo=Ts(.42,0,.58,1),eh=t=>Array.isArray(t)&&typeof t[0]!="number",uo=t=>Array.isArray(t)&&typeof t[0]=="number",th={linear:Ve,easeIn:Zu,easeInOut:mo,easeOut:Qu,circIn:Ua,circInOut:co,circOut:oo,backIn:Ba,backInOut:io,backOut:no,anticipate:lo},sh=t=>typeof t=="string",Bn=t=>{if(uo(t)){Va(t.length===4);const[s,r,a,n]=t;return Ts(s,r,a,n)}else if(sh(t))return th[t];return t},Ls=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function rh(t,s){let r=new Set,a=new Set,n=!1,l=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function d(c){i.has(c)&&(m.schedule(c),t()),c(o)}const m={schedule:(c,u=!1,h=!1)=>{const f=h&&n?r:a;return u&&i.add(c),f.has(c)||f.add(c),c},cancel:c=>{a.delete(c),i.delete(c)},process:c=>{if(o=c,n){l=!0;return}n=!0,[r,a]=[a,r],r.forEach(d),r.clear(),n=!1,l&&(l=!1,m.process(c))}};return m}const ah=40;function ho(t,s){let r=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},l=()=>r=!0,i=Ls.reduce((k,N)=>(k[N]=rh(l),k),{}),{setup:o,read:d,resolveKeyframes:m,preUpdate:c,update:u,preRender:h,render:y,postRender:f}=i,p=()=>{const k=st.useManualTiming?n.timestamp:performance.now();r=!1,st.useManualTiming||(n.delta=a?1e3/60:Math.max(Math.min(k-n.timestamp,ah),1)),n.timestamp=k,n.isProcessing=!0,o.process(n),d.process(n),m.process(n),c.process(n),u.process(n),h.process(n),y.process(n),f.process(n),n.isProcessing=!1,r&&s&&(a=!1,t(p))},x=()=>{r=!0,a=!0,n.isProcessing||t(p)};return{schedule:Ls.reduce((k,N)=>{const g=i[N];return k[N]=(_,w=!1,P=!1)=>(r||x(),g.schedule(_,w,P)),k},{}),cancel:k=>{for(let N=0;N<Ls.length;N++)i[Ls[N]].cancel(k)},state:n,steps:i}}const{schedule:ce,cancel:lt,state:ve,steps:_r}=ho(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ve,!0);let Hs;function nh(){Hs=void 0}const Ee={now:()=>(Hs===void 0&&Ee.set(ve.isProcessing||st.useManualTiming?ve.timestamp:performance.now()),Hs),set:t=>{Hs=t,queueMicrotask(nh)}},xo=t=>s=>typeof s=="string"&&s.startsWith(t),qa=xo("--"),ih=xo("var(--"),Ha=t=>ih(t)?lh.test(t.split("/*")[0].trim()):!1,lh=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xt={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ys={...Xt,transform:t=>tt(0,1,t)},$s={...Xt,default:1},os=t=>Math.round(t*1e5)/1e5,Ga=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oh(t){return t==null}const ch=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Wa=(t,s)=>r=>!!(typeof r=="string"&&ch.test(r)&&r.startsWith(t)||s&&!oh(r)&&Object.prototype.hasOwnProperty.call(r,s)),po=(t,s,r)=>a=>{if(typeof a!="string")return a;const[n,l,i,o]=a.match(Ga);return{[t]:parseFloat(n),[s]:parseFloat(l),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},dh=t=>tt(0,255,t),Sr={...Xt,transform:t=>Math.round(dh(t))},ft={test:Wa("rgb","red"),parse:po("red","green","blue"),transform:({red:t,green:s,blue:r,alpha:a=1})=>"rgba("+Sr.transform(t)+", "+Sr.transform(s)+", "+Sr.transform(r)+", "+os(ys.transform(a))+")"};function mh(t){let s="",r="",a="",n="";return t.length>5?(s=t.substring(1,3),r=t.substring(3,5),a=t.substring(5,7),n=t.substring(7,9)):(s=t.substring(1,2),r=t.substring(2,3),a=t.substring(3,4),n=t.substring(4,5),s+=s,r+=r,a+=a,n+=n),{red:parseInt(s,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const sa={test:Wa("#"),parse:mh,transform:ft.transform},Es=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),it=Es("deg"),We=Es("%"),G=Es("px"),uh=Es("vh"),hh=Es("vw"),Un={...We,parse:t=>We.parse(t)/100,transform:t=>We.transform(t*100)},Et={test:Wa("hsl","hue"),parse:po("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:r,alpha:a=1})=>"hsla("+Math.round(t)+", "+We.transform(os(s))+", "+We.transform(os(r))+", "+os(ys.transform(a))+")"},fe={test:t=>ft.test(t)||sa.test(t)||Et.test(t),parse:t=>ft.test(t)?ft.parse(t):Et.test(t)?Et.parse(t):sa.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ft.transform(t):Et.transform(t),getAnimatableNone:t=>{const s=fe.parse(t);return s.alpha=0,fe.transform(s)}},xh=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ph(t){var s,r;return isNaN(t)&&typeof t=="string"&&(((s=t.match(Ga))==null?void 0:s.length)||0)+(((r=t.match(xh))==null?void 0:r.length)||0)>0}const go="number",fo="color",gh="var",fh="var(",qn="${}",yh=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bs(t){const s=t.toString(),r=[],a={color:[],number:[],var:[]},n=[];let l=0;const o=s.replace(yh,d=>(fe.test(d)?(a.color.push(l),n.push(fo),r.push(fe.parse(d))):d.startsWith(fh)?(a.var.push(l),n.push(gh),r.push(d)):(a.number.push(l),n.push(go),r.push(parseFloat(d))),++l,qn)).split(qn);return{values:r,split:o,indexes:a,types:n}}function yo(t){return bs(t).values}function bo(t){const{split:s,types:r}=bs(t),a=s.length;return n=>{let l="";for(let i=0;i<a;i++)if(l+=s[i],n[i]!==void 0){const o=r[i];o===go?l+=os(n[i]):o===fo?l+=fe.transform(n[i]):l+=n[i]}return l}}const bh=t=>typeof t=="number"?0:fe.test(t)?fe.getAnimatableNone(t):t;function jh(t){const s=yo(t);return bo(t)(s.map(bh))}const ot={test:ph,parse:yo,createTransformer:bo,getAnimatableNone:jh};function Cr(t,s,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(s-t)*6*r:r<1/2?s:r<2/3?t+(s-t)*(2/3-r)*6:t}function vh({hue:t,saturation:s,lightness:r,alpha:a}){t/=360,s/=100,r/=100;let n=0,l=0,i=0;if(!s)n=l=i=r;else{const o=r<.5?r*(1+s):r+s-r*s,d=2*r-o;n=Cr(d,o,t+1/3),l=Cr(d,o,t),i=Cr(d,o,t-1/3)}return{red:Math.round(n*255),green:Math.round(l*255),blue:Math.round(i*255),alpha:a}}function Qs(t,s){return r=>r>0?s:t}const de=(t,s,r)=>t+(s-t)*r,Ar=(t,s,r)=>{const a=t*t,n=r*(s*s-a)+a;return n<0?0:Math.sqrt(n)},wh=[sa,ft,Et],Nh=t=>wh.find(s=>s.test(t));function Hn(t){const s=Nh(t);if(!s)return!1;let r=s.parse(t);return s===Et&&(r=vh(r)),r}const Gn=(t,s)=>{const r=Hn(t),a=Hn(s);if(!r||!a)return Qs(t,s);const n={...r};return l=>(n.red=Ar(r.red,a.red,l),n.green=Ar(r.green,a.green,l),n.blue=Ar(r.blue,a.blue,l),n.alpha=de(r.alpha,a.alpha,l),ft.transform(n))},ra=new Set(["none","hidden"]);function kh(t,s){return ra.has(t)?r=>r<=0?t:s:r=>r>=1?s:t}function _h(t,s){return r=>de(t,s,r)}function Ka(t){return typeof t=="number"?_h:typeof t=="string"?Ha(t)?Qs:fe.test(t)?Gn:Ah:Array.isArray(t)?jo:typeof t=="object"?fe.test(t)?Gn:Sh:Qs}function jo(t,s){const r=[...t],a=r.length,n=t.map((l,i)=>Ka(l)(l,s[i]));return l=>{for(let i=0;i<a;i++)r[i]=n[i](l);return r}}function Sh(t,s){const r={...t,...s},a={};for(const n in r)t[n]!==void 0&&s[n]!==void 0&&(a[n]=Ka(t[n])(t[n],s[n]));return n=>{for(const l in a)r[l]=a[l](n);return r}}function Ch(t,s){const r=[],a={color:0,var:0,number:0};for(let n=0;n<s.values.length;n++){const l=s.types[n],i=t.indexes[l][a[l]],o=t.values[i]??0;r[n]=o,a[l]++}return r}const Ah=(t,s)=>{const r=ot.createTransformer(s),a=bs(t),n=bs(s);return a.indexes.var.length===n.indexes.var.length&&a.indexes.color.length===n.indexes.color.length&&a.indexes.number.length>=n.indexes.number.length?ra.has(t)&&!n.values.length||ra.has(s)&&!a.values.length?kh(t,s):As(jo(Ch(a,n),n.values),r):Qs(t,s)};function vo(t,s,r){return typeof t=="number"&&typeof s=="number"&&typeof r=="number"?de(t,s,r):Ka(t)(t,s)}const Th=t=>{const s=({timestamp:r})=>t(r);return{start:(r=!0)=>ce.update(s,r),stop:()=>lt(s),now:()=>ve.isProcessing?ve.timestamp:Ee.now()}},wo=(t,s,r=10)=>{let a="";const n=Math.max(Math.round(s/r),2);for(let l=0;l<n;l++)a+=Math.round(t(l/(n-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},er=2e4;function Ya(t){let s=0;const r=50;let a=t.next(s);for(;!a.done&&s<er;)s+=r,a=t.next(s);return s>=er?1/0:s}function Eh(t,s=100,r){const a=r({...t,keyframes:[0,s]}),n=Math.min(Ya(a),er);return{type:"keyframes",ease:l=>a.next(n*l).value/s,duration:Ie(n)}}const Ph=5;function No(t,s,r){const a=Math.max(s-Ph,0);return to(r-t(a),s-a)}const he={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Tr=.001;function Dh({duration:t=he.duration,bounce:s=he.bounce,velocity:r=he.velocity,mass:a=he.mass}){let n,l,i=1-s;i=tt(he.minDamping,he.maxDamping,i),t=tt(he.minDuration,he.maxDuration,Ie(t)),i<1?(n=m=>{const c=m*i,u=c*t,h=c-r,y=aa(m,i),f=Math.exp(-u);return Tr-h/y*f},l=m=>{const u=m*i*t,h=u*r+r,y=Math.pow(i,2)*Math.pow(m,2)*t,f=Math.exp(-u),p=aa(Math.pow(m,2),i);return(-n(m)+Tr>0?-1:1)*((h-y)*f)/p}):(n=m=>{const c=Math.exp(-m*t),u=(m-r)*t+1;return-Tr+c*u},l=m=>{const c=Math.exp(-m*t),u=(r-m)*(t*t);return c*u});const o=5/t,d=Mh(n,l,o);if(t=Ge(t),isNaN(d))return{stiffness:he.stiffness,damping:he.damping,duration:t};{const m=Math.pow(d,2)*a;return{stiffness:m,damping:i*2*Math.sqrt(a*m),duration:t}}}const Rh=12;function Mh(t,s,r){let a=r;for(let n=1;n<Rh;n++)a=a-t(a)/s(a);return a}function aa(t,s){return t*Math.sqrt(1-s*s)}const Lh=["duration","bounce"],$h=["stiffness","damping","mass"];function Wn(t,s){return s.some(r=>t[r]!==void 0)}function Ih(t){let s={velocity:he.velocity,stiffness:he.stiffness,damping:he.damping,mass:he.mass,isResolvedFromDuration:!1,...t};if(!Wn(t,$h)&&Wn(t,Lh))if(t.visualDuration){const r=t.visualDuration,a=2*Math.PI/(r*1.2),n=a*a,l=2*tt(.05,1,1-(t.bounce||0))*Math.sqrt(n);s={...s,mass:he.mass,stiffness:n,damping:l}}else{const r=Dh(t);s={...s,...r,mass:he.mass},s.isResolvedFromDuration=!0}return s}function tr(t=he.visualDuration,s=he.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:a,restDelta:n}=r;const l=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:l},{stiffness:d,damping:m,mass:c,duration:u,velocity:h,isResolvedFromDuration:y}=Ih({...r,velocity:-Ie(r.velocity||0)}),f=h||0,p=m/(2*Math.sqrt(d*c)),x=i-l,j=Ie(Math.sqrt(d/c)),v=Math.abs(x)<5;a||(a=v?he.restSpeed.granular:he.restSpeed.default),n||(n=v?he.restDelta.granular:he.restDelta.default);let k;if(p<1){const g=aa(j,p);k=_=>{const w=Math.exp(-p*j*_);return i-w*((f+p*j*x)/g*Math.sin(g*_)+x*Math.cos(g*_))}}else if(p===1)k=g=>i-Math.exp(-j*g)*(x+(f+j*x)*g);else{const g=j*Math.sqrt(p*p-1);k=_=>{const w=Math.exp(-p*j*_),P=Math.min(g*_,300);return i-w*((f+p*j*x)*Math.sinh(P)+g*x*Math.cosh(P))/g}}const N={calculatedDuration:y&&u||null,next:g=>{const _=k(g);if(y)o.done=g>=u;else{let w=g===0?f:0;p<1&&(w=g===0?Ge(f):No(k,g,_));const P=Math.abs(w)<=a,D=Math.abs(i-_)<=n;o.done=P&&D}return o.value=o.done?i:_,o},toString:()=>{const g=Math.min(Ya(N),er),_=wo(w=>N.next(g*w).value,g,30);return g+"ms "+_},toTransition:()=>{}};return N}tr.applyToOptions=t=>{const s=Eh(t,100,tr);return t.ease=s.ease,t.duration=Ge(s.duration),t.type="keyframes",t};function na({keyframes:t,velocity:s=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:l=500,modifyTarget:i,min:o,max:d,restDelta:m=.5,restSpeed:c}){const u=t[0],h={done:!1,value:u},y=P=>o!==void 0&&P<o||d!==void 0&&P>d,f=P=>o===void 0?d:d===void 0||Math.abs(o-P)<Math.abs(d-P)?o:d;let p=r*s;const x=u+p,j=i===void 0?x:i(x);j!==x&&(p=j-u);const v=P=>-p*Math.exp(-P/a),k=P=>j+v(P),N=P=>{const D=v(P),C=k(P);h.done=Math.abs(D)<=m,h.value=h.done?j:C};let g,_;const w=P=>{y(h.value)&&(g=P,_=tr({keyframes:[h.value,f(h.value)],velocity:No(k,P,h.value),damping:n,stiffness:l,restDelta:m,restSpeed:c}))};return w(0),{calculatedDuration:null,next:P=>{let D=!1;return!_&&g===void 0&&(D=!0,N(P),w(P)),g!==void 0&&P>=g?_.next(P-g):(!D&&N(P),h)}}}function Fh(t,s,r){const a=[],n=r||st.mix||vo,l=t.length-1;for(let i=0;i<l;i++){let o=n(t[i],t[i+1]);if(s){const d=Array.isArray(s)?s[i]||Ve:s;o=As(d,o)}a.push(o)}return a}function Vh(t,s,{clamp:r=!0,ease:a,mixer:n}={}){const l=t.length;if(Va(l===s.length),l===1)return()=>s[0];if(l===2&&s[0]===s[1])return()=>s[1];const i=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),s=[...s].reverse());const o=Fh(s,a,n),d=o.length,m=c=>{if(i&&c<t[0])return s[0];let u=0;if(d>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=fs(t[u],t[u+1],c);return o[u](h)};return r?c=>m(tt(t[0],t[l-1],c)):m}function Oh(t,s){const r=t[t.length-1];for(let a=1;a<=s;a++){const n=fs(0,s,a);t.push(de(r,1,n))}}function zh(t){const s=[0];return Oh(s,t.length-1),s}function Bh(t,s){return t.map(r=>r*s)}function Uh(t,s){return t.map(()=>s||mo).splice(0,t.length-1)}function cs({duration:t=300,keyframes:s,times:r,ease:a="easeInOut"}){const n=eh(a)?a.map(Bn):Bn(a),l={done:!1,value:s[0]},i=Bh(r&&r.length===s.length?r:zh(s),t),o=Vh(i,s,{ease:Array.isArray(n)?n:Uh(s,n)});return{calculatedDuration:t,next:d=>(l.value=o(d),l.done=d>=t,l)}}const qh=t=>t!==null;function Ja(t,{repeat:s,repeatType:r="loop"},a,n=1){const l=t.filter(qh),o=n<0||s&&r!=="loop"&&s%2===1?0:l.length-1;return!o||a===void 0?l[o]:a}const Hh={decay:na,inertia:na,tween:cs,keyframes:cs,spring:tr};function ko(t){typeof t.type=="string"&&(t.type=Hh[t.type])}class Xa{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,r){return this.finished.then(s,r)}}const Gh=t=>t/100;class Za extends Xa{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,n;const{motionValue:r}=this.options;r&&r.updatedAt!==Ee.now()&&this.tick(Ee.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(a=this.options).onStop)==null||n.call(a))},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;ko(s);const{type:r=cs,repeat:a=0,repeatDelay:n=0,repeatType:l,velocity:i=0}=s;let{keyframes:o}=s;const d=r||cs;d!==cs&&typeof o[0]!="number"&&(this.mixKeyframes=As(Gh,vo(o[0],o[1])),o=[0,100]);const m=d({...s,keyframes:o});l==="mirror"&&(this.mirroredGenerator=d({...s,keyframes:[...o].reverse(),velocity:-i})),m.calculatedDuration===null&&(m.calculatedDuration=Ya(m));const{calculatedDuration:c}=m;this.calculatedDuration=c,this.resolvedDuration=c+n,this.totalDuration=this.resolvedDuration*(a+1)-n,this.generator=m}updateTime(s){const r=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(s,r=!1){const{generator:a,totalDuration:n,mixKeyframes:l,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:d}=this;if(this.startTime===null)return a.next(0);const{delay:m=0,keyframes:c,repeat:u,repeatType:h,repeatDelay:y,type:f,onUpdate:p,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-n/this.speed,this.startTime)),r?this.currentTime=s:this.updateTime(s);const j=this.currentTime-m*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?j<0:j>n;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let k=this.currentTime,N=a;if(u){const P=Math.min(this.currentTime,n)/o;let D=Math.floor(P),C=P%1;!C&&P>=1&&(C=1),C===1&&D--,D=Math.min(D,u+1),!!(D%2)&&(h==="reverse"?(C=1-C,y&&(C-=y/o)):h==="mirror"&&(N=i)),k=tt(0,1,C)*o}const g=v?{done:!1,value:c[0]}:N.next(k);l&&(g.value=l(g.value));let{done:_}=g;!v&&d!==null&&(_=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const w=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return w&&f!==na&&(g.value=Ja(c,this.options,x,this.speed)),p&&p(g.value),w&&this.finish(),g}then(s,r){return this.finished.then(s,r)}get duration(){return Ie(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Ie(s)}get time(){return Ie(this.currentTime)}set time(s){var r;s=Ge(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(Ee.now());const r=this.playbackSpeed!==s;this.playbackSpeed=s,r&&(this.time=Ie(this.currentTime))}play(){var n,l;if(this.isStopped)return;const{driver:s=Th,startTime:r}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),(l=(n=this.options).onPlay)==null||l.call(n);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ee.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var s,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(s=this.options).onComplete)==null||r.call(s)}cancel(){var s,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(s=this.options).onCancel)==null||r.call(s)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),s.observe(this)}}function Wh(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const yt=t=>t*180/Math.PI,ia=t=>{const s=yt(Math.atan2(t[1],t[0]));return la(s)},Kh={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ia,rotateZ:ia,skewX:t=>yt(Math.atan(t[1])),skewY:t=>yt(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},la=t=>(t=t%360,t<0&&(t+=360),t),Kn=ia,Yn=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Jn=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Yh={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Yn,scaleY:Jn,scale:t=>(Yn(t)+Jn(t))/2,rotateX:t=>la(yt(Math.atan2(t[6],t[5]))),rotateY:t=>la(yt(Math.atan2(-t[2],t[0]))),rotateZ:Kn,rotate:Kn,skewX:t=>yt(Math.atan(t[4])),skewY:t=>yt(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function oa(t){return t.includes("scale")?1:0}function ca(t,s){if(!t||t==="none")return oa(s);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,n;if(r)a=Yh,n=r;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=Kh,n=o}if(!n)return oa(s);const l=a[s],i=n[1].split(",").map(Xh);return typeof l=="function"?l(i):i[l]}const Jh=(t,s)=>{const{transform:r="none"}=getComputedStyle(t);return ca(r,s)};function Xh(t){return parseFloat(t.trim())}const Zt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qt=new Set(Zt),Xn=t=>t===Xt||t===G,Zh=new Set(["x","y","z"]),Qh=Zt.filter(t=>!Zh.has(t));function ex(t){const s=[];return Qh.forEach(r=>{const a=t.getValue(r);a!==void 0&&(s.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),s}const wt={width:({x:t},{paddingLeft:s="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),height:({y:t},{paddingTop:s="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>ca(s,"x"),y:(t,{transform:s})=>ca(s,"y")};wt.translateX=wt.x;wt.translateY=wt.y;const Nt=new Set;let da=!1,ma=!1,ua=!1;function _o(){if(ma){const t=Array.from(Nt).filter(a=>a.needsMeasurement),s=new Set(t.map(a=>a.element)),r=new Map;s.forEach(a=>{const n=ex(a);n.length&&(r.set(a,n),a.render())}),t.forEach(a=>a.measureInitialState()),s.forEach(a=>{a.render();const n=r.get(a);n&&n.forEach(([l,i])=>{var o;(o=a.getValue(l))==null||o.set(i)})}),t.forEach(a=>a.measureEndState()),t.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}ma=!1,da=!1,Nt.forEach(t=>t.complete(ua)),Nt.clear()}function So(){Nt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ma=!0)})}function tx(){ua=!0,So(),_o(),ua=!1}class Qa{constructor(s,r,a,n,l,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=r,this.name=a,this.motionValue=n,this.element=l,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(Nt.add(this),da||(da=!0,ce.read(So),ce.resolveKeyframes(_o))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:r,element:a,motionValue:n}=this;if(s[0]===null){const l=n==null?void 0:n.get(),i=s[s.length-1];if(l!==void 0)s[0]=l;else if(a&&r){const o=a.readValue(r,i);o!=null&&(s[0]=o)}s[0]===void 0&&(s[0]=i),n&&l===void 0&&n.set(s[0])}Wh(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),Nt.delete(this)}cancel(){this.state==="scheduled"&&(Nt.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sx=t=>t.startsWith("--");function rx(t,s,r){sx(s)?t.style.setProperty(s,r):t.style[s]=r}const ax=Oa(()=>window.ScrollTimeline!==void 0),nx={};function ix(t,s){const r=Oa(t);return()=>nx[s]??r()}const Co=ix(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),is=([t,s,r,a])=>`cubic-bezier(${t}, ${s}, ${r}, ${a})`,Zn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:is([0,.65,.55,1]),circOut:is([.55,0,1,.45]),backIn:is([.31,.01,.66,-.59]),backOut:is([.33,1.53,.69,.99])};function Ao(t,s){if(t)return typeof t=="function"?Co()?wo(t,s):"ease-out":uo(t)?is(t):Array.isArray(t)?t.map(r=>Ao(r,s)||Zn.easeOut):Zn[t]}function lx(t,s,r,{delay:a=0,duration:n=300,repeat:l=0,repeatType:i="loop",ease:o="easeOut",times:d}={},m=void 0){const c={[s]:r};d&&(c.offset=d);const u=Ao(o,n);Array.isArray(u)&&(c.easing=u);const h={delay:a,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:l+1,direction:i==="reverse"?"alternate":"normal"};return m&&(h.pseudoElement=m),t.animate(c,h)}function To(t){return typeof t=="function"&&"applyToOptions"in t}function ox({type:t,...s}){return To(t)&&Co()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class cx extends Xa{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:r,name:a,keyframes:n,pseudoElement:l,allowFlatten:i=!1,finalKeyframe:o,onComplete:d}=s;this.isPseudoElement=!!l,this.allowFlatten=i,this.options=s,Va(typeof s.type!="string");const m=ox(s);this.animation=lx(r,a,n,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const c=Ja(n,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):rx(r,a,c),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var s,r;(r=(s=this.animation).finish)==null||r.call(s)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,r;this.isPseudoElement||(r=(s=this.animation).commitStyles)==null||r.call(s)}get duration(){var r,a;const s=((a=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:a.call(r).duration)||0;return Ie(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Ie(s)}get time(){return Ie(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=Ge(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:r}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,s&&ax()?(this.animation.timeline=s,Ve):r(this)}}const Eo={anticipate:lo,backInOut:io,circInOut:co};function dx(t){return t in Eo}function mx(t){typeof t.ease=="string"&&dx(t.ease)&&(t.ease=Eo[t.ease])}const Qn=10;class ux extends cx{constructor(s){mx(s),ko(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:r,onUpdate:a,onComplete:n,element:l,...i}=this.options;if(!r)return;if(s!==void 0){r.set(s);return}const o=new Za({...i,autoplay:!1}),d=Ge(this.finishedTime??this.time);r.setWithVelocity(o.sample(d-Qn).value,o.sample(d).value,Qn),o.stop()}}const ei=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ot.test(t)||t==="0")&&!t.startsWith("url("));function hx(t){const s=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==s)return!0}function xx(t,s,r,a){const n=t[0];if(n===null)return!1;if(s==="display"||s==="visibility")return!0;const l=t[t.length-1],i=ei(n,s),o=ei(l,s);return!i||!o?!1:hx(t)||(r==="spring"||To(r))&&a}function ha(t){t.duration=0,t.type="keyframes"}const px=new Set(["opacity","clipPath","filter","transform"]),gx=Oa(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function fx(t){var c;const{motionValue:s,name:r,repeatDelay:a,repeatType:n,damping:l,type:i}=t;if(!(((c=s==null?void 0:s.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=s.owner.getProps();return gx()&&r&&px.has(r)&&(r!=="transform"||!m)&&!d&&!a&&n!=="mirror"&&l!==0&&i!=="inertia"}const yx=40;class bx extends Xa{constructor({autoplay:s=!0,delay:r=0,type:a="keyframes",repeat:n=0,repeatDelay:l=0,repeatType:i="loop",keyframes:o,name:d,motionValue:m,element:c,...u}){var f;super(),this.stop=()=>{var p,x;this._animation&&(this._animation.stop(),(p=this.stopTimeline)==null||p.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Ee.now();const h={autoplay:s,delay:r,type:a,repeat:n,repeatDelay:l,repeatType:i,name:d,motionValue:m,element:c,...u},y=(c==null?void 0:c.KeyframeResolver)||Qa;this.keyframeResolver=new y(o,(p,x,j)=>this.onKeyframesResolved(p,x,h,!j),d,m,c),(f=this.keyframeResolver)==null||f.scheduleResolve()}onKeyframesResolved(s,r,a,n){this.keyframeResolver=void 0;const{name:l,type:i,velocity:o,delay:d,isHandoff:m,onUpdate:c}=a;this.resolvedAt=Ee.now(),xx(s,l,i,o)||((st.instantAnimations||!d)&&(c==null||c(Ja(s,a,r))),s[0]=s[s.length-1],ha(a),a.repeat=0);const h={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>yx?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:s},y=!m&&fx(h)?new ux({...h,element:h.motionValue.owner.current}):new Za(h);y.finished.then(()=>this.notifyFinished()).catch(Ve),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(s,r){return this.finished.finally(s).then(()=>{})}get animation(){var s;return this._animation||((s=this.keyframeResolver)==null||s.resume(),tx()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var s;this._animation&&this.animation.cancel(),(s=this.keyframeResolver)==null||s.cancel()}}const jx=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vx(t){const s=jx.exec(t);if(!s)return[,];const[,r,a,n]=s;return[`--${r??a}`,n]}function Po(t,s,r=1){const[a,n]=vx(t);if(!a)return;const l=window.getComputedStyle(s).getPropertyValue(a);if(l){const i=l.trim();return Zl(i)?parseFloat(i):i}return Ha(n)?Po(n,s,r+1):n}function en(t,s){return(t==null?void 0:t[s])??(t==null?void 0:t.default)??t}const Do=new Set(["width","height","top","left","right","bottom",...Zt]),wx={test:t=>t==="auto",parse:t=>t},Ro=t=>s=>s.test(t),Mo=[Xt,G,We,it,hh,uh,wx],ti=t=>Mo.find(Ro(t));function Nx(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||eo(t):!0}const kx=new Set(["brightness","contrast","saturate","opacity"]);function _x(t){const[s,r]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[a]=r.match(Ga)||[];if(!a)return t;const n=r.replace(a,"");let l=kx.has(s)?1:0;return a!==r&&(l*=100),s+"("+l+n+")"}const Sx=/\b([a-z-]*)\(.*?\)/gu,xa={...ot,getAnimatableNone:t=>{const s=t.match(Sx);return s?s.map(_x).join(" "):t}},si={...Xt,transform:Math.round},Cx={rotate:it,rotateX:it,rotateY:it,rotateZ:it,scale:$s,scaleX:$s,scaleY:$s,scaleZ:$s,skew:it,skewX:it,skewY:it,distance:G,translateX:G,translateY:G,translateZ:G,x:G,y:G,z:G,perspective:G,transformPerspective:G,opacity:ys,originX:Un,originY:Un,originZ:G},tn={borderWidth:G,borderTopWidth:G,borderRightWidth:G,borderBottomWidth:G,borderLeftWidth:G,borderRadius:G,radius:G,borderTopLeftRadius:G,borderTopRightRadius:G,borderBottomRightRadius:G,borderBottomLeftRadius:G,width:G,maxWidth:G,height:G,maxHeight:G,top:G,right:G,bottom:G,left:G,padding:G,paddingTop:G,paddingRight:G,paddingBottom:G,paddingLeft:G,margin:G,marginTop:G,marginRight:G,marginBottom:G,marginLeft:G,backgroundPositionX:G,backgroundPositionY:G,...Cx,zIndex:si,fillOpacity:ys,strokeOpacity:ys,numOctaves:si},Ax={...tn,color:fe,backgroundColor:fe,outlineColor:fe,fill:fe,stroke:fe,borderColor:fe,borderTopColor:fe,borderRightColor:fe,borderBottomColor:fe,borderLeftColor:fe,filter:xa,WebkitFilter:xa},Lo=t=>Ax[t];function $o(t,s){let r=Lo(t);return r!==xa&&(r=ot),r.getAnimatableNone?r.getAnimatableNone(s):void 0}const Tx=new Set(["auto","none","0"]);function Ex(t,s,r){let a=0,n;for(;a<t.length&&!n;){const l=t[a];typeof l=="string"&&!Tx.has(l)&&bs(l).values.length&&(n=t[a]),a++}if(n&&r)for(const l of s)t[l]=$o(r,n)}class Px extends Qa{constructor(s,r,a,n,l){super(s,r,a,n,l,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<s.length;d++){let m=s[d];if(typeof m=="string"&&(m=m.trim(),Ha(m))){const c=Po(m,r.current);c!==void 0&&(s[d]=c),d===s.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!Do.has(a)||s.length!==2)return;const[n,l]=s,i=ti(n),o=ti(l);if(i!==o)if(Xn(i)&&Xn(o))for(let d=0;d<s.length;d++){const m=s[d];typeof m=="string"&&(s[d]=parseFloat(m))}else wt[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:r}=this,a=[];for(let n=0;n<s.length;n++)(s[n]===null||Nx(s[n]))&&a.push(n);a.length&&Ex(s,a,r)}measureInitialState(){const{element:s,unresolvedKeyframes:r,name:a}=this;if(!s||!s.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wt[a](s.measureViewportBox(),window.getComputedStyle(s.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&s.getValue(a,n).jump(n,!1)}measureEndState(){var o;const{element:s,name:r,unresolvedKeyframes:a}=this;if(!s||!s.current)return;const n=s.getValue(r);n&&n.jump(this.measuredOrigin,!1);const l=a.length-1,i=a[l];a[l]=wt[r](s.measureViewportBox(),window.getComputedStyle(s.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([d,m])=>{s.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function Dx(t,s,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let a=document;const n=(r==null?void 0:r[t])??a.querySelectorAll(t);return n?Array.from(n):[]}return Array.from(t)}const Io=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function Fo(t){return Ql(t)&&"offsetHeight"in t}const ri=30,Rx=t=>!isNaN(parseFloat(t));class Mx{constructor(s,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{var l;const n=Ee.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=r.owner}setCurrent(s){this.current=s,this.updatedAt=Ee.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=Rx(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,r){this.events[s]||(this.events[s]=new za);const a=this.events[s].add(r);return s==="change"?()=>{a(),ce.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,r){this.passiveEffect=s,this.stopPassiveEffect=r}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-a}jump(s,r=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var s;(s=this.events.change)==null||s.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Ee.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>ri)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,ri);return to(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(s){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=s(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var s,r;(s=this.dependents)==null||s.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ut(t,s){return new Mx(t,s)}const{schedule:sn}=ho(queueMicrotask,!1),ze={x:!1,y:!1};function Vo(){return ze.x||ze.y}function Lx(t){return t==="x"||t==="y"?ze[t]?null:(ze[t]=!0,()=>{ze[t]=!1}):ze.x||ze.y?null:(ze.x=ze.y=!0,()=>{ze.x=ze.y=!1})}function Oo(t,s){const r=Dx(t),a=new AbortController,n={passive:!0,...s,signal:a.signal};return[r,n,()=>a.abort()]}function ai(t){return!(t.pointerType==="touch"||Vo())}function $x(t,s,r={}){const[a,n,l]=Oo(t,r),i=o=>{if(!ai(o))return;const{target:d}=o,m=s(d,o);if(typeof m!="function"||!d)return;const c=u=>{ai(u)&&(m(u),d.removeEventListener("pointerleave",c))};d.addEventListener("pointerleave",c,n)};return a.forEach(o=>{o.addEventListener("pointerenter",i,n)}),l}const zo=(t,s)=>s?t===s?!0:zo(t,s.parentElement):!1,rn=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Ix=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Fx(t){return Ix.has(t.tagName)||t.tabIndex!==-1}const Gs=new WeakSet;function ni(t){return s=>{s.key==="Enter"&&t(s)}}function Er(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const Vx=(t,s)=>{const r=t.currentTarget;if(!r)return;const a=ni(()=>{if(Gs.has(r))return;Er(r,"down");const n=ni(()=>{Er(r,"up")}),l=()=>Er(r,"cancel");r.addEventListener("keyup",n,s),r.addEventListener("blur",l,s)});r.addEventListener("keydown",a,s),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),s)};function ii(t){return rn(t)&&!Vo()}function Ox(t,s,r={}){const[a,n,l]=Oo(t,r),i=o=>{const d=o.currentTarget;if(!ii(o))return;Gs.add(d);const m=s(d,o),c=(y,f)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",h),Gs.has(d)&&Gs.delete(d),ii(y)&&typeof m=="function"&&m(y,{success:f})},u=y=>{c(y,d===window||d===document||r.useGlobalTarget||zo(d,y.target))},h=y=>{c(y,!1)};window.addEventListener("pointerup",u,n),window.addEventListener("pointercancel",h,n)};return a.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,n),Fo(o)&&(o.addEventListener("focus",m=>Vx(m,n)),!Fx(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),l}function Bo(t){return Ql(t)&&"ownerSVGElement"in t}function zx(t){return Bo(t)&&t.tagName==="svg"}const _e=t=>!!(t&&t.getVelocity),Bx=[...Mo,fe,ot],Ux=t=>Bx.find(Ro(t)),an=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function li(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function qx(...t){return s=>{let r=!1;const a=t.map(n=>{const l=li(n,s);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let n=0;n<a.length;n++){const l=a[n];typeof l=="function"?l():li(t[n],null)}}}}function Hx(...t){return b.useCallback(qx(...t),t)}class Gx extends b.Component{getSnapshotBeforeUpdate(s){const r=this.props.childRef.current;if(r&&s.isPresent&&!this.props.isPresent){const a=r.offsetParent,n=Fo(a)&&a.offsetWidth||0,l=this.props.sizeRef.current;l.height=r.offsetHeight||0,l.width=r.offsetWidth||0,l.top=r.offsetTop,l.left=r.offsetLeft,l.right=n-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Wx({children:t,isPresent:s,anchorX:r,root:a}){const n=b.useId(),l=b.useRef(null),i=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=b.useContext(an),d=Hx(l,t==null?void 0:t.ref);return b.useInsertionEffect(()=>{const{width:m,height:c,top:u,left:h,right:y}=i.current;if(s||!l.current||!m||!c)return;const f=r==="left"?`left: ${h}`:`right: ${y}`;l.current.dataset.motionPopId=n;const p=document.createElement("style");o&&(p.nonce=o);const x=a??document.head;return x.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${c}px !important;
            ${f}px !important;
            top: ${u}px !important;
          }
        `),()=>{x.contains(p)&&x.removeChild(p)}},[s]),e.jsx(Gx,{isPresent:s,childRef:l,sizeRef:i,children:b.cloneElement(t,{ref:d})})}const Kx=({children:t,initial:s,isPresent:r,onExitComplete:a,custom:n,presenceAffectsLayout:l,mode:i,anchorX:o,root:d})=>{const m=La(Yx),c=b.useId();let u=!0,h=b.useMemo(()=>(u=!1,{id:c,initial:s,isPresent:r,custom:n,onExitComplete:y=>{m.set(y,!0);for(const f of m.values())if(!f)return;a&&a()},register:y=>(m.set(y,!1),()=>m.delete(y))}),[r,m,a]);return l&&u&&(h={...h}),b.useMemo(()=>{m.forEach((y,f)=>m.set(f,!1))},[r]),b.useEffect(()=>{!r&&!m.size&&a&&a()},[r]),i==="popLayout"&&(t=e.jsx(Wx,{isPresent:r,anchorX:o,root:d,children:t})),e.jsx(gr.Provider,{value:h,children:t})};function Yx(){return new Map}function Uo(t=!0){const s=b.useContext(gr);if(s===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:n}=s,l=b.useId();b.useEffect(()=>{if(t)return n(l)},[t]);const i=b.useCallback(()=>t&&a&&a(l),[l,a,t]);return!r&&a?[!1,i]:[!0]}const Is=t=>t.key||"";function oi(t){const s=[];return b.Children.forEach(t,r=>{b.isValidElement(r)&&s.push(r)}),s}const qo=({children:t,custom:s,initial:r=!0,onExitComplete:a,presenceAffectsLayout:n=!0,mode:l="sync",propagate:i=!1,anchorX:o="left",root:d})=>{const[m,c]=Uo(i),u=b.useMemo(()=>oi(t),[t]),h=i&&!m?[]:u.map(Is),y=b.useRef(!0),f=b.useRef(u),p=La(()=>new Map),[x,j]=b.useState(u),[v,k]=b.useState(u);Xl(()=>{y.current=!1,f.current=u;for(let _=0;_<v.length;_++){const w=Is(v[_]);h.includes(w)?p.delete(w):p.get(w)!==!0&&p.set(w,!1)}},[v,h.length,h.join("-")]);const N=[];if(u!==x){let _=[...u];for(let w=0;w<v.length;w++){const P=v[w],D=Is(P);h.includes(D)||(_.splice(w,0,P),N.push(P))}return l==="wait"&&N.length&&(_=N),k(oi(_)),j(u),null}const{forceRender:g}=b.useContext(Ma);return e.jsx(e.Fragment,{children:v.map(_=>{const w=Is(_),P=i&&!m?!1:u===v||h.includes(w),D=()=>{if(p.has(w))p.set(w,!0);else return;let C=!0;p.forEach(S=>{S||(C=!1)}),C&&(g==null||g(),k(f.current),i&&(c==null||c()),a&&a())};return e.jsx(Kx,{isPresent:P,initial:!y.current||r?void 0:!1,custom:s,presenceAffectsLayout:n,mode:l,root:d,onExitComplete:P?void 0:D,anchorX:o,children:_},w)})})},Ho=b.createContext({strict:!1}),ci={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qt={};for(const t in ci)qt[t]={isEnabled:s=>ci[t].some(r=>!!s[r])};function Jx(t){for(const s in t)qt[s]={...qt[s],...t[s]}}const Xx=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sr(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Xx.has(t)}let Go=t=>!sr(t);function Zx(t){typeof t=="function"&&(Go=s=>s.startsWith("on")?!sr(s):t(s))}try{Zx(require("@emotion/is-prop-valid").default)}catch{}function Qx(t,s,r){const a={};for(const n in t)n==="values"&&typeof t.values=="object"||(Go(n)||r===!0&&sr(n)||!s&&!sr(n)||t.draggable&&n.startsWith("onDrag"))&&(a[n]=t[n]);return a}const fr=b.createContext({});function yr(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function js(t){return typeof t=="string"||Array.isArray(t)}const nn=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ln=["initial",...nn];function br(t){return yr(t.animate)||ln.some(s=>js(t[s]))}function Wo(t){return!!(br(t)||t.variants)}function e0(t,s){if(br(t)){const{initial:r,animate:a}=t;return{initial:r===!1||js(r)?r:void 0,animate:js(a)?a:void 0}}return t.inherit!==!1?s:{}}function t0(t){const{initial:s,animate:r}=e0(t,b.useContext(fr));return b.useMemo(()=>({initial:s,animate:r}),[di(s),di(r)])}function di(t){return Array.isArray(t)?t.join(" "):t}const vs={};function s0(t){for(const s in t)vs[s]=t[s],qa(s)&&(vs[s].isCSSVariable=!0)}function Ko(t,{layout:s,layoutId:r}){return Qt.has(t)||t.startsWith("origin")||(s||r!==void 0)&&(!!vs[t]||t==="opacity")}const r0={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},a0=Zt.length;function n0(t,s,r){let a="",n=!0;for(let l=0;l<a0;l++){const i=Zt[l],o=t[i];if(o===void 0)continue;let d=!0;if(typeof o=="number"?d=o===(i.startsWith("scale")?1:0):d=parseFloat(o)===0,!d||r){const m=Io(o,tn[i]);if(!d){n=!1;const c=r0[i]||i;a+=`${c}(${m}) `}r&&(s[i]=m)}}return a=a.trim(),r?a=r(s,n?"":a):n&&(a="none"),a}function on(t,s,r){const{style:a,vars:n,transformOrigin:l}=t;let i=!1,o=!1;for(const d in s){const m=s[d];if(Qt.has(d)){i=!0;continue}else if(qa(d)){n[d]=m;continue}else{const c=Io(m,tn[d]);d.startsWith("origin")?(o=!0,l[d]=c):a[d]=c}}if(s.transform||(i||r?a.transform=n0(s,t.transform,r):a.transform&&(a.transform="none")),o){const{originX:d="50%",originY:m="50%",originZ:c=0}=l;a.transformOrigin=`${d} ${m} ${c}`}}const cn=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Yo(t,s,r){for(const a in s)!_e(s[a])&&!Ko(a,r)&&(t[a]=s[a])}function i0({transformTemplate:t},s){return b.useMemo(()=>{const r=cn();return on(r,s,t),Object.assign({},r.vars,r.style)},[s])}function l0(t,s){const r=t.style||{},a={};return Yo(a,r,t),Object.assign(a,i0(t,s)),a}function o0(t,s){const r={},a=l0(t,s);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=a,r}const c0={offset:"stroke-dashoffset",array:"stroke-dasharray"},d0={offset:"strokeDashoffset",array:"strokeDasharray"};function m0(t,s,r=1,a=0,n=!0){t.pathLength=1;const l=n?c0:d0;t[l.offset]=G.transform(-a);const i=G.transform(s),o=G.transform(r);t[l.array]=`${i} ${o}`}function Jo(t,{attrX:s,attrY:r,attrScale:a,pathLength:n,pathSpacing:l=1,pathOffset:i=0,...o},d,m,c){if(on(t,o,m),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:u,style:h}=t;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete u.transformBox),s!==void 0&&(u.x=s),r!==void 0&&(u.y=r),a!==void 0&&(u.scale=a),n!==void 0&&m0(u,n,l,i,!1)}const Xo=()=>({...cn(),attrs:{}}),Zo=t=>typeof t=="string"&&t.toLowerCase()==="svg";function u0(t,s,r,a){const n=b.useMemo(()=>{const l=Xo();return Jo(l,s,Zo(a),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[s]);if(t.style){const l={};Yo(l,t.style,t),n.style={...l,...n.style}}return n}const h0=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dn(t){return typeof t!="string"||t.includes("-")?!1:!!(h0.indexOf(t)>-1||/[A-Z]/u.test(t))}function x0(t,s,r,{latestValues:a},n,l=!1){const o=(dn(t)?u0:o0)(s,a,n,t),d=Qx(s,typeof t=="string",l),m=t!==b.Fragment?{...d,...o,ref:r}:{},{children:c}=s,u=b.useMemo(()=>_e(c)?c.get():c,[c]);return b.createElement(t,{...m,children:u})}function mi(t){const s=[{},{}];return t==null||t.values.forEach((r,a)=>{s[0][a]=r.get(),s[1][a]=r.getVelocity()}),s}function mn(t,s,r,a){if(typeof s=="function"){const[n,l]=mi(a);s=s(r!==void 0?r:t.custom,n,l)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[n,l]=mi(a);s=s(r!==void 0?r:t.custom,n,l)}return s}function Ws(t){return _e(t)?t.get():t}function p0({scrapeMotionValuesFromProps:t,createRenderState:s},r,a,n){return{latestValues:g0(r,a,n,t),renderState:s()}}function g0(t,s,r,a){const n={},l=a(t,{});for(const h in l)n[h]=Ws(l[h]);let{initial:i,animate:o}=t;const d=br(t),m=Wo(t);s&&m&&!d&&t.inherit!==!1&&(i===void 0&&(i=s.initial),o===void 0&&(o=s.animate));let c=r?r.initial===!1:!1;c=c||i===!1;const u=c?o:i;if(u&&typeof u!="boolean"&&!yr(u)){const h=Array.isArray(u)?u:[u];for(let y=0;y<h.length;y++){const f=mn(t,h[y]);if(f){const{transitionEnd:p,transition:x,...j}=f;for(const v in j){let k=j[v];if(Array.isArray(k)){const N=c?k.length-1:0;k=k[N]}k!==null&&(n[v]=k)}for(const v in p)n[v]=p[v]}}}return n}const Qo=t=>(s,r)=>{const a=b.useContext(fr),n=b.useContext(gr),l=()=>p0(t,s,a,n);return r?l():La(l)};function un(t,s,r){var l;const{style:a}=t,n={};for(const i in a)(_e(a[i])||s.style&&_e(s.style[i])||Ko(i,t)||((l=r==null?void 0:r.getValue(i))==null?void 0:l.liveStyle)!==void 0)&&(n[i]=a[i]);return n}const f0=Qo({scrapeMotionValuesFromProps:un,createRenderState:cn});function ec(t,s,r){const a=un(t,s,r);for(const n in t)if(_e(t[n])||_e(s[n])){const l=Zt.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;a[l]=t[n]}return a}const y0=Qo({scrapeMotionValuesFromProps:ec,createRenderState:Xo}),b0=Symbol.for("motionComponentSymbol");function Pt(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function j0(t,s,r){return b.useCallback(a=>{a&&t.onMount&&t.onMount(a),s&&(a?s.mount(a):s.unmount()),r&&(typeof r=="function"?r(a):Pt(r)&&(r.current=a))},[s])}const hn=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),v0="framerAppearId",tc="data-"+hn(v0),sc=b.createContext({});function w0(t,s,r,a,n){var p,x;const{visualElement:l}=b.useContext(fr),i=b.useContext(Ho),o=b.useContext(gr),d=b.useContext(an).reducedMotion,m=b.useRef(null);a=a||i.renderer,!m.current&&a&&(m.current=a(t,{visualState:s,parent:l,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:d}));const c=m.current,u=b.useContext(sc);c&&!c.projection&&n&&(c.type==="html"||c.type==="svg")&&N0(m.current,r,n,u);const h=b.useRef(!1);b.useInsertionEffect(()=>{c&&h.current&&c.update(r,o)});const y=r[tc],f=b.useRef(!!y&&!((p=window.MotionHandoffIsComplete)!=null&&p.call(window,y))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,y)));return Xl(()=>{c&&(h.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),f.current&&c.animationState&&c.animationState.animateChanges())}),b.useEffect(()=>{c&&(!f.current&&c.animationState&&c.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,y)}),f.current=!1),c.enteringChildren=void 0)}),c}function N0(t,s,r,a){const{layoutId:n,layout:l,drag:i,dragConstraints:o,layoutScroll:d,layoutRoot:m,layoutCrossfade:c}=s;t.projection=new r(t.latestValues,s["data-framer-portal-id"]?void 0:rc(t.parent)),t.projection.setOptions({layoutId:n,layout:l,alwaysMeasureLayout:!!i||o&&Pt(o),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:a,crossfade:c,layoutScroll:d,layoutRoot:m})}function rc(t){if(t)return t.options.allowProjection!==!1?t.projection:rc(t.parent)}function Pr(t,{forwardMotionProps:s=!1}={},r,a){r&&Jx(r);const n=dn(t)?y0:f0;function l(o,d){let m;const c={...b.useContext(an),...o,layoutId:k0(o)},{isStatic:u}=c,h=t0(o),y=n(o,u);if(!u&&$a){_0();const f=S0(c);m=f.MeasureLayout,h.visualElement=w0(t,y,c,a,f.ProjectionNode)}return e.jsxs(fr.Provider,{value:h,children:[m&&h.visualElement?e.jsx(m,{visualElement:h.visualElement,...c}):null,x0(t,o,j0(y,h.visualElement,d),y,u,s)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const i=b.forwardRef(l);return i[b0]=t,i}function k0({layoutId:t}){const s=b.useContext(Ma).id;return s&&t!==void 0?s+"-"+t:t}function _0(t,s){b.useContext(Ho).strict}function S0(t){const{drag:s,layout:r}=qt;if(!s&&!r)return{};const a={...s,...r};return{MeasureLayout:s!=null&&s.isEnabled(t)||r!=null&&r.isEnabled(t)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function C0(t,s){if(typeof Proxy>"u")return Pr;const r=new Map,a=(l,i)=>Pr(l,i,t,s),n=(l,i)=>a(l,i);return new Proxy(n,{get:(l,i)=>i==="create"?a:(r.has(i)||r.set(i,Pr(i,void 0,t,s)),r.get(i))})}function ac({top:t,left:s,right:r,bottom:a}){return{x:{min:s,max:r},y:{min:t,max:a}}}function A0({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function T0(t,s){if(!s)return t;const r=s({x:t.left,y:t.top}),a=s({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function Dr(t){return t===void 0||t===1}function pa({scale:t,scaleX:s,scaleY:r}){return!Dr(t)||!Dr(s)||!Dr(r)}function pt(t){return pa(t)||nc(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function nc(t){return ui(t.x)||ui(t.y)}function ui(t){return t&&t!=="0%"}function rr(t,s,r){const a=t-r,n=s*a;return r+n}function hi(t,s,r,a,n){return n!==void 0&&(t=rr(t,n,a)),rr(t,r,a)+s}function ga(t,s=0,r=1,a,n){t.min=hi(t.min,s,r,a,n),t.max=hi(t.max,s,r,a,n)}function ic(t,{x:s,y:r}){ga(t.x,s.translate,s.scale,s.originPoint),ga(t.y,r.translate,r.scale,r.originPoint)}const xi=.999999999999,pi=1.0000000000001;function E0(t,s,r,a=!1){const n=r.length;if(!n)return;s.x=s.y=1;let l,i;for(let o=0;o<n;o++){l=r[o],i=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(a&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Rt(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),i&&(s.x*=i.x.scale,s.y*=i.y.scale,ic(t,i)),a&&pt(l.latestValues)&&Rt(t,l.latestValues))}s.x<pi&&s.x>xi&&(s.x=1),s.y<pi&&s.y>xi&&(s.y=1)}function Dt(t,s){t.min=t.min+s,t.max=t.max+s}function gi(t,s,r,a,n=.5){const l=de(t.min,t.max,n);ga(t,s,r,l,a)}function Rt(t,s){gi(t.x,s.x,s.scaleX,s.scale,s.originX),gi(t.y,s.y,s.scaleY,s.scale,s.originY)}function lc(t,s){return ac(T0(t.getBoundingClientRect(),s))}function P0(t,s,r){const a=lc(t,r),{scroll:n}=s;return n&&(Dt(a.x,n.offset.x),Dt(a.y,n.offset.y)),a}const fi=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mt=()=>({x:fi(),y:fi()}),yi=()=>({min:0,max:0}),ge=()=>({x:yi(),y:yi()}),fa={current:null},oc={current:!1};function D0(){if(oc.current=!0,!!$a)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>fa.current=t.matches;t.addEventListener("change",s),s()}else fa.current=!1}const R0=new WeakMap;function M0(t,s,r){for(const a in s){const n=s[a],l=r[a];if(_e(n))t.addValue(a,n);else if(_e(l))t.addValue(a,Ut(n,{owner:t}));else if(l!==n)if(t.hasValue(a)){const i=t.getValue(a);i.liveStyle===!0?i.jump(n):i.hasAnimated||i.set(n)}else{const i=t.getStaticValue(a);t.addValue(a,Ut(i!==void 0?i:n,{owner:t}))}}for(const a in r)s[a]===void 0&&t.removeValue(a);return s}const bi=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class L0{scrapeMotionValuesFromProps(s,r,a){return{}}constructor({parent:s,props:r,presenceContext:a,reducedMotionConfig:n,blockInitialAnimation:l,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qa,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Ee.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,ce.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=i;this.latestValues=d,this.baseTarget={...d},this.initialValues=r.initial?{...d}:{},this.renderState=m,this.parent=s,this.props=r,this.presenceContext=a,this.depth=s?s.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.blockInitialAnimation=!!l,this.isControllingVariants=br(r),this.isVariantNode=Wo(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in u){const y=u[h];d[h]!==void 0&&_e(y)&&y.set(d[h])}}mount(s){var r;this.current=s,R0.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,n)=>this.bindToMotionValue(n,a)),oc.current||D0(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fa.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var s;this.projection&&this.projection.unmount(),lt(this.notifyUpdate),lt(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(s=this.parent)==null||s.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const a=this.features[r];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,r){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const a=Qt.has(s);a&&this.onBindTransform&&this.onBindTransform();const n=r.on("change",i=>{this.latestValues[s]=i,this.props.onUpdate&&ce.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,s,r)),this.valueSubscriptions.set(s,()=>{n(),l&&l(),r.owner&&r.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in qt){const r=qt[s];if(!r)continue;const{isEnabled:a,Feature:n}=r;if(!this.features[s]&&n&&a(this.props)&&(this.features[s]=new n(this)),this.features[s]){const l=this.features[s];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ge()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,r){this.latestValues[s]=r}update(s,r){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<bi.length;a++){const n=bi[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const l="on"+n,i=s[l];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=M0(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(s),()=>r.variantChildren.delete(s)}addValue(s,r){const a=this.values.get(s);r!==a&&(a&&this.removeValue(s),this.bindToMotionValue(s,r),this.values.set(s,r),this.latestValues[s]=r.get())}removeValue(s){this.values.delete(s);const r=this.valueSubscriptions.get(s);r&&(r(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,r){if(this.props.values&&this.props.values[s])return this.props.values[s];let a=this.values.get(s);return a===void 0&&r!==void 0&&(a=Ut(r===null?void 0:r,{owner:this}),this.addValue(s,a)),a}readValue(s,r){let a=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return a!=null&&(typeof a=="string"&&(Zl(a)||eo(a))?a=parseFloat(a):!Ux(a)&&ot.test(r)&&(a=$o(s,r)),this.setBaseTarget(s,_e(a)?a.get():a)),_e(a)?a.get():a}setBaseTarget(s,r){this.baseTarget[s]=r}getBaseTarget(s){var l;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const i=mn(this.props,r,(l=this.presenceContext)==null?void 0:l.custom);i&&(a=i[s])}if(r&&a!==void 0)return a;const n=this.getBaseTargetFromProps(this.props,s);return n!==void 0&&!_e(n)?n:this.initialValues[s]!==void 0&&a===void 0?void 0:this.baseTarget[s]}on(s,r){return this.events[s]||(this.events[s]=new za),this.events[s].add(r)}notify(s,...r){this.events[s]&&this.events[s].notify(...r)}scheduleRenderMicrotask(){sn.render(this.render)}}class cc extends L0{constructor(){super(...arguments),this.KeyframeResolver=Px}sortInstanceNodePosition(s,r){return s.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(s,r){return s.style?s.style[r]:void 0}removeValueFromRenderState(s,{vars:r,style:a}){delete r[s],delete a[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;_e(s)&&(this.childSubscription=s.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function dc(t,{style:s,vars:r},a,n){const l=t.style;let i;for(i in s)l[i]=s[i];n==null||n.applyProjectionStyles(l,a);for(i in r)l.setProperty(i,r[i])}function $0(t){return window.getComputedStyle(t)}class I0 extends cc{constructor(){super(...arguments),this.type="html",this.renderInstance=dc}readValueFromInstance(s,r){var a;if(Qt.has(r))return(a=this.projection)!=null&&a.isProjecting?oa(r):Jh(s,r);{const n=$0(s),l=(qa(r)?n.getPropertyValue(r):n[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(s,{transformPagePoint:r}){return lc(s,r)}build(s,r,a){on(s,r,a.transformTemplate)}scrapeMotionValuesFromProps(s,r,a){return un(s,r,a)}}const mc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function F0(t,s,r,a){dc(t,s,void 0,a);for(const n in s.attrs)t.setAttribute(mc.has(n)?n:hn(n),s.attrs[n])}class V0 extends cc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ge}getBaseTargetFromProps(s,r){return s[r]}readValueFromInstance(s,r){if(Qt.has(r)){const a=Lo(r);return a&&a.default||0}return r=mc.has(r)?r:hn(r),s.getAttribute(r)}scrapeMotionValuesFromProps(s,r,a){return ec(s,r,a)}build(s,r,a){Jo(s,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(s,r,a,n){F0(s,r,a,n)}mount(s){this.isSVGTag=Zo(s.tagName),super.mount(s)}}const O0=(t,s)=>dn(t)?new V0(s):new I0(s,{allowProjection:t!==b.Fragment});function $t(t,s,r){const a=t.getProps();return mn(a,s,r!==void 0?r:a.custom,t)}const ya=t=>Array.isArray(t);function z0(t,s,r){t.hasValue(s)?t.getValue(s).set(r):t.addValue(s,Ut(r))}function B0(t){return ya(t)?t[t.length-1]||0:t}function U0(t,s){const r=$t(t,s);let{transitionEnd:a={},transition:n={},...l}=r||{};l={...l,...a};for(const i in l){const o=B0(l[i]);z0(t,i,o)}}function q0(t){return!!(_e(t)&&t.add)}function ba(t,s){const r=t.getValue("willChange");if(q0(r))return r.add(s);if(!r&&st.WillChange){const a=new st.WillChange("auto");t.addValue("willChange",a),a.add(s)}}function uc(t){return t.props[tc]}const H0=t=>t!==null;function G0(t,{repeat:s,repeatType:r="loop"},a){const n=t.filter(H0),l=s&&r!=="loop"&&s%2===1?0:n.length-1;return n[l]}const W0={type:"spring",stiffness:500,damping:25,restSpeed:10},K0=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Y0={type:"keyframes",duration:.8},J0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},X0=(t,{keyframes:s})=>s.length>2?Y0:Qt.has(t)?t.startsWith("scale")?K0(s[1]):W0:J0;function Z0({when:t,delay:s,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:l,repeatType:i,repeatDelay:o,from:d,elapsed:m,...c}){return!!Object.keys(c).length}const xn=(t,s,r,a={},n,l)=>i=>{const o=en(a,t)||{},d=o.delay||a.delay||0;let{elapsed:m=0}=a;m=m-Ge(d);const c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:s.getVelocity(),...o,delay:-m,onUpdate:h=>{s.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:t,motionValue:s,element:l?void 0:n};Z0(o)||Object.assign(c,X0(t,c)),c.duration&&(c.duration=Ge(c.duration)),c.repeatDelay&&(c.repeatDelay=Ge(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let u=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(ha(c),c.delay===0&&(u=!0)),(st.instantAnimations||st.skipAnimations)&&(u=!0,ha(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,u&&!l&&s.get()!==void 0){const h=G0(c.keyframes,o);if(h!==void 0){ce.update(()=>{c.onUpdate(h),c.onComplete()});return}}return o.isSync?new Za(c):new bx(c)};function Q0({protectedKeys:t,needsAnimating:s},r){const a=t.hasOwnProperty(r)&&s[r]!==!0;return s[r]=!1,a}function hc(t,s,{delay:r=0,transitionOverride:a,type:n}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:i,...o}=s;a&&(l=a);const d=[],m=n&&t.animationState&&t.animationState.getState()[n];for(const c in o){const u=t.getValue(c,t.latestValues[c]??null),h=o[c];if(h===void 0||m&&Q0(m,c))continue;const y={delay:r,...en(l||{},c)},f=u.get();if(f!==void 0&&!u.isAnimating&&!Array.isArray(h)&&h===f&&!y.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const j=uc(t);if(j){const v=window.MotionHandoffAnimation(j,c,ce);v!==null&&(y.startTime=v,p=!0)}}ba(t,c),u.start(xn(c,u,h,t.shouldReduceMotion&&Do.has(c)?{type:!1}:y,t,p));const x=u.animation;x&&d.push(x)}return i&&Promise.all(d).then(()=>{ce.update(()=>{i&&U0(t,i)})}),d}function xc(t,s,r,a=0,n=1){const l=Array.from(t).sort((m,c)=>m.sortNodePosition(c)).indexOf(s),i=t.size,o=(i-1)*a;return typeof r=="function"?r(l,i):n===1?l*a:o-l*a}function ja(t,s,r={}){var d;const a=$t(t,s,r.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:n=t.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(n=r.transitionOverride);const l=a?()=>Promise.all(hc(t,a,r)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=n;return ep(t,s,m,c,u,h,r)}:()=>Promise.resolve(),{when:o}=n;if(o){const[m,c]=o==="beforeChildren"?[l,i]:[i,l];return m().then(()=>c())}else return Promise.all([l(),i(r.delay)])}function ep(t,s,r=0,a=0,n=0,l=1,i){const o=[];for(const d of t.variantChildren)d.notify("AnimationStart",s),o.push(ja(d,s,{...i,delay:r+(typeof a=="function"?0:a)+xc(t.variantChildren,d,a,n,l)}).then(()=>d.notify("AnimationComplete",s)));return Promise.all(o)}function tp(t,s,r={}){t.notify("AnimationStart",s);let a;if(Array.isArray(s)){const n=s.map(l=>ja(t,l,r));a=Promise.all(n)}else if(typeof s=="string")a=ja(t,s,r);else{const n=typeof s=="function"?$t(t,s,r.custom):s;a=Promise.all(hc(t,n,r))}return a.then(()=>{t.notify("AnimationComplete",s)})}function pc(t,s){if(!Array.isArray(s))return!1;const r=s.length;if(r!==t.length)return!1;for(let a=0;a<r;a++)if(s[a]!==t[a])return!1;return!0}const sp=ln.length;function gc(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?gc(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const s={};for(let r=0;r<sp;r++){const a=ln[r],n=t.props[a];(js(n)||n===!1)&&(s[a]=n)}return s}const rp=[...nn].reverse(),ap=nn.length;function np(t){return s=>Promise.all(s.map(({animation:r,options:a})=>tp(t,r,a)))}function ip(t){let s=np(t),r=ji(),a=!0;const n=d=>(m,c)=>{var h;const u=$t(t,c,d==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(u){const{transition:y,transitionEnd:f,...p}=u;m={...m,...p,...f}}return m};function l(d){s=d(t)}function i(d){const{props:m}=t,c=gc(t.parent)||{},u=[],h=new Set;let y={},f=1/0;for(let x=0;x<ap;x++){const j=rp[x],v=r[j],k=m[j]!==void 0?m[j]:c[j],N=js(k),g=j===d?v.isActive:null;g===!1&&(f=x);let _=k===c[j]&&k!==m[j]&&N;if(_&&a&&t.manuallyAnimateOnMount&&(_=!1),v.protectedKeys={...y},!v.isActive&&g===null||!k&&!v.prevProp||yr(k)||typeof k=="boolean")continue;const w=lp(v.prevProp,k);let P=w||j===d&&v.isActive&&!_&&N||x>f&&N,D=!1;const C=Array.isArray(k)?k:[k];let S=C.reduce(n(j),{});g===!1&&(S={});const{prevResolvedValues:R={}}=v,H={...R,...S},z=q=>{P=!0,h.has(q)&&(D=!0,h.delete(q)),v.needsAnimating[q]=!0;const M=t.getValue(q);M&&(M.liveStyle=!1)};for(const q in H){const M=S[q],O=R[q];if(y.hasOwnProperty(q))continue;let X=!1;ya(M)&&ya(O)?X=!pc(M,O):X=M!==O,X?M!=null?z(q):h.add(q):M!==void 0&&h.has(q)?z(q):v.protectedKeys[q]=!0}v.prevProp=k,v.prevResolvedValues=S,v.isActive&&(y={...y,...S}),a&&t.blockInitialAnimation&&(P=!1);const T=_&&w;P&&(!T||D)&&u.push(...C.map(q=>{const M={type:j};if(typeof q=="string"&&a&&!T&&t.manuallyAnimateOnMount&&t.parent){const{parent:O}=t,X=$t(O,q);if(O.enteringChildren&&X){const{delayChildren:K}=X.transition||{};M.delay=xc(O.enteringChildren,t,K)}}return{animation:q,options:M}}))}if(h.size){const x={};if(typeof m.initial!="boolean"){const j=$t(t,Array.isArray(m.initial)?m.initial[0]:m.initial);j&&j.transition&&(x.transition=j.transition)}h.forEach(j=>{const v=t.getBaseTarget(j),k=t.getValue(j);k&&(k.liveStyle=!0),x[j]=v??null}),u.push({animation:x})}let p=!!u.length;return a&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(p=!1),a=!1,p?s(u):Promise.resolve()}function o(d,m){var u;if(r[d].isActive===m)return Promise.resolve();(u=t.variantChildren)==null||u.forEach(h=>{var y;return(y=h.animationState)==null?void 0:y.setActive(d,m)}),r[d].isActive=m;const c=i(d);for(const h in r)r[h].protectedKeys={};return c}return{animateChanges:i,setActive:o,setAnimateFunction:l,getState:()=>r,reset:()=>{r=ji(),a=!0}}}function lp(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!pc(s,t):!1}function xt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ji(){return{animate:xt(!0),whileInView:xt(),whileHover:xt(),whileTap:xt(),whileDrag:xt(),whileFocus:xt(),exit:xt()}}class ut{constructor(s){this.isMounted=!1,this.node=s}update(){}}class op extends ut{constructor(s){super(s),s.animationState||(s.animationState=ip(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();yr(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:r}=this.node.prevProps||{};s!==r&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)==null||s.call(this)}}let cp=0;class dp extends ut{constructor(){super(...arguments),this.id=cp++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===a)return;const n=this.node.animationState.setActive("exit",!s);r&&!s&&n.then(()=>{r(this.id)})}mount(){const{register:s,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const mp={animation:{Feature:op},exit:{Feature:dp}};function ws(t,s,r,a={passive:!0}){return t.addEventListener(s,r,a),()=>t.removeEventListener(s,r)}function Ps(t){return{point:{x:t.pageX,y:t.pageY}}}const up=t=>s=>rn(s)&&t(s,Ps(s));function ds(t,s,r,a){return ws(t,s,up(r),a)}const fc=1e-4,hp=1-fc,xp=1+fc,yc=.01,pp=0-yc,gp=0+yc;function Ae(t){return t.max-t.min}function fp(t,s,r){return Math.abs(t-s)<=r}function vi(t,s,r,a=.5){t.origin=a,t.originPoint=de(s.min,s.max,t.origin),t.scale=Ae(r)/Ae(s),t.translate=de(r.min,r.max,t.origin)-t.originPoint,(t.scale>=hp&&t.scale<=xp||isNaN(t.scale))&&(t.scale=1),(t.translate>=pp&&t.translate<=gp||isNaN(t.translate))&&(t.translate=0)}function ms(t,s,r,a){vi(t.x,s.x,r.x,a?a.originX:void 0),vi(t.y,s.y,r.y,a?a.originY:void 0)}function wi(t,s,r){t.min=r.min+s.min,t.max=t.min+Ae(s)}function yp(t,s,r){wi(t.x,s.x,r.x),wi(t.y,s.y,r.y)}function Ni(t,s,r){t.min=s.min-r.min,t.max=t.min+Ae(s)}function us(t,s,r){Ni(t.x,s.x,r.x),Ni(t.y,s.y,r.y)}function $e(t){return[t("x"),t("y")]}const bc=({current:t})=>t?t.ownerDocument.defaultView:null,ki=(t,s)=>Math.abs(t-s);function bp(t,s){const r=ki(t.x,s.x),a=ki(t.y,s.y);return Math.sqrt(r**2+a**2)}class jc{constructor(s,r,{transformPagePoint:a,contextWindow:n=window,dragSnapToOrigin:l=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Mr(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,f=bp(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!f)return;const{point:p}=h,{timestamp:x}=ve;this.history.push({...p,timestamp:x});const{onStart:j,onMove:v}=this.handlers;y||(j&&j(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,y)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Rr(y,this.transformPagePoint),ce.update(this.updatePoint,!0)},this.handlePointerUp=(h,y)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Mr(h.type==="pointercancel"?this.lastMoveEventInfo:Rr(y,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,j),p&&p(h,j)},!rn(s))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=a,this.distanceThreshold=i,this.contextWindow=n||window;const o=Ps(s),d=Rr(o,this.transformPagePoint),{point:m}=d,{timestamp:c}=ve;this.history=[{...m,timestamp:c}];const{onSessionStart:u}=r;u&&u(s,Mr(d,this.history)),this.removeListeners=As(ds(this.contextWindow,"pointermove",this.handlePointerMove),ds(this.contextWindow,"pointerup",this.handlePointerUp),ds(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),lt(this.updatePoint)}}function Rr(t,s){return s?{point:s(t.point)}:t}function _i(t,s){return{x:t.x-s.x,y:t.y-s.y}}function Mr({point:t},s){return{point:t,delta:_i(t,vc(s)),offset:_i(t,jp(s)),velocity:vp(s,.1)}}function jp(t){return t[0]}function vc(t){return t[t.length-1]}function vp(t,s){if(t.length<2)return{x:0,y:0};let r=t.length-1,a=null;const n=vc(t);for(;r>=0&&(a=t[r],!(n.timestamp-a.timestamp>Ge(s)));)r--;if(!a)return{x:0,y:0};const l=Ie(n.timestamp-a.timestamp);if(l===0)return{x:0,y:0};const i={x:(n.x-a.x)/l,y:(n.y-a.y)/l};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function wp(t,{min:s,max:r},a){return s!==void 0&&t<s?t=a?de(s,t,a.min):Math.max(t,s):r!==void 0&&t>r&&(t=a?de(r,t,a.max):Math.min(t,r)),t}function Si(t,s,r){return{min:s!==void 0?t.min+s:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Np(t,{top:s,left:r,bottom:a,right:n}){return{x:Si(t.x,r,n),y:Si(t.y,s,a)}}function Ci(t,s){let r=s.min-t.min,a=s.max-t.max;return s.max-s.min<t.max-t.min&&([r,a]=[a,r]),{min:r,max:a}}function kp(t,s){return{x:Ci(t.x,s.x),y:Ci(t.y,s.y)}}function _p(t,s){let r=.5;const a=Ae(t),n=Ae(s);return n>a?r=fs(s.min,s.max-a,t.min):a>n&&(r=fs(t.min,t.max-n,s.min)),tt(0,1,r)}function Sp(t,s){const r={};return s.min!==void 0&&(r.min=s.min-t.min),s.max!==void 0&&(r.max=s.max-t.min),r}const va=.35;function Cp(t=va){return t===!1?t=0:t===!0&&(t=va),{x:Ai(t,"left","right"),y:Ai(t,"top","bottom")}}function Ai(t,s,r){return{min:Ti(t,s),max:Ti(t,r)}}function Ti(t,s){return typeof t=="number"?t:t[s]||0}const Ap=new WeakMap;class Tp{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ge(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:r=!1,distanceThreshold:a}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const l=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Ps(u).point)},i=(u,h)=>{const{drag:y,dragPropagation:f,onDragStart:p}=this.getProps();if(y&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Lx(y),!this.openDragLock))return;this.latestPointerEvent=u,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$e(j=>{let v=this.getAxisMotionValue(j).get()||0;if(We.test(v)){const{projection:k}=this.visualElement;if(k&&k.layout){const N=k.layout.layoutBox[j];N&&(v=Ae(N)*(parseFloat(v)/100))}}this.originPoint[j]=v}),p&&ce.postRender(()=>p(u,h)),ba(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(u,h)=>{this.latestPointerEvent=u,this.latestPanInfo=h;const{dragPropagation:y,dragDirectionLock:f,onDirectionLock:p,onDrag:x}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:j}=h;if(f&&this.currentDirection===null){this.currentDirection=Ep(j),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,j),this.updateAxis("y",h.point,j),this.visualElement.render(),x&&x(u,h)},d=(u,h)=>{this.latestPointerEvent=u,this.latestPanInfo=h,this.stop(u,h),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>$e(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new jc(s,{onSessionStart:l,onStart:i,onMove:o,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:a,contextWindow:bc(this.visualElement)})}stop(s,r){const a=s||this.latestPointerEvent,n=r||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!n||!a)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ce.postRender(()=>o(a,n))}cancel(){this.isDragging=!1;const{projection:s,animationState:r}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(s,r,a){const{drag:n}=this.getProps();if(!a||!Fs(s,n,this.currentDirection))return;const l=this.getAxisMotionValue(s);let i=this.originPoint[s]+a[s];this.constraints&&this.constraints[s]&&(i=wp(i,this.constraints[s],this.elastic[s])),l.set(i)}resolveConstraints(){var l;const{dragConstraints:s,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,n=this.constraints;s&&Pt(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&a?this.constraints=Np(a.layoutBox,s):this.constraints=!1,this.elastic=Cp(r),n!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&$e(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=Sp(a.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:r}=this.getProps();if(!s||!Pt(s))return!1;const a=s.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const l=P0(a,n.root,this.visualElement.getTransformPagePoint());let i=kp(n.layout.layoutBox,l);if(r){const o=r(A0(i));this.hasMutatedConstraints=!!o,o&&(i=ac(o))}return i}startAnimation(s){const{drag:r,dragMomentum:a,dragElastic:n,dragTransition:l,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),d=this.constraints||{},m=$e(c=>{if(!Fs(c,r,this.currentDirection))return;let u=d&&d[c]||{};i&&(u={min:0,max:0});const h=n?200:1e6,y=n?40:1e7,f={type:"inertia",velocity:a?s[c]:0,bounceStiffness:h,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...l,...u};return this.startAxisValueAnimation(c,f)});return Promise.all(m).then(o)}startAxisValueAnimation(s,r){const a=this.getAxisMotionValue(s);return ba(this.visualElement,s),a.start(xn(s,a,0,r,this.visualElement,!1))}stopAnimation(){$e(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){$e(s=>{var r;return(r=this.getAxisMotionValue(s).animation)==null?void 0:r.pause()})}getAnimationState(s){var r;return(r=this.getAxisMotionValue(s).animation)==null?void 0:r.state}getAxisMotionValue(s){const r=`_drag${s.toUpperCase()}`,a=this.visualElement.getProps(),n=a[r];return n||this.visualElement.getValue(s,(a.initial?a.initial[s]:void 0)||0)}snapToCursor(s){$e(r=>{const{drag:a}=this.getProps();if(!Fs(r,a,this.currentDirection))return;const{projection:n}=this.visualElement,l=this.getAxisMotionValue(r);if(n&&n.layout){const{min:i,max:o}=n.layout.layoutBox[r];l.set(s[r]-de(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!Pt(r)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};$e(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const d=o.get();n[i]=_p({min:d,max:d},this.constraints[i])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),$e(i=>{if(!Fs(i,s,null))return;const o=this.getAxisMotionValue(i),{min:d,max:m}=this.constraints[i];o.set(de(d,m,n[i]))})}addListeners(){if(!this.visualElement.current)return;Ap.set(this.visualElement,this);const s=this.visualElement.current,r=ds(s,"pointerdown",d=>{const{drag:m,dragListener:c=!0}=this.getProps();m&&c&&this.start(d)}),a=()=>{const{dragConstraints:d}=this.getProps();Pt(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,l=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ce.read(a);const i=ws(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&($e(c=>{const u=this.getAxisMotionValue(c);u&&(this.originPoint[c]+=d[c].translate,u.set(u.get()+d[c].translate))}),this.visualElement.render())});return()=>{i(),r(),l(),o&&o()}}getProps(){const s=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:l=!1,dragElastic:i=va,dragMomentum:o=!0}=s;return{...s,drag:r,dragDirectionLock:a,dragPropagation:n,dragConstraints:l,dragElastic:i,dragMomentum:o}}}function Fs(t,s,r){return(s===!0||s===t)&&(r===null||r===t)}function Ep(t,s=10){let r=null;return Math.abs(t.y)>s?r="y":Math.abs(t.x)>s&&(r="x"),r}class Pp extends ut{constructor(s){super(s),this.removeGroupControls=Ve,this.removeListeners=Ve,this.controls=new Tp(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ve}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ei=t=>(s,r)=>{t&&ce.postRender(()=>t(s,r))};class Dp extends ut{constructor(){super(...arguments),this.removePointerDownListener=Ve}onPointerDown(s){this.session=new jc(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bc(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:r,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:Ei(s),onStart:Ei(r),onMove:a,onEnd:(l,i)=>{delete this.session,n&&ce.postRender(()=>n(l,i))}}}mount(){this.removePointerDownListener=ds(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ks={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pi(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const as={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(G.test(t))t=parseFloat(t);else return t;const r=Pi(t,s.target.x),a=Pi(t,s.target.y);return`${r}% ${a}%`}},Rp={correct:(t,{treeScale:s,projectionDelta:r})=>{const a=t,n=ot.parse(t);if(n.length>5)return a;const l=ot.createTransformer(t),i=typeof n[0]!="number"?1:0,o=r.x.scale*s.x,d=r.y.scale*s.y;n[0+i]/=o,n[1+i]/=d;const m=de(o,d,.5);return typeof n[2+i]=="number"&&(n[2+i]/=m),typeof n[3+i]=="number"&&(n[3+i]/=m),l(n)}};let Lr=!1;class Mp extends b.Component{componentDidMount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:a,layoutId:n}=this.props,{projection:l}=s;s0(Lp),l&&(r.group&&r.group.add(l),a&&a.register&&n&&a.register(l),Lr&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Ks.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:r,visualElement:a,drag:n,isPresent:l}=this.props,{projection:i}=a;return i&&(i.isPresent=l,Lr=!0,n||s.layoutDependency!==r||r===void 0||s.isPresent!==l?i.willUpdate():this.safeToRemove(),s.isPresent!==l&&(l?i.promote():i.relegate()||ce.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),sn.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:n}=s;Lr=!0,n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function wc(t){const[s,r]=Uo(),a=b.useContext(Ma);return e.jsx(Mp,{...t,layoutGroup:a,switchLayoutGroup:b.useContext(sc),isPresent:s,safeToRemove:r})}const Lp={borderRadius:{...as,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:as,borderTopRightRadius:as,borderBottomLeftRadius:as,borderBottomRightRadius:as,boxShadow:Rp};function $p(t,s,r){const a=_e(t)?t:Ut(t);return a.start(xn("",a,s,r)),a.animation}const Ip=(t,s)=>t.depth-s.depth;class Fp{constructor(){this.children=[],this.isDirty=!1}add(s){Ia(this.children,s),this.isDirty=!0}remove(s){Fa(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(Ip),this.isDirty=!1,this.children.forEach(s)}}function Vp(t,s){const r=Ee.now(),a=({timestamp:n})=>{const l=n-r;l>=s&&(lt(a),t(l-s))};return ce.setup(a,!0),()=>lt(a)}const Nc=["TopLeft","TopRight","BottomLeft","BottomRight"],Op=Nc.length,Di=t=>typeof t=="string"?parseFloat(t):t,Ri=t=>typeof t=="number"||G.test(t);function zp(t,s,r,a,n,l){n?(t.opacity=de(0,r.opacity??1,Bp(a)),t.opacityExit=de(s.opacity??1,0,Up(a))):l&&(t.opacity=de(s.opacity??1,r.opacity??1,a));for(let i=0;i<Op;i++){const o=`border${Nc[i]}Radius`;let d=Mi(s,o),m=Mi(r,o);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||Ri(d)===Ri(m)?(t[o]=Math.max(de(Di(d),Di(m),a),0),(We.test(m)||We.test(d))&&(t[o]+="%")):t[o]=m}(s.rotate||r.rotate)&&(t.rotate=de(s.rotate||0,r.rotate||0,a))}function Mi(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const Bp=kc(0,.5,oo),Up=kc(.5,.95,Ve);function kc(t,s,r){return a=>a<t?0:a>s?1:r(fs(t,s,a))}function Li(t,s){t.min=s.min,t.max=s.max}function Le(t,s){Li(t.x,s.x),Li(t.y,s.y)}function $i(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function Ii(t,s,r,a,n){return t-=s,t=rr(t,1/r,a),n!==void 0&&(t=rr(t,1/n,a)),t}function qp(t,s=0,r=1,a=.5,n,l=t,i=t){if(We.test(s)&&(s=parseFloat(s),s=de(i.min,i.max,s/100)-i.min),typeof s!="number")return;let o=de(l.min,l.max,a);t===l&&(o-=s),t.min=Ii(t.min,s,r,o,n),t.max=Ii(t.max,s,r,o,n)}function Fi(t,s,[r,a,n],l,i){qp(t,s[r],s[a],s[n],s.scale,l,i)}const Hp=["x","scaleX","originX"],Gp=["y","scaleY","originY"];function Vi(t,s,r,a){Fi(t.x,s,Hp,r?r.x:void 0,a?a.x:void 0),Fi(t.y,s,Gp,r?r.y:void 0,a?a.y:void 0)}function Oi(t){return t.translate===0&&t.scale===1}function _c(t){return Oi(t.x)&&Oi(t.y)}function zi(t,s){return t.min===s.min&&t.max===s.max}function Wp(t,s){return zi(t.x,s.x)&&zi(t.y,s.y)}function Bi(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function Sc(t,s){return Bi(t.x,s.x)&&Bi(t.y,s.y)}function Ui(t){return Ae(t.x)/Ae(t.y)}function qi(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class Kp{constructor(){this.members=[]}add(s){Ia(this.members,s),s.scheduleRender()}remove(s){if(Fa(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(s){const r=this.members.findIndex(n=>s===n);if(r===0)return!1;let a;for(let n=r;n>=0;n--){const l=this.members[n];if(l.isPresent!==!1){a=l;break}}return a?(this.promote(a),!0):!1}promote(s,r){const a=this.lead;if(s!==a&&(this.prevLead=a,this.lead=s,s.show(),a)){a.instance&&a.scheduleRender(),s.scheduleRender(),s.resumeFrom=a,r&&(s.resumeFrom.preserveOpacity=!0),a.snapshot&&(s.snapshot=a.snapshot,s.snapshot.latestValues=a.animationValues||a.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:n}=s.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:r,resumingFrom:a}=s;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Yp(t,s,r){let a="";const n=t.x.translate/s.x,l=t.y.translate/s.y,i=(r==null?void 0:r.z)||0;if((n||l||i)&&(a=`translate3d(${n}px, ${l}px, ${i}px) `),(s.x!==1||s.y!==1)&&(a+=`scale(${1/s.x}, ${1/s.y}) `),r){const{transformPerspective:m,rotate:c,rotateX:u,rotateY:h,skewX:y,skewY:f}=r;m&&(a=`perspective(${m}px) ${a}`),c&&(a+=`rotate(${c}deg) `),u&&(a+=`rotateX(${u}deg) `),h&&(a+=`rotateY(${h}deg) `),y&&(a+=`skewX(${y}deg) `),f&&(a+=`skewY(${f}deg) `)}const o=t.x.scale*s.x,d=t.y.scale*s.y;return(o!==1||d!==1)&&(a+=`scale(${o}, ${d})`),a||"none"}const $r=["","X","Y","Z"],Jp=1e3;let Xp=0;function Ir(t,s,r,a){const{latestValues:n}=s;n[t]&&(r[t]=n[t],s.setStaticValue(t,0),a&&(a[t]=0))}function Cc(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const r=uc(s);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",ce,!(n||l))}const{parent:a}=t;a&&!a.hasCheckedOptimisedAppear&&Cc(a)}function Ac({attachResizeListener:t,defaultParent:s,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(i={},o=s==null?void 0:s()){this.id=Xp++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eg),this.nodes.forEach(ag),this.nodes.forEach(ng),this.nodes.forEach(tg)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Fp)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new za),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const d=this.eventHandlers.get(i);d&&d.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=Bo(i)&&!zx(i),this.instance=i;const{layoutId:o,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||o)&&(this.isLayoutDirty=!0),t){let c,u=0;const h=()=>this.root.updateBlockedByResize=!1;ce.read(()=>{u=window.innerWidth}),t(i,()=>{const y=window.innerWidth;y!==u&&(u=y,this.root.updateBlockedByResize=!0,c&&c(),c=Vp(h,250),Ks.hasAnimatedSinceResize&&(Ks.hasAnimatedSinceResize=!1,this.nodes.forEach(Wi)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&m&&(o||d)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:h,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||m.getDefaultTransition()||dg,{onLayoutAnimationStart:p,onLayoutAnimationComplete:x}=m.getProps(),j=!this.targetLayout||!Sc(this.targetLayout,y),v=!u&&h;if(this.options.layoutRoot||this.resumeFrom||v||u&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...en(f,"layout"),onPlay:p,onComplete:x};(m.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(c,v)}else u||Wi(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),lt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ig),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Cc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const u=this.path[c];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:o,layout:d}=this.options;if(o===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Hi);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Gi);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rg),this.nodes.forEach(Zp),this.nodes.forEach(Qp)):this.nodes.forEach(Gi),this.clearAllSnapshots();const o=Ee.now();ve.delta=tt(0,1e3/60,o-ve.timestamp),ve.timestamp=o,ve.isProcessing=!0,_r.update.process(ve),_r.preRender.process(ve),_r.render.process(ve),ve.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sn.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sg),this.sharedNodes.forEach(lg)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ae(this.snapshot.measuredBox.x)&&!Ae(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const d=a(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:d,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!n)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!_c(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,c=m!==this.prevTransformTemplateValue;i&&this.instance&&(o||pt(this.latestValues)||c)&&(n(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let d=this.removeElementScroll(o);return i&&(d=this.removeTransform(d)),mg(d),{animationId:this.root.animationId,measuredBox:o,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:i}=this.options;if(!i)return ge();const o=i.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(ug))){const{scroll:c}=this.root;c&&(Dt(o.x,c.offset.x),Dt(o.y,c.offset.y))}return o}removeElementScroll(i){var d;const o=ge();if(Le(o,i),(d=this.scroll)!=null&&d.wasRoot)return o;for(let m=0;m<this.path.length;m++){const c=this.path[m],{scroll:u,options:h}=c;c!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&Le(o,i),Dt(o.x,u.offset.x),Dt(o.y,u.offset.y))}return o}applyTransform(i,o=!1){const d=ge();Le(d,i);for(let m=0;m<this.path.length;m++){const c=this.path[m];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Rt(d,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),pt(c.latestValues)&&Rt(d,c.latestValues)}return pt(this.latestValues)&&Rt(d,this.latestValues),d}removeTransform(i){const o=ge();Le(o,i);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!pt(m.latestValues))continue;pa(m.latestValues)&&m.updateSnapshot();const c=ge(),u=m.measurePageBox();Le(c,u),Vi(o,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,c)}return pt(this.latestValues)&&Vi(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ve.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==o;if(!(i||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:u}=this.options;if(!(!this.layout||!(c||u))){if(this.resolvedRelativeTargetAt=ve.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),us(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Le(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ge(),this.targetWithTransforms=ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yp(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Le(this.target,this.layout.layoutBox),ic(this.target,this.targetDelta)):Le(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),us(this.relativeTargetOrigin,this.target,y.target),Le(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||pa(this.parent.latestValues)||nc(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const i=this.getLead(),o=!!this.resumingFrom||this!==i;let d=!0;if((this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty)&&(d=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ve.timestamp&&(d=!1),d)return;const{layout:m,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||c))return;Le(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,h=this.treeScale.y;E0(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=ge());const{target:y}=i;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($i(this.prevProjectionDelta.x,this.projectionDelta.x),$i(this.prevProjectionDelta.y,this.projectionDelta.y)),ms(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==h||!qi(this.projectionDelta.x,this.prevProjectionDelta.x)||!qi(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),i){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mt(),this.projectionDelta=Mt(),this.projectionDeltaWithTransform=Mt()}setAnimationOrigin(i,o=!1){const d=this.snapshot,m=d?d.latestValues:{},c={...this.latestValues},u=Mt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=ge(),y=d?d.source:void 0,f=this.layout?this.layout.source:void 0,p=y!==f,x=this.getStack(),j=!x||x.members.length<=1,v=!!(p&&!j&&this.options.crossfade===!0&&!this.path.some(cg));this.animationProgress=0;let k;this.mixTargetDelta=N=>{const g=N/1e3;Ki(u.x,i.x,g),Ki(u.y,i.y,g),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(us(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),og(this.relativeTarget,this.relativeTargetOrigin,h,g),k&&Wp(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=ge()),Le(k,this.relativeTarget)),p&&(this.animationValues=c,zp(c,m,this.latestValues,g,v,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=g},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var o,d,m;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(lt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ce.update(()=>{Ks.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ut(0)),this.currentAnimation=$p(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),i.onUpdate&&i.onUpdate(c)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jp),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:d,layout:m,latestValues:c}=i;if(!(!o||!d||!m)){if(this!==i&&this.layout&&m&&Tc(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||ge();const u=Ae(this.layout.layoutBox.x);d.x.min=i.target.x.min,d.x.max=d.x.min+u;const h=Ae(this.layout.layoutBox.y);d.y.min=i.target.y.min,d.y.max=d.y.min+h}Le(o,d),Rt(o,c),ms(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Kp),this.sharedNodes.get(i).add(o);const m=o.options.initialPromotionConfig;o.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var o;const{layoutId:i}=this.options;return i?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:i}=this.options;return i?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:d}=i;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(o=!0),!o)return;const m={};d.z&&Ir("z",i,m,this.animationValues);for(let c=0;c<$r.length;c++)Ir(`rotate${$r[c]}`,i,m,this.animationValues),Ir(`skew${$r[c]}`,i,m,this.animationValues);i.render();for(const c in m)i.setStaticValue(c,m[c]),this.animationValues&&(this.animationValues[c]=m[c]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Ws(o==null?void 0:o.pointerEvents)||"",i.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Ws(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!pt(this.latestValues)&&(i.transform=d?d({},""):"none",this.hasProjected=!1);return}i.visibility="";const c=m.animationValues||m.latestValues;this.applyTransformsToTarget();let u=Yp(this.projectionDeltaWithTransform,this.treeScale,c);d&&(u=d(c,u)),i.transform=u;const{x:h,y}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${y.origin*100}% 0`,m.animationValues?i.opacity=m===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:i.opacity=m===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const f in vs){if(c[f]===void 0)continue;const{correct:p,applyTo:x,isCSSVariable:j}=vs[f],v=u==="none"?c[f]:p(c[f],m);if(x){const k=x.length;for(let N=0;N<k;N++)i[x[N]]=v}else j?this.options.visualElement.renderState.vars[f]=v:i[f]=v}this.options.layoutId&&(i.pointerEvents=m===this?Ws(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var o;return(o=i.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(Hi),this.root.sharedNodes.clear()}}}function Zp(t){t.updateLayout()}function Qp(t){var r;const s=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=t.layout,{animationType:l}=t.options,i=s.source!==t.layout.source;l==="size"?$e(u=>{const h=i?s.measuredBox[u]:s.layoutBox[u],y=Ae(h);h.min=a[u].min,h.max=h.min+y}):Tc(l,s.layoutBox,a)&&$e(u=>{const h=i?s.measuredBox[u]:s.layoutBox[u],y=Ae(a[u]);h.max=h.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+y)});const o=Mt();ms(o,a,s.layoutBox);const d=Mt();i?ms(d,t.applyTransform(n,!0),s.measuredBox):ms(d,a,s.layoutBox);const m=!_c(o);let c=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:y}=u;if(h&&y){const f=ge();us(f,s.layoutBox,h.layoutBox);const p=ge();us(p,a,y.layoutBox),Sc(f,p)||(c=!0),u.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=f,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:d,layoutDelta:o,hasLayoutChanged:m,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function eg(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function tg(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sg(t){t.clearSnapshot()}function Hi(t){t.clearMeasurements()}function Gi(t){t.isLayoutDirty=!1}function rg(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function Wi(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ag(t){t.resolveTargetDelta()}function ng(t){t.calcProjection()}function ig(t){t.resetSkewAndRotation()}function lg(t){t.removeLeadSnapshot()}function Ki(t,s,r){t.translate=de(s.translate,0,r),t.scale=de(s.scale,1,r),t.origin=s.origin,t.originPoint=s.originPoint}function Yi(t,s,r,a){t.min=de(s.min,r.min,a),t.max=de(s.max,r.max,a)}function og(t,s,r,a){Yi(t.x,s.x,r.x,a),Yi(t.y,s.y,r.y,a)}function cg(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const dg={duration:.45,ease:[.4,0,.1,1]},Ji=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Xi=Ji("applewebkit/")&&!Ji("chrome/")?Math.round:Ve;function Zi(t){t.min=Xi(t.min),t.max=Xi(t.max)}function mg(t){Zi(t.x),Zi(t.y)}function Tc(t,s,r){return t==="position"||t==="preserve-aspect"&&!fp(Ui(s),Ui(r),.2)}function ug(t){var s;return t!==t.root&&((s=t.scroll)==null?void 0:s.wasRoot)}const hg=Ac({attachResizeListener:(t,s)=>ws(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Fr={current:void 0},Ec=Ac({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Fr.current){const t=new hg({});t.mount(window),t.setOptions({layoutScroll:!0}),Fr.current=t}return Fr.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),xg={pan:{Feature:Dp},drag:{Feature:Pp,ProjectionNode:Ec,MeasureLayout:wc}};function Qi(t,s,r){const{props:a}=t;t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,l=a[n];l&&ce.postRender(()=>l(s,Ps(s)))}class pg extends ut{mount(){const{current:s}=this.node;s&&(this.unmount=$x(s,(r,a)=>(Qi(this.node,a,"Start"),n=>Qi(this.node,n,"End"))))}unmount(){}}class gg extends ut{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=As(ws(this.node.current,"focus",()=>this.onFocus()),ws(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function el(t,s,r){const{props:a}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&a.whileTap&&t.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),l=a[n];l&&ce.postRender(()=>l(s,Ps(s)))}class fg extends ut{mount(){const{current:s}=this.node;s&&(this.unmount=Ox(s,(r,a)=>(el(this.node,a,"Start"),(n,{success:l})=>el(this.node,n,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const wa=new WeakMap,Vr=new WeakMap,yg=t=>{const s=wa.get(t.target);s&&s(t)},bg=t=>{t.forEach(yg)};function jg({root:t,...s}){const r=t||document;Vr.has(r)||Vr.set(r,{});const a=Vr.get(r),n=JSON.stringify(s);return a[n]||(a[n]=new IntersectionObserver(bg,{root:t,...s})),a[n]}function vg(t,s,r){const a=jg(s);return wa.set(t,r),a.observe(t),()=>{wa.delete(t),a.unobserve(t)}}const wg={some:0,all:1};class Ng extends ut{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:r,margin:a,amount:n="some",once:l}=s,i={root:r?r.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:wg[n]},o=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:c,onViewportLeave:u}=this.node.getProps(),h=m?c:u;h&&h(d)};return vg(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:r}=this.node;["amount","margin","root"].some(kg(s,r))&&this.startObserver()}unmount(){}}function kg({viewport:t={}},{viewport:s={}}={}){return r=>t[r]!==s[r]}const _g={inView:{Feature:Ng},tap:{Feature:fg},focus:{Feature:gg},hover:{Feature:pg}},Sg={layout:{ProjectionNode:Ec,MeasureLayout:wc}},Cg={...mp,..._g,...xg,...Sg},F=C0(Cg,O0),Ag=({isOpen:t,onClose:s})=>{const{user:r}=oe(),{isRTL:a}=te(),[n,l]=b.useState([]),[i,o]=b.useState(!1),[d,m]=b.useState(null);b.useEffect(()=>{t&&c()},[t]);const c=async()=>{try{o(!0);const x=await B.get("/api/notifications");x.data&&x.data.success&&l(x.data.notifications||[])}catch(x){console.error("Erreur chargement notifications:",x),l([])}finally{o(!1)}},u=x=>{switch(x){case"absence_request":return e.jsx(be,{className:"w-4 h-4 text-blue-500"});default:return e.jsx(ml,{className:"w-4 h-4 text-gray-500"})}},h=async x=>{try{m(x),(await B.put(`/notifications/${x}/read`)).data.success&&(l(v=>v.map(k=>k.id===x?{...k,is_read:!0}:k)),U.success(a?"تم تحديد الإشعار كمقروء":"Notification marquée comme lue"))}catch(j){console.error("Erreur marquage notification:",j),U.error(a?"خطأ في تحديث الإشعار":"Erreur lors de la mise à jour")}finally{m(null)}},y=async(x,j)=>{try{m(x),(await B.put(`/absence-requests/${j}/acknowledge`,{admin_notes:"Demande prise en compte par l'administration"})).data.success&&(U.success(a?"تم إرسال إشعار الاستلام":"Accusé de réception envoyé"),await h(x),c())}catch(v){console.error("Erreur accusé de réception:",v),U.error(a?"خطأ في إرسال إشعار الاستلام":"Erreur lors de l'accusé de réception")}finally{m(null)}},f=async()=>{try{(await B.put("/api/notifications/read-all")).data.success&&(l(j=>j.map(v=>({...v,is_read:!0}))),U.success(a?"تم تحديد جميع الإشعارات كمقروءة":"Toutes les notifications marquées comme lues"))}catch(x){console.error("Erreur marquage toutes notifications:",x),U.error(a?"خطأ في تحديث الإشعارات":"Erreur lors de la mise à jour")}},p=x=>{try{const j=new Date(x),k=new Date-j,N=Math.floor(k/6e4),g=Math.floor(N/60),_=Math.floor(g/24);return N<1?a?"الآن":"Maintenant":N<60?a?`منذ ${N} دقيقة`:`Il y a ${N} min`:g<24?a?`منذ ${g} ساعة`:`Il y a ${g}h`:_<7?a?`منذ ${_} يوم`:`Il y a ${_}j`:j.toLocaleDateString(a?"ar-TN":"fr-FR")}catch{return x}};return t?e.jsx(qo,{children:e.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-end p-4",onClick:s,children:e.jsxs(F.div,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},className:`bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden ${a?"rtl":"ltr"}`,onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Js,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2 text-gray-600 dark:text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a?"الإشعارات":"Notifications"}),n.filter(x=>!x.is_read).length>0&&e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 px-2 py-1 text-xs bg-red-500 text-white rounded-full",children:n.filter(x=>!x.is_read).length})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[n.filter(x=>!x.is_read).length>0&&e.jsx(L,{variant:"outline",size:"sm",onClick:f,className:"text-xs",children:a?"تحديد الكل كمقروء":"Tout marquer lu"}),e.jsx("button",{onClick:s,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(Ht,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:i?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Js,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:a?"لا توجد إشعارات":"Aucune notification"})]}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(x=>{let j={};try{j=x.data?typeof x.data=="string"?JSON.parse(x.data):x.data:{}}catch(k){console.error("Erreur parsing data notification:",k),j={}}const v=x.type==="absence_request"&&j.absence_request_id;return e.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${x.is_read?"":"bg-blue-50 dark:bg-blue-900/10"}`,children:e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"flex-shrink-0",children:u(x.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:x.title}),e.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[!x.is_read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-500",children:p(x.created_at)})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:x.message}),v&&((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="staff")&&e.jsxs("div",{className:"mt-3 flex space-x-2 rtl:space-x-reverse",children:[e.jsxs(L,{size:"sm",onClick:()=>y(x.id,j.absence_request_id),disabled:d===x.id,className:"text-xs",children:[d===x.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1 rtl:mr-0 rtl:ml-1"}):e.jsx(Bc,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),a?"تأكيد الاستلام":"Accusé de réception"]}),!x.is_read&&e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>h(x.id),disabled:d===x.id,className:"text-xs",children:[e.jsx(ps,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),a?"تحديد كمقروء":"Marquer lu"]})]}),!v&&!x.is_read&&e.jsx("div",{className:"mt-2",children:e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>h(x.id),disabled:d===x.id,className:"text-xs",children:[e.jsx(ps,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),a?"تحديد كمقروء":"Marquer comme lu"]})})]})]})},x.id)})})})]})})}):null},Tg=({onMenuClick:t})=>{const{user:s,logout:r}=oe(),{isRTL:a}=te(),n=Wu(),{unreadCount:l}=(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="staff"?n:{unreadCount:0},[i,o]=b.useState(!1),[d,m]=b.useState(!1),c=b.useRef(null);b.useEffect(()=>{const f=p=>{c.current&&!c.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const u=()=>{r(),o(!1)},h=f=>{switch(f){case"admin":return a?"مدير":"Administrateur";case"staff":return a?"موظف":"Personnel";case"parent":return a?"ولي أمر":"Parent";default:return f}},y=f=>{switch(f){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"staff":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"parent":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center lg:hidden",children:e.jsx("button",{onClick:t,className:"p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",children:e.jsx(ol,{className:"w-6 h-6"})})}),e.jsx("div",{className:"hidden lg:flex lg:items-center",children:e.jsx(W,{to:"/dashboard",className:"flex items-center",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a?"لوحة التحكم":"Dashboard"})})}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsxs(W,{to:"/",className:"flex items-center px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:a?"العودة إلى الموقع":"Retour au site",children:[e.jsx(cl,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),e.jsx("span",{className:"hidden sm:inline",children:a?"الموقع":"Site"})]}),((s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="staff")&&e.jsxs("button",{onClick:()=>m(!0),className:"p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 relative transition-colors",children:[e.jsx(Js,{className:"w-6 h-6"}),l>0&&e.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:l>99?"99+":l})]}),e.jsx(ea,{}),e.jsx(Zr,{}),e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:()=>o(!i),className:"flex items-center space-x-3 rtl:space-x-reverse p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-primary-100 dark:bg-primary-900 flex items-center justify-center flex-shrink-0",children:[s!=null&&s.profile_image?e.jsx("img",{src:`${pr.BASE_URL}${s.profile_image}`,alt:"Photo de profil",className:"w-8 h-8 object-cover",crossOrigin:"anonymous",onError:f=>{console.error("❌ Erreur chargement image header:",f.target.src),f.target.style.display="none",f.target.nextElementSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-8 h-8 flex items-center justify-center ${s!=null&&s.profile_image?"hidden":""}`,children:e.jsx(me,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})})]}),e.jsxs("div",{className:"hidden md:block text-left rtl:text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]}),e.jsx("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${y(s==null?void 0:s.role)}`,children:h(s==null?void 0:s.role)})})]}),e.jsx(dl,{className:"w-4 h-4 text-gray-400"})]}),i&&e.jsx("div",{className:"absolute right-0 rtl:right-auto rtl:left-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 z-50",children:e.jsxs("div",{className:"py-1",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:s==null?void 0:s.email})]})}),e.jsxs(W,{to:"/dashboard/profile",onClick:()=>o(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(me,{className:"w-4 h-4 mr-3 rtl:mr-0 rtl:ml-3"}),a?"الملف الشخصي":"Profil"]}),e.jsxs(W,{to:"/dashboard/settings",onClick:()=>o(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(Ys,{className:"w-4 h-4 mr-3 rtl:mr-0 rtl:ml-3"}),a?"الإعدادات":"Paramètres"]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:u,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(xs,{className:"w-4 h-4 mr-3 rtl:mr-0 rtl:ml-3"}),a?"تسجيل الخروج":"Déconnexion"]})})]})})]})]})]})}),e.jsx(ta,{fallbackMessage:"Erreur lors du chargement des notifications",showRetry:!0,children:e.jsx(Ag,{isOpen:d,onClose:()=>m(!1)})})]})},Eg=()=>{const{isRTL:t}=te(),[s,r]=b.useState(!1);return e.jsxs("div",{className:`min-h-screen bg-gray-50 dark:bg-gray-900 ${t?"font-arabic":"font-sans"}`,children:[e.jsx(Gu,{isOpen:s,onClose:()=>r(!1)}),e.jsxs("div",{className:`${t?"lg:pr-64":"lg:pl-64"}`,children:[e.jsx(Tg,{onMenuClick:()=>r(!0)}),e.jsx("main",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx(nl,{})})})]}),s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>r(!1)})]})},Pg=()=>{const{isRTL:t}=te(),{isAuthenticated:s,user:r}=oe();return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("section",{className:"relative min-h-screen flex items-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-indigo-950 dark:via-purple-950 dark:to-blue-950",children:e.jsx("div",{className:"relative w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[e.jsxs("div",{className:"space-y-8 text-center lg:text-left",children:[e.jsxs("div",{className:"inline-flex items-center px-6 py-3 bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-full shadow-xl",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full flex items-center justify-center mr-3",children:e.jsx(Uc,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:t?"الحضانة الأولى في المنطقة":"Crèche #1 dans la région"})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("h1",{className:"text-3xl md:text-6xl lg:text-7xl font-bold leading-tight",children:[e.jsx("span",{className:"inline-block bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:t?"ميما الغالية":"Mima Elghalia"}),e.jsx("br",{}),e.jsx("span",{className:"inline-block text-gray-900 dark:text-white",children:t?"مستقبل أطفالكم":"L'avenir de vos enfants"}),e.jsx("br",{}),e.jsx("span",{className:"inline-block bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent",children:t?"يبدأ هنا":"commence ici"})]})}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-600 dark:text-gray-300 leading-relaxed max-w-2xl",children:t?"مرحباً بكم في ميما الغالية حيث ينمو كل طفل في بيئة محبة ومحفزة.":"Bienvenue chez Mima Elghalia où chaque enfant grandit dans un environnement bienveillant et stimulant."}),e.jsx("div",{className:"flex flex-wrap gap-4 justify-center lg:justify-start",children:[{icon:Qe,text:t?"بيئة آمنة 100%":"Environnement 100% sécurisé",color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/30"},{icon:zs,text:t?"رعاية شخصية":"Soins personnalisés",color:"text-pink-600",bg:"bg-pink-50 dark:bg-pink-900/30"},{icon:gn,text:t?"تعليم مبكر":"Éducation précoce",color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-900/30"}].map((a,n)=>e.jsxs("div",{className:`flex items-center space-x-2 rtl:space-x-reverse ${a.bg} backdrop-blur-sm px-5 py-3 rounded-full shadow-lg`,children:[e.jsx(a.icon,{className:`w-5 h-5 ${a.color}`}),e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:a.text})]},n))}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-6 justify-center lg:justify-start",children:s?e.jsxs("div",{className:"bg-white/90 backdrop-blur-md px-8 py-4 rounded-2xl shadow-xl",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:t?`مرحباً ${r==null?void 0:r.first_name}!`:`Bonjour ${r==null?void 0:r.first_name} !`}),e.jsx("p",{className:"text-gray-600 text-sm",children:(r==null?void 0:r.role)==="parent"?e.jsx(W,{to:"/mon-espace",className:"text-blue-600 hover:underline",children:t?"انتقل إلى مساحتك":"Accéder à votre espace"}):e.jsx(W,{to:"/dashboard",className:"text-blue-600 hover:underline",children:t?"انتقل إلى لوحة التحكم":"Accéder au dashboard"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(W,{to:"/inscription",className:"group relative bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white px-10 py-5 rounded-2xl font-bold text-lg shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-500 inline-flex items-center justify-center",children:[e.jsx("span",{className:"relative z-10",children:t?"سجل الآن":"Inscription gratuite"}),e.jsx(Vt,{className:`relative z-10 w-6 h-6 ${t?"mr-3 rotate-180":"ml-3"} group-hover:translate-x-2 transition-transform duration-300`})]}),e.jsx(W,{to:"/login",className:"group bg-white/90 backdrop-blur-md text-gray-700 px-10 py-5 rounded-2xl font-bold text-lg shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-500 inline-flex items-center justify-center border border-white/50",children:t?"تسجيل الدخول":"Se connecter"})]})})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"aspect-square bg-gradient-to-br from-blue-200 via-purple-200 to-pink-200 dark:from-blue-800 dark:via-purple-800 dark:to-pink-800 rounded-3xl p-8 shadow-2xl",children:e.jsx("div",{className:"w-full h-full bg-white dark:bg-gray-800 rounded-2xl overflow-hidden shadow-xl flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(zs,{className:"w-16 h-16 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:t?"ميما الغالية":"Mima Elghalia"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t?"حضانة متميزة":"Crèche d'excellence"})]})})})})]})})}),s&&e.jsx("section",{className:"py-16 bg-gradient-to-br from-blue-600 to-purple-600 dark:from-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:t?`مرحباً بك ${(r==null?void 0:r.first_name)||""}`:`Bienvenue ${(r==null?void 0:r.first_name)||""}`}),e.jsx("p",{className:"text-xl text-blue-100 dark:text-gray-300 mb-8",children:t?"اكتشف جميع الخدمات المتاحة لك ولطفلك":"Découvrez tous les services disponibles pour vous et votre enfant"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="staff")&&e.jsx(W,{to:"/dashboard",className:"bg-white text-blue-600 hover:bg-gray-50 px-8 py-4 rounded-xl font-bold text-lg transition-colors duration-300",children:t?"لوحة التحكم":"Accéder au Dashboard"}),(r==null?void 0:r.role)==="parent"&&e.jsx(W,{to:"/mon-espace",className:"bg-white text-blue-600 hover:bg-gray-50 px-8 py-4 rounded-xl font-bold text-lg transition-colors duration-300",children:t?"مساحتي":"Mon Espace"}),e.jsx(W,{to:"/contact",className:"border-2 border-white text-white hover:bg-white hover:text-blue-600 px-8 py-4 rounded-xl font-bold text-lg transition-colors duration-300",children:t?"تواصل معنا":"Nous contacter"})]})]})}),e.jsx("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:t?"خدماتنا المتميزة":"Nos services d'excellence"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:t?"نقدم خدمات شاملة لضمان نمو صحي وسعيد لأطفالكم":"Nous offrons des services complets pour assurer un développement sain et heureux de vos enfants"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{icon:gn,title:t?"التعليم المبكر":"Éducation précoce",description:t?"برامج تعليمية متطورة":"Programmes éducatifs avancés",color:"text-blue-600"},{icon:zs,title:t?"الرعاية المحبة":"Soins attentionnés",description:t?"بيئة آمنة ومحبة":"Environnement sûr et aimant",color:"text-pink-600"},{icon:Qe,title:t?"الأمان والحماية":"Sécurité",description:t?"أقصى درجات الأمان":"Sécurité maximale",color:"text-green-600"}].map((a,n)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 ${a.color} mb-6`,children:e.jsx(a.icon,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:a.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a.description})]},n))})]})}),!s&&e.jsx("section",{className:"py-20 bg-gradient-to-br from-blue-600 to-purple-600 dark:from-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:t?"هل أنت مستعد لبدء رحلة طفلك معنا؟":"Prêt à commencer l'aventure de votre enfant avec nous ?"}),e.jsx("p",{className:"text-xl text-blue-100 dark:text-gray-300 mb-8",children:t?"انضموا إلى عائلتنا الكبيرة واكتشفوا الفرق":"Rejoignez notre grande famille et découvrez la différence"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(W,{to:"/inscription",className:"bg-white text-blue-600 hover:bg-gray-50 px-8 py-4 rounded-xl font-bold text-lg transition-colors duration-300",children:t?"سجل الآن":"Inscription gratuite"}),e.jsx(W,{to:"/contact",className:"border-2 border-white text-white hover:bg-white hover:text-blue-600 px-8 py-4 rounded-xl font-bold text-lg transition-colors duration-300",children:t?"تواصل معنا":"Nous contacter"})]})]})})]})},Dg={getArticles:async(t={})=>await Wm("/articles",t),getArticleById:async t=>(await Rs.get(`/articles/${t}`)).data,createArticle:async t=>(await Rs.post("/articles",t)).data,updateArticle:async(t,s)=>(await Rs.put(`/articles/${t}`,s)).data,deleteArticle:async t=>(await Rs.delete(`/articles/${t}`)).data},ne=({size:t="md",color:s="primary",className:r,...a})=>{const n={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},l={primary:"border-primary-600",secondary:"border-secondary-600",white:"border-white",gray:"border-gray-600"};return e.jsx("div",{className:mt("loading-spinner",n[t],l[s],r),...a})},$=b.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:mt("rounded-xl border bg-card text-card-foreground shadow-sm",t),...s}));$.displayName="Card";const J=b.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:mt("flex flex-col space-y-1.5 p-6",t),...s}));J.displayName="CardHeader";const Q=b.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:mt("font-semibold leading-none tracking-tight",t),...s}));Q.displayName="CardTitle";const Ye=b.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:mt("text-sm text-muted-foreground",t),...s}));Ye.displayName="CardDescription";const I=b.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:mt("p-6 pt-0",t),...s}));I.displayName="CardContent";const Rg=b.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:mt("flex items-center p-6 pt-0",t),...s}));Rg.displayName="CardFooter";const Mg=()=>{const{t}=Wt(),{isRTL:s,getLocalizedText:r}=te(),[a,n]=b.useState([]),[l,i]=b.useState(!0),[o,d]=b.useState(""),[m,c]=b.useState(1),[u,h]=b.useState(1),[y,f]=b.useState("grid"),[p,x]=b.useState("all"),j={initial:{opacity:0,y:60},animate:{opacity:1,y:0},transition:{duration:.6}},v={animate:{transition:{staggerChildren:.1}}},k=[{id:1,title:s?"أهمية التعليم المبكر للأطفال":"L'importance de l'éducation précoce",excerpt:s?"التعليم المبكر يلعب دوراً حاسماً في تطوير قدرات الطفل المعرفية والاجتماعية":"L'éducation précoce joue un rôle crucial dans le développement cognitif et social de l'enfant",content:s?"محتوى المقال باللغة العربية...":"Contenu de l'article en français...",image:"/images/article1.jpg",author:s?"د. فاطمة أحمد":"Dr. Fatima Ahmed",publishedAt:"2024-01-15",category:s?"التعليم":"Éducation",readTime:5,tags:s?["تعليم","أطفال","تطوير"]:["éducation","enfants","développement"]},{id:2,title:s?"نصائح للتغذية الصحية للأطفال":"Conseils pour une alimentation saine",excerpt:s?"التغذية السليمة أساس نمو الطفل الصحي وتطوير مناعته":"Une alimentation équilibrée est la base d'une croissance saine et du développement immunitaire",content:s?"محتوى المقال باللغة العربية...":"Contenu de l'article en français...",image:"/images/article2.jpg",author:s?"أ. محمد الكريم":"M. Mohamed Karim",publishedAt:"2024-01-10",category:s?"الصحة":"Santé",readTime:7,tags:s?["تغذية","صحة","أطفال"]:["nutrition","santé","enfants"]},{id:3,title:s?"كيفية التعامل مع نوبات الغضب عند الأطفال":"Gérer les crises de colère chez l'enfant",excerpt:s?"استراتيجيات فعالة للتعامل مع نوبات الغضب وتعليم الطفل التحكم في انفعالاته":"Stratégies efficaces pour gérer les crises et enseigner la régulation émotionnelle",content:s?"محتوى المقال باللغة العربية...":"Contenu de l'article en français...",image:"/images/article3.jpg",author:s?"د. عائشة بن علي":"Dr. Aicha Ben Ali",publishedAt:"2024-01-05",category:s?"علم النفس":"Psychologie",readTime:6,tags:s?["سلوك","تربية","نفسية"]:["comportement","éducation","psychologie"]},{id:4,title:s?"أنشطة ترفيهية تعليمية للأطفال":"Activités ludiques et éducatives",excerpt:s?"مجموعة من الأنشطة الممتعة التي تساعد على تطوير مهارات الطفل":"Une collection d'activités amusantes qui aident au développement des compétences",content:s?"محتوى المقال باللغة العربية...":"Contenu de l'article en français...",image:"/images/article4.jpg",author:s?"أ. سارة محمد":"Mme. Sara Mohamed",publishedAt:"2024-01-01",category:s?"أنشطة":"Activités",readTime:4,tags:s?["أنشطة","تعلم","لعب"]:["activités","apprentissage","jeu"]}],N=[{id:"all",name:s?"الكل":"Tous"},{id:"education",name:s?"التعليم":"Éducation"},{id:"health",name:s?"الصحة":"Santé"},{id:"psychology",name:s?"علم النفس":"Psychologie"},{id:"activities",name:s?"أنشطة":"Activités"}];b.useEffect(()=>{i(!0),setTimeout(()=>{n(k),i(!1)},500)},[m]);const g=a.filter(w=>{const P=o.toLowerCase().trim(),D=P===""||w.title.toLowerCase().includes(P)||w.excerpt.toLowerCase().includes(P)||w.content.toLowerCase().includes(P)||w.tags.some(S=>S.toLowerCase().includes(P)),C=p==="all"||w.category.toLowerCase()===p.toLowerCase()||p==="education"&&(w.category.toLowerCase().includes("éducation")||w.category.toLowerCase().includes("تعليم"))||p==="health"&&(w.category.toLowerCase().includes("santé")||w.category.toLowerCase().includes("صحة"))||p==="psychology"&&(w.category.toLowerCase().includes("psychologie")||w.category.toLowerCase().includes("علم النفس"))||p==="activities"&&(w.category.toLowerCase().includes("activités")||w.category.toLowerCase().includes("أنشطة"));return D&&C}),_=w=>{const P=new Date(w);return s?P.toLocaleDateString("ar-SA"):P.toLocaleDateString("fr-FR")};return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(ne,{size:"lg"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(F.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:s?"مقالاتنا":"Nos Articles"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:s?"اكتشف مجموعة من المقالات المفيدة حول رعاية وتربية الأطفال":"Découvrez une collection d'articles utiles sur les soins et l'éducation des enfants"})]}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(kt,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:s?"ابحث في المقالات...":"Rechercher dans les articles...",value:o,onChange:w=>d(w.target.value),className:"w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(w=>e.jsx("button",{onClick:()=>x(w.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${p===w.id?"bg-primary-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-primary-50 dark:hover:bg-gray-700"}`,children:w.name},w.id))}),e.jsxs("div",{className:"flex bg-white dark:bg-gray-800 rounded-full p-1 border border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>f("grid"),className:`p-2 rounded-full transition-colors ${y==="grid"?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-primary-600"}`,children:e.jsx(qc,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>f("list"),className:`p-2 rounded-full transition-colors ${y==="list"?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-primary-600"}`,children:e.jsx(Hc,{className:"w-5 h-5"})})]})]}),(o||p!=="all")&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[g.length===0?s?"لم يتم العثور على مقالات":"Aucun article trouvé":s?`تم العثور على ${g.length} مقال${g.length>1?"ات":""}`:`${g.length} article${g.length>1?"s":""} trouvé${g.length>1?"s":""}`,o&&e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:s?`للبحث: "${o}"`:`pour "${o}"`})]})})]}),e.jsx(F.div,{variants:v,initial:"initial",animate:"animate",className:`${y==="grid"?"grid md:grid-cols-2 lg:grid-cols-3 gap-8":"space-y-6"}`,children:g.map((w,P)=>e.jsx(F.div,{variants:j,children:y==="grid"?e.jsxs($,{className:"h-full group hover:shadow-xl transition-all duration-300 border-0 bg-white dark:bg-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx(Bt,{src:w.image,alt:w.title,fallback:Ct.article,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute top-4 left-4 rtl:left-auto rtl:right-4",children:e.jsx("span",{className:"px-3 py-1 bg-primary-600 text-white text-xs font-medium rounded-full",children:w.category})})]}),e.jsxs(J,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mb-2 space-x-4 rtl:space-x-reverse",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),_(w.publishedAt)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),w.readTime," ",s?"دقائق":"min"]})]}),e.jsx(Q,{className:"text-xl font-bold text-gray-900 dark:text-white line-clamp-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:w.title})]}),e.jsxs(I,{className:"pt-0",children:[e.jsx(Ye,{className:"text-gray-600 dark:text-gray-300 line-clamp-3 mb-4",children:w.excerpt}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(me,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),w.author]}),e.jsx(L,{asChild:!0,variant:"ghost",size:"sm",className:"group/btn",children:e.jsxs(W,{to:`/articles/${w.id}`,children:[s?"اقرأ المزيد":"Lire plus",e.jsx(Vt,{className:"w-4 h-4 ml-1 rtl:ml-0 rtl:mr-1 group-hover/btn:translate-x-1 rtl:group-hover/btn:-translate-x-1 transition-transform"})]})})]})]})]}):e.jsx($,{className:"group hover:shadow-lg transition-all duration-300 border-0 bg-white dark:bg-gray-800",children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"md:w-1/3",children:e.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[e.jsx(Bt,{src:w.image,alt:w.title,fallback:Ct.article,className:"w-full h-48 md:h-32 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute top-2 left-2 rtl:left-auto rtl:right-2",children:e.jsx("span",{className:"px-2 py-1 bg-primary-600 text-white text-xs font-medium rounded-full",children:w.category})})]})}),e.jsxs("div",{className:"md:w-2/3 space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 space-x-4 rtl:space-x-reverse",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),_(w.publishedAt)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),w.readTime," ",s?"دقائق":"min"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),w.author]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:w.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 line-clamp-2",children:w.excerpt}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:w.tags.slice(0,3).map((D,C)=>e.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:["#",D]},C))}),e.jsx(L,{asChild:!0,variant:"ghost",size:"sm",className:"group/btn",children:e.jsxs(W,{to:`/articles/${w.id}`,children:[s?"اقرأ المزيد":"Lire plus",e.jsx(Vt,{className:"w-4 h-4 ml-1 rtl:ml-0 rtl:mr-1 group-hover/btn:translate-x-1 rtl:group-hover/btn:-translate-x-1 transition-transform"})]})})]})]})]})})})},w.id))}),g.length===0&&e.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx(kt,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:s?"لم يتم العثور على مقالات":"Aucun article trouvé"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s?"جرب تغيير مصطلحات البحث أو الفئة":"Essayez de modifier les termes de recherche ou la catégorie"})]}),g.length>0&&e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-center mt-12",children:e.jsx(L,{size:"lg",variant:"outline",children:s?"تحميل المزيد":"Charger plus d'articles"})})]})})},Lg=()=>{const{t}=Wt(),{isRTL:s,getLocalizedText:r}=te(),{id:a}=$c(),[n,l]=b.useState(null),[i,o]=b.useState(!0),[d,m]=b.useState(null);b.useEffect(()=>{c()},[a]);const c=async()=>{var y;try{o(!0),m(null);const f=await Dg.getArticleById(a);l(f.article)}catch(f){console.error("Erreur lors du chargement de l'article:",f),m(((y=f.response)==null?void 0:y.status)===404?"Article non trouvé":"Erreur de chargement")}finally{o(!1)}},u=y=>new Date(y).toLocaleDateString(s?"ar-MA":"fr-FR",{year:"numeric",month:"long",day:"numeric"}),h=async()=>{if(navigator.share)try{await navigator.share({title:r({fr:n.title_fr,ar:n.title_ar}),url:window.location.href})}catch{console.log("Partage annulé")}else navigator.clipboard.writeText(window.location.href)};return i?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(ne,{size:"lg"})}):d||!n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"404"}),e.jsx("p",{className:"text-gray-600 mb-8",children:d||(s?"المقال غير موجود":"Article non trouvé")}),e.jsx(W,{to:"/articles",className:"btn-primary",children:s?"العودة إلى المقالات":"Retour aux articles"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs(W,{to:"/articles",className:"inline-flex items-center text-primary-600 hover:text-primary-700",children:[e.jsx(et,{className:`w-4 h-4 ${s?"ml-2 rotate-180":"mr-2"}`}),s?"العودة إلى المقالات":"Retour aux articles"]})})}),e.jsxs("article",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6 leading-tight",children:r({fr:n.title_fr,ar:n.title_ar})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-6 rtl:space-x-reverse text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),e.jsx("span",{children:u(n.published_at||n.created_at)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),e.jsxs("span",{children:[n.author_first_name," ",n.author_last_name]})]})]}),e.jsxs("button",{onClick:h,className:"flex items-center space-x-2 rtl:space-x-reverse text-gray-500 hover:text-primary-600 transition-colors",children:[e.jsx(fn,{className:"w-5 h-5"}),e.jsx("span",{children:s?"مشاركة":"Partager"})]})]})]}),n.image_url&&e.jsx("div",{className:"mb-8",children:e.jsx("img",{src:n.image_url,alt:r({fr:n.title_fr,ar:n.title_ar}),className:"w-full h-64 md:h-96 object-cover rounded-lg shadow-lg"})}),e.jsx("div",{className:"prose prose-lg max-w-none",children:e.jsx("div",{className:`text-gray-700 leading-relaxed ${s?"text-right":"text-left"}`,dangerouslySetInnerHTML:{__html:r({fr:n.content_fr,ar:n.content_ar}).replace(/\n/g,"<br>")}})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs(W,{to:"/articles",className:"btn-outline-primary",children:[e.jsx(et,{className:`w-4 h-4 ${s?"ml-2 rotate-180":"mr-2"}`}),s?"المزيد من المقالات":"Plus d'articles"]}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsx("span",{className:"text-gray-500",children:s?"شارك هذا المقال:":"Partager cet article :"}),e.jsx("button",{onClick:h,className:"btn-primary btn-sm",children:e.jsx(fn,{className:"w-4 h-4"})})]})]})})]}),e.jsx("section",{className:"bg-white py-12 mt-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-8 text-center",children:s?"مقالات ذات صلة":"Articles similaires"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(y=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"aspect-video bg-gray-200 rounded-t-lg"}),e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s?`مقال مشابه ${y}`:`Article similaire ${y}`}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s?"وصف مختصر للمقال المشابه...":"Description courte de l'article similaire..."}),e.jsx(W,{to:`/articles/${y}`,className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:t("articles.readMore")})]})]},y))})]})})]})},Or=({documentType:t,label:s,description:r,required:a=!1,onFileChange:n,value:l,error:i})=>{const{isRTL:o}=te(),[d,m]=b.useState(!1),c=p=>{const j=["application/pdf","image/jpeg","image/jpg","image/png"];if(p.size>5242880){alert(o?"حجم الملف كبير جداً (الحد الأقصى 5MB)":"Fichier trop volumineux (max 5MB)");return}if(!j.includes(p.type)){alert(o?"نوع الملف غير مدعوم (PDF, JPG, PNG فقط)":"Type de fichier non supporté (PDF, JPG, PNG uniquement)");return}n(p)},u=p=>{p.preventDefault(),m(!1);const x=p.dataTransfer.files[0];x&&c(x)},h=p=>{p.preventDefault(),m(!0)},y=p=>{p.preventDefault(),m(!1)},f=()=>{n(null)};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s," ",a&&e.jsx("span",{className:"text-red-500",children:"*"})]}),r&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r}),l?e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx(Gc,{className:"w-5 h-5 text-primary-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(l.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:f,className:"text-red-500 hover:text-red-700 transition-colors",children:e.jsx(Ht,{className:"w-4 h-4"})})]})}):e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer ${d?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":i?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600 hover:border-primary-400 dark:hover:border-primary-500"}`,onDrop:u,onDragOver:h,onDragLeave:y,onClick:()=>document.getElementById(`file-${t}`).click(),children:[e.jsx(nr,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:o?"انقر لاختيار ملف أو اسحب وأفلت":"Cliquez pour sélectionner ou glissez-déposez"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"PDF, JPG, PNG (max 5MB)"}),e.jsx("input",{id:`file-${t}`,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:p=>{const x=p.target.files[0];x&&c(x)},className:"hidden"})]}),i&&e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse text-red-600 text-sm",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:i})]})]})},$g=()=>{const{isRTL:t}=te(),{isAuthenticated:s,user:r}=oe(),a=ct(),[n,l]=b.useState(!1),[i,o]=b.useState(1),[d,m]=b.useState(!1),[c,u]=b.useState([]),[h,y]=b.useState(!1),f=b.useRef(null),[p,x]=b.useState(!1),[j,v]=b.useState({carnet_medical:null,acte_naissance:null,certificat_medical:null}),[k,N]=b.useState({});if(b.useEffect(()=>{s&&r&&(r.role==="parent"?a("/mon-espace",{replace:!0}):(r.role==="admin"||r.role==="staff")&&a("/dashboard",{replace:!0}))},[s,r,a]),b.useEffect(()=>{d&&(async()=>{try{const q=await B.get("/api/children/available");u(q.data.children||[])}catch(q){console.error("Erreur récupération enfants:",q)}})()},[d]),s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ne,{size:"lg"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:t?"جاري التوجيه...":"Redirection en cours..."})]})});const{register:g,handleSubmit:_,formState:{errors:w},watch:P,reset:D}=lr(),C=(A,q)=>{v(M=>({...M,[A]:q})),q&&k[A]&&N(M=>({...M,[A]:null}))},S=()=>{const A={};return j.carnet_medical||(A.carnet_medical=t?"الدفتر الطبي مطلوب":"Le carnet médical est requis"),j.acte_naissance||(A.acte_naissance=t?"شهادة الميلاد مطلوبة":"L'acte de naissance est requis"),j.certificat_medical||(A.certificat_medical=t?"الشهادة الطبية مطلوبة":"Le certificat médical est requis"),N(A),Object.keys(A).length===0},R=()=>{if(f.current){const{scrollTop:A,scrollHeight:q,clientHeight:M}=f.current,O=A+M>=q-10;y(O)}},H=async A=>{var q,M;try{if(l(!0),d){const O={first_name:A.parent_first_name,last_name:A.parent_last_name,email:A.parent_email,password:A.parent_password,phone:A.parent_phone,role:"parent",child_id:A.selected_child_id},X=await B.post("/auth/register-parent-existing-child",O);U.success(t?"تم إنشاء الحساب بنجاح!":"Compte créé avec succès!"),setTimeout(()=>{a("/login")},2e3)}else{const O=new FormData;O.append("child_first_name",A.child_first_name),O.append("child_last_name",A.child_last_name),O.append("birth_date",A.birth_date),O.append("gender",A.gender),O.append("medical_info",A.medical_info||"");const X=p&&A.emergency_contact_name?A.emergency_contact_name:`${A.parent_first_name} ${A.parent_last_name}`,K=p&&A.emergency_contact_phone?A.emergency_contact_phone:A.parent_phone;O.append("emergency_contact_name",X),O.append("emergency_contact_phone",K),O.append("parent_first_name",A.parent_first_name),O.append("parent_last_name",A.parent_last_name),O.append("parent_email",A.parent_email),O.append("parent_password",A.parent_password),O.append("parent_phone",A.parent_phone),O.append("enrollment_date",A.enrollment_date),O.append("lunch_assistance",A.lunch_assistance||!1),O.append("regulation_accepted",A.regulation_accepted||!1),O.append("notes",A.notes||""),j.carnet_medical&&O.append("carnet_medical",j.carnet_medical),j.acte_naissance&&O.append("acte_naissance",j.acte_naissance),j.certificat_medical&&O.append("certificat_medical",j.certificat_medical);const ue=await B.post("/api/enrollments",O,{headers:{"Content-Type":"multipart/form-data"}});U.success(t?"تم التسجيل بنجاح!":"Inscription réussie !"),setTimeout(()=>{a("/login")},2e3)}D(),o(1),v({carnet_medical:null,acte_naissance:null,certificat_medical:null}),y(!1)}catch(O){console.error("Erreur lors de l'inscription:",O),U.error(((M=(q=O.response)==null?void 0:q.data)==null?void 0:M.error)||(t?"خطأ في التسجيل":"Erreur lors de l'inscription"))}finally{l(!1)}},z=()=>{if(i===3&&!d&&!S()){U.error(t?"يرجى تحميل جميع الوثائق المطلوبة":"Veuillez télécharger tous les documents requis");return}o(d&&i===2?4:A=>Math.min(A+1,5))},T=()=>{o(d&&i===4?2:A=>Math.max(A-1,1))};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:t?"تسجيل طفل جديد":"Inscription d'un enfant"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:t?"املأ النموذج أدناه لتسجيل طفلك في حضانتنا":"Remplissez le formulaire ci-dessous pour inscrire votre enfant dans notre crèche"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:(d?[1,2,4,5]:[1,2,3,4,5]).map(A=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${i===A||i>A?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:A}),A<5&&e.jsx("div",{className:`w-8 h-1 mx-1 ${i>A?"bg-primary-600":"bg-gray-200 dark:bg-gray-700"}`})]},A))}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i===1&&(d?t?"اختيار الطفل":"Sélection de l'enfant":t?"معلومات الطفل":"Informations de l'enfant"),i===2&&(t?"معلومات الوالدين":"Informations des parents"),i===3&&(t?"الوثائق المطلوبة":"Documents requis"),i===4&&(t?"الموافقة على القوانين":"Acceptation du règlement"),i===5&&(t?"التأكيد":"Confirmation")]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"p-8",children:[i===1&&e.jsx("div",{className:"mb-8",children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(le,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"نوع التسجيل":"Type d'inscription"]})}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t?"هل طفلك مسجل بالفعل في الحضانة؟":"Votre enfant est-il déjà inscrit à la crèche ?"}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsx(L,{type:"button",variant:d?"outline":"default",onClick:()=>m(!1),className:"flex-1",children:t?"لا، تسجيل جديد":"Non, nouvelle inscription"}),e.jsx(L,{type:"button",variant:d?"default":"outline",onClick:()=>m(!0),className:"flex-1",children:t?"نعم، طفلي مسجل بالفعل":"Oui, mon enfant est déjà inscrit"})]}),d&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:t?"سنحتاج فقط لإنشاء حسابك الشخصي وربطه بطفلك المسجل بالفعل.":"Nous aurons seulement besoin de créer votre compte personnel et de le lier à votre enfant déjà inscrit."})})]})})]})}),e.jsxs("form",{onSubmit:_(H),children:[i===1&&!d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse mb-6",children:[e.jsx(le,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t?"معلومات الطفل":"Informations de l'enfant"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"الاسم الأول":"Prénom"," *"]}),e.jsx("input",{type:"text",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.child_first_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل الاسم الأول":"Entrez le prénom",...g("child_first_name",{required:t?"الاسم الأول مطلوب":"Le prénom est requis"})}),w.child_first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.child_first_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"اسم العائلة":"Nom de famille"," *"]}),e.jsx("input",{type:"text",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.child_last_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل اسم العائلة":"Entrez le nom de famille",...g("child_last_name",{required:t?"اسم العائلة مطلوب":"Le nom de famille est requis"})}),w.child_last_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.child_last_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"تاريخ الميلاد":"Date de naissance"," *"]}),e.jsx("input",{type:"date",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.birth_date?"border-red-500":"border-gray-300 dark:border-gray-600"}`,...g("birth_date",{required:t?"تاريخ الميلاد مطلوب":"La date de naissance est requise"})}),w.birth_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.birth_date.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"الجنس":"Sexe"," *"]}),e.jsxs("select",{className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.gender?"border-red-500":"border-gray-300 dark:border-gray-600"}`,...g("gender",{required:t?"الجنس مطلوب":"Le sexe est requis"}),children:[e.jsx("option",{value:"",children:t?"اختر الجنس":"Sélectionner le sexe"}),e.jsx("option",{value:"M",children:t?"ذكر":"Masculin"}),e.jsx("option",{value:"F",children:t?"أنثى":"Féminin"})]}),w.gender&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.gender.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"معلومات طبية":"Informations médicales"}),e.jsx("textarea",{rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:t?"أي معلومات طبية مهمة...":"Toute information médicale importante...",...g("medical_info")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:t?"جهة الاتصال للطوارئ":"Contact d'urgence"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{htmlFor:"differentContact",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t?"شخص مختلف عن الوالد":"Personne différente du parent"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",id:"differentContact",checked:p,onChange:A=>x(A.target.checked),className:"sr-only"}),e.jsx("label",{htmlFor:"differentContact",className:`flex items-center cursor-pointer transition-colors duration-200 ${p?"text-primary-600":"text-gray-400"}`,children:e.jsx("div",{className:`relative w-12 h-6 rounded-full transition-colors duration-200 ${p?"bg-primary-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("div",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-200 ${p?"translate-x-6":"translate-x-0"}`})})})]})]}),!p&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:t?"سيتم استخدام معلومات الوالد كجهة اتصال للطوارئ":"Les informations du parent seront utilisées comme contact d'urgence"})})]}),p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"اسم جهة الاتصال للطوارئ":"Contact d'urgence - Nom"," *"]}),e.jsx("input",{type:"text",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.emergency_contact_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"اسم الشخص للاتصال":"Nom de la personne à contacter",...g("emergency_contact_name",{required:p?t?"اسم جهة الاتصال مطلوب":"Le nom du contact est requis":!1})}),w.emergency_contact_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.emergency_contact_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"هاتف جهة الاتصال للطوارئ":"Contact d'urgence - Téléphone"," *"]}),e.jsx("input",{type:"tel",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.emergency_contact_phone?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"رقم الهاتف":"Numéro de téléphone",...g("emergency_contact_phone",{required:p?t?"رقم الهاتف مطلوب":"Le numéro de téléphone est requis":!1})}),w.emergency_contact_phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.emergency_contact_phone.message})]})]})]}),i===1&&d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse mb-6",children:[e.jsx(le,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t?"اختيار الطفل":"Sélection de l'enfant"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"اختر طفلك من القائمة":"Sélectionnez votre enfant dans la liste"," *"]}),e.jsxs("select",{className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.selected_child_id?"border-red-500":"border-gray-300 dark:border-gray-600"}`,...g("selected_child_id",{required:t?"يجب اختيار طفل":"Vous devez sélectionner un enfant"}),children:[e.jsx("option",{value:"",children:t?"اختر الطفل...":"Sélectionner un enfant..."}),c.map(A=>e.jsxs("option",{value:A.id,children:[A.first_name," ",A.last_name," - ",t?"العمر:":"Âge:"," ",A.age]},A.id))]}),w.selected_child_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.selected_child_id.message})]}),c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ye,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t?"لا توجد أطفال متاحين للربط":"Aucun enfant disponible pour la liaison"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:t?"تواصل مع الإدارة":"Contactez l'administration"})]})]}),i===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse mb-6",children:[e.jsx(me,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t?"معلومات الوالدين":"Informations des parents"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"الاسم الأول للوالد":"Prénom du parent"," *"]}),e.jsx("input",{type:"text",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.parent_first_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"الاسم الأول":"Prénom",...g("parent_first_name",{required:t?"الاسم الأول مطلوب":"Le prénom est requis"})}),w.parent_first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.parent_first_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"اسم العائلة للوالد":"Nom du parent"," *"]}),e.jsx("input",{type:"text",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.parent_last_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"اسم العائلة":"Nom de famille",...g("parent_last_name",{required:t?"اسم العائلة مطلوب":"Le nom de famille est requis"})}),w.parent_last_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.parent_last_name.message})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"البريد الإلكتروني":"Email"," *"]}),e.jsx("input",{type:"email",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.parent_email?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"البريد الإلكتروني":"votre.email@exemple.com",...g("parent_email",{required:t?"البريد الإلكتروني مطلوب":"L'email est requis"})}),w.parent_email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.parent_email.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"كلمة المرور":"Mot de passe"," *"]}),e.jsx("input",{type:"password",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.parent_password?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"كلمة المرور (6 أحرف على الأقل)":"Mot de passe (minimum 6 caractères)",...g("parent_password",{required:t?"كلمة المرور مطلوبة":"Le mot de passe est requis",minLength:{value:6,message:t?"كلمة المرور يجب أن تحتوي على 6 أحرف على الأقل":"Le mot de passe doit contenir au moins 6 caractères"}})}),w.parent_password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.parent_password.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"رقم الهاتف":"Numéro de téléphone"," *"]}),e.jsx("input",{type:"tel",className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.parent_phone?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"رقم الهاتف":"+216 XX XXX XXX",...g("parent_phone",{required:t?"رقم الهاتف مطلوب":"Le numéro de téléphone est requis"})}),w.parent_phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.parent_phone.message})]}),!d&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"تاريخ التسجيل المرغوب":"Date d'inscription souhaitée"," *"]}),e.jsx("input",{type:"date",defaultValue:new Date().toISOString().split("T")[0],className:`w-full px-4 py-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w.enrollment_date?"border-red-500":"border-gray-300 dark:border-gray-600"}`,...g("enrollment_date",{required:d?!1:t?"تاريخ التسجيل مطلوب":"La date d'inscription est requise"})}),w.enrollment_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.enrollment_date.message})]}),!d&&e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("input",{type:"checkbox",id:"lunch_assistance",className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500",...g("lunch_assistance")}),e.jsx("label",{htmlFor:"lunch_assistance",className:"flex-1 cursor-pointer",children:e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Wc,{className:"w-5 h-5 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t?"المساعدة في الغداء":"Assistance au déjeuner"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:t?"رسوم إضافية: 20 دينار تونسي شهرياً":"Frais supplémentaires : 20 TND par mois"})]})]})})]})})]}),i===3&&!d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse mb-6",children:[e.jsx(nr,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t?"الوثائق المطلوبة":"Documents requis"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[e.jsx(ye,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-300",children:t?"معلومات مهمة":"Informations importantes"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mt-1",children:t?"يرجى تحميل جميع الوثائق المطلوبة. الملفات المقبولة: PDF, JPG, PNG (حتى 5MB)":"Veuillez télécharger tous les documents requis. Formats acceptés : PDF, JPG, PNG (max 5MB)"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Or,{documentType:"carnet_medical",label:t?"الدفتر الطبي":"Carnet médical",description:t?"الدفتر الطبي للطفل مع التطعيمات":"Carnet de santé de l'enfant avec vaccinations",required:!0,onFileChange:A=>C("carnet_medical",A),value:j.carnet_medical,error:k.carnet_medical}),e.jsx(Or,{documentType:"acte_naissance",label:t?"شهادة الميلاد":"Acte de naissance",description:t?"شهادة الميلاد الأصلية أو نسخة مصدقة":"Acte de naissance original ou copie certifiée",required:!0,onFileChange:A=>C("acte_naissance",A),value:j.acte_naissance,error:k.acte_naissance}),e.jsx(Or,{documentType:"certificat_medical",label:t?"الشهادة الطبية":"Certificat médical",description:t?"شهادة طبية تؤكد عدم وجود أمراض معدية":"Certificat médical attestant l'absence de maladies contagieuses",required:!0,onFileChange:A=>C("certificat_medical",A),value:j.certificat_medical,error:k.certificat_medical})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:t?"النظام الداخلي للحضانة":"Règlement intérieur de la crèche"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:t?"قم بتحميل ومراجعة النظام الداخلي قبل المتابعة":"Téléchargez et consultez le règlement avant de continuer"})]}),e.jsxs("button",{type:"button",onClick:()=>window.open("/documents/reglement-interieur.pdf","_blank"),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(dt,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),t?"تحميل":"Télécharger"]})]})}),e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[e.jsx(ye,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-300 mb-1",children:t?"📋 تذكير مهم":"📋 Rappel important"}),e.jsx("p",{className:"text-orange-800 dark:text-orange-200 text-sm",children:t?"الوثائق المرفوعة هنا للمراجعة الأولية. يجب إحضار النسخ الأصلية والنظام الداخلي موقع يوم التسجيل النهائي في الحضانة.":"Les documents téléchargés ici sont pour l'examen préliminaire. Vous devez apporter les originaux et le règlement intérieur signé le jour de l'inscription définitive à la crèche."})]})]})})]}),i===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse mb-6",children:[e.jsx(Ce,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t?"الموافقة على القوانين الداخلية":"Acceptation du règlement intérieur"})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{ref:f,onScroll:R,className:"h-64 overflow-y-auto p-4 text-sm text-gray-700 dark:text-gray-300 space-y-3 bg-white dark:bg-gray-800",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t?"القوانين الداخلية لحضانة ميما الغالية":"Règlement intérieur de la crèche Mima Elghalia"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200",children:t?"1. ساعات العمل":"1. Horaires d'ouverture"}),e.jsx("p",{children:t?"الحضانة مفتوحة من الاثنين إلى الجمعة من 7:00 إلى 18:00، والسبت من 8:00 إلى 12:00":"La crèche est ouverte du lundi au vendredi de 7h00 à 18h00, et le samedi de 8h00 à 12h00"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200",children:t?"2. الفئة العمرية":"2. Tranche d'âge"}),e.jsx("p",{children:t?"نستقبل الأطفال من عمر شهرين إلى 3 سنوات":"Nous accueillons les enfants de 2 mois à 3 ans"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200",children:t?"3. الصحة والسلامة":"3. Santé et sécurité"}),e.jsx("p",{children:t?"يجب تقديم شهادة طبية حديثة عند التسجيل. الأطفال المرضى لا يُقبلون في الحضانة لحماية الآخرين.":"Un certificat médical récent est requis lors de l'inscription. Les enfants malades ne sont pas acceptés pour protéger les autres."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200",children:t?"4. الدفع":"4. Paiement"}),e.jsx("p",{children:t?"الرسوم الشهرية مستحقة في بداية كل شهر. التأخير في الدفع قد يؤدي إلى رسوم إضافية.":"Les frais mensuels sont dus en début de mois. Un retard de paiement peut entraîner des frais supplémentaires."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200",children:t?"5. المسؤولية":"5. Responsabilité"}),e.jsx("p",{children:t?"الحضانة غير مسؤولة عن الأشياء الشخصية المفقودة أو التالفة. يُرجى عدم إحضار أشياء ثمينة.":"La crèche n'est pas responsable des objets personnels perdus ou endommagés. Veuillez ne pas apporter d'objets de valeur."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200",children:t?"6. الإلغاء":"6. Annulation"}),e.jsx("p",{children:t?"يجب إشعار الحضانة قبل شهر واحد على الأقل في حالة الرغبة في إلغاء التسجيل.":"Un préavis d'un mois minimum est requis pour toute annulation d'inscription."})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("label",{className:"flex items-start space-x-3 rtl:space-x-reverse cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500",...g("regulation_accepted",{required:t?"يجب الموافقة على القوانين الداخلية":"Vous devez accepter le règlement intérieur"}),disabled:!h}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t?"أوافق على القوانين الداخلية لحضانة ميما الغالية":"J'accepte le règlement intérieur de la crèche Mima Elghalia"}),!h&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:t?"يرجى قراءة القوانين كاملة للمتابعة":"Veuillez lire entièrement le règlement pour continuer"})]})]}),w.regulation_accepted&&e.jsx("p",{className:"form-error mt-2",children:w.regulation_accepted.message})]})]})]}),i===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse mb-6",children:[e.jsx(je,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t?"مراجعة الطلب":"Révision de la demande"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t?"معلومات الطفل:":"Informations de l'enfant :"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:t?"الاسم:":"Nom :"}),e.jsxs("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 font-medium text-gray-900 dark:text-white",children:[P("child_first_name")," ",P("child_last_name")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:t?"تاريخ الميلاد:":"Date de naissance :"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 font-medium text-gray-900 dark:text-white",children:P("birth_date")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:t?"الجنس:":"Sexe :"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 font-medium text-gray-900 dark:text-white",children:P("gender")==="M"?t?"ذكر":"Masculin":t?"أنثى":"Féminin"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:t?"تاريخ التسجيل:":"Date d'inscription :"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 font-medium text-gray-900 dark:text-white",children:P("enrollment_date")})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:t?"جهة الاتصال للطوارئ:":"Contact d'urgence :"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 font-medium text-gray-900 dark:text-white",children:p&&P("emergency_contact_name")?`${P("emergency_contact_name")} - ${P("emergency_contact_phone")}`:`${P("parent_first_name")} ${P("parent_last_name")} - ${P("parent_phone")} ${t?"(الوالد)":"(Parent)"}`})]})]})]}),e.jsxs("div",{className:"bg-primary-50 dark:bg-primary-900/20 rounded-lg p-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t?"الخيارات المحددة:":"Options sélectionnées :"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(je,{className:`w-4 h-4 ${P("lunch_assistance")?"text-green-600":"text-gray-400"}`}),e.jsxs("span",{className:P("lunch_assistance")?"text-green-800 dark:text-green-300 font-medium":"text-gray-600 dark:text-gray-400",children:[t?"المساعدة في الغداء":"Assistance au déjeuner",P("lunch_assistance")&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1 rtl:ml-0 rtl:mr-1",children:"(+50 TND/mois)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(je,{className:`w-4 h-4 ${P("regulation_accepted")?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:P("regulation_accepted")?"text-green-800 dark:text-green-300 font-medium":"text-gray-600 dark:text-gray-400",children:t?"الموافقة على القوانين الداخلية":"Règlement intérieur accepté"})]})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsx("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:t?"سيتم مراجعة طلبكم من قبل فريقنا وسنتواصل معكم قريباً.":"Votre demande sera examinée par notre équipe et nous vous recontacterons bientôt."})}),e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[e.jsx(ye,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-300 mb-2",children:t?"⚠️ تذكير مهم":"⚠️ Rappel important"}),e.jsx("p",{className:"text-orange-800 dark:text-orange-200 text-sm",children:t?"يجب عليكم إحضار جميع الوثائق الأصلية (الدفتر الطبي، شهادة الميلاد، الشهادة الطبية) والنظام الداخلي موقع يوم التسجيل النهائي في الحضانة للتحقق منها.":"Vous devez apporter tous les documents originaux (carnet médical, acte de naissance, certificat médical) et le règlement intérieur signé le jour de l'inscription définitive à la crèche pour vérification."}),e.jsx("p",{className:"text-orange-700 dark:text-orange-300 text-xs mt-2 font-medium",children:t?"📋 الوثائق المرفوعة هنا هي للمراجعة الأولية فقط":"📋 Les documents téléchargés ici sont uniquement pour l'examen préliminaire"})]})]})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[i>1&&e.jsxs("button",{type:"button",onClick:T,className:"flex items-center px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(et,{className:`w-4 h-4 mr-2 rtl:ml-2 rtl:mr-0 ${t?"rotate-180":""}`}),t?"السابق":"Précédent"]}),e.jsx("div",{className:i===1?"ml-auto rtl:ml-0 rtl:mr-auto":"",children:i<5?e.jsxs("button",{type:"button",onClick:z,className:"flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:i===4&&!h,children:[t?"التالي":"Suivant",e.jsx(Vt,{className:`w-4 h-4 ml-2 rtl:ml-0 rtl:mr-2 ${t?"rotate-180":""}`})]}):e.jsx("button",{type:"submit",disabled:n,className:"flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?e.jsx(ne,{size:"sm",color:"white"}):e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:`w-4 h-4 ${t?"ml-2":"mr-2"}`}),t?"إرسال الطلب":"Envoyer la demande"]})})})]})]})]})}),e.jsx("div",{className:"mt-8 text-center text-gray-600 dark:text-gray-400",children:e.jsxs("p",{className:"text-sm",children:[t?"هل تحتاجون مساعدة؟ ":"Besoin d'aide ? ",e.jsx("a",{href:"/contact",className:"text-primary-600 hover:text-primary-700",children:t?"تواصلوا معنا":"Contactez-nous"})]})})]})})},Ig=()=>{const{isRTL:t}=te(),[s,r]=b.useState(!1),[a,n]=b.useState(!1),[l,i]=b.useState(null),[o,d]=b.useState(!0);b.useEffect(()=>{(async()=>{d(!0);try{const y=(await B.get("/api/contact")).data;if(console.log("📋 Données contact API:",y),y.success&&y.contact){const f={address:t?y.contact.address_ar:y.contact.address,phone:y.contact.phone,email:y.contact.email,title:t?"تواصل معنا":"Contactez-nous",subtitle:t?"نحن هنا للإجابة على جميع أسئلتكم ومساعدتكم في رحلة طفلكم التعليمية":"Nous sommes là pour répondre à toutes vos questions et vous accompagner dans le parcours éducatif de votre enfant",hours:t?y.contact.hours_ar:y.contact.hours,nursery_name:t?"حضانة ميما الغالية":"Crèche Mima Elghalia",map_title:t?"موقعنا على الخريطة":"Notre localisation",map_description:t?"تجدونا في هذا الموقع بمدنين":"Vous nous trouverez à cette adresse à Médenine",google_maps_button:t?"فتح في خرائط جوجل":"Ouvrir dans Google Maps",latitude:"33.3407",longitude:"10.4899"};i(f),console.log("✅ Données contact chargées depuis l'API")}else throw new Error("Données API invalides")}catch(h){console.error("Erreur chargement contact:",h),i({address:t?"8 شارع بنزرت، مدنين 4100، تونس":"8 Rue Bizerte, Medenine 4100, Tunisie",phone:"+216 25 95 35 32",email:"contact@mimaelghalia.tn",title:t?"تواصل معنا":"Contactez-nous",subtitle:t?"نحن هنا للإجابة على جميع أسئلتكم ومساعدتكم في رحلة طفلكم التعليمية":"Nous sommes là pour répondre à toutes vos questions et vous accompagner dans le parcours éducatif de votre enfant",hours:t?"الإثنين - الجمعة: 07:00-18:00، السبت: 08:00-14:00":"Lun - Ven: 07:00-18:00, Sam: 08:00-14:00",nursery_name:t?"حضانة ميما الغالية":"Crèche Mima Elghalia",map_title:t?"موقعنا على الخريطة":"Notre localisation",map_description:t?"تجدونا في هذا الموقع بمدنين":"Vous nous trouverez à cette adresse à Médenine",google_maps_button:t?"فتح في خرائط جوجل":"Ouvrir dans Google Maps",latitude:"33.3407",longitude:"10.4899"}),console.log("⚠️ Utilisation des données par défaut")}finally{d(!1)}})()},[t]);const m=async u=>{u.preventDefault(),r(!0);try{await new Promise(h=>setTimeout(h,1e3)),n(!0),U.success(t?"تم إرسال رسالتك بنجاح":"Message envoyé avec succès"),setTimeout(()=>{n(!1),u.target.reset()},3e3)}catch{U.error(t?"خطأ في إرسال الرسالة":"Erreur lors de l'envoi du message")}finally{r(!1)}};if(o)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(ne,{size:"lg"})});const c=l||defaultData;return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(F.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:c.title}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:c.subtitle})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[e.jsx(F.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"space-y-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:t?"معلومات الاتصال":"Informations de contact"}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx($,{className:"group hover:shadow-lg transition-all duration-300 border-0 bg-white dark:bg-gray-800",children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4 rtl:space-x-reverse",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg",children:e.jsx(Ft,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:t?"العنوان":"Adresse"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:c.address})]})]})})}),e.jsx($,{className:"group hover:shadow-lg transition-all duration-300 border-0 bg-white dark:bg-gray-800",children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4 rtl:space-x-reverse",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg",children:e.jsx(Re,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:t?"الهاتف":"Téléphone"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",dir:"ltr",children:c.phone})]})]})})}),e.jsx($,{className:"group hover:shadow-lg transition-all duration-300 border-0 bg-white dark:bg-gray-800",children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4 rtl:space-x-reverse",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:t?"البريد الإلكتروني":"Email"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:c.email})]})]})})}),e.jsx($,{className:"group hover:shadow-lg transition-all duration-300 border-0 bg-white dark:bg-gray-800",children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4 rtl:space-x-reverse",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg",children:e.jsx(ae,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:t?"ساعات العمل":"Horaires"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:c.hours})]})]})})})]})]})}),e.jsx(F.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:e.jsxs($,{className:"border-0 bg-white dark:bg-gray-800 shadow-xl",children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(ml,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"أرسل لنا رسالة":"Envoyez-nous un message"]})}),e.jsx(I,{children:a?e.jsxs(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center py-8",children:[e.jsx(je,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:t?"تم إرسال رسالتك!":"Message envoyé !"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t?"شكراً لك، سنتواصل معك قريباً":"Merci, nous vous répondrons bientôt"})]}):e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"الاسم":"Nom"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"البريد الإلكتروني":"Email"}),e.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"الموضوع":"Sujet"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"الرسالة":"Message"}),e.jsx("textarea",{rows:"5",required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]}),e.jsx(L,{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105",children:s?e.jsx(ne,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"إرسال الرسالة":"Envoyer le message"]})})]})})]})})]}),e.jsx(F.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mt-16",children:e.jsxs($,{className:"overflow-hidden border-0 bg-white dark:bg-gray-800 shadow-xl",children:[e.jsxs(J,{children:[e.jsxs(Q,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(Br,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),c.map_title]}),e.jsx(Ye,{className:"text-gray-600 dark:text-gray-300",children:c.map_description})]}),e.jsx(I,{className:"p-0",children:e.jsxs("div",{className:"relative w-full h-96 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden",children:[e.jsx("iframe",{src:`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d655.04!2d${c.longitude}!3d${c.latitude}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f18.1!3m3!1m2!1s0x125a50a5b1234567%3A0x987654321abcdef0!2s${encodeURIComponent(c.address)}!5e0!3m2!1s${t?"ar":"fr"}!2stn!4v1698765432100!5m2!1s${t?"ar":"fr"}!2stn`,width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:t?"موقع الحضانة على الخريطة":"Localisation de la crèche",className:"w-full h-full"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white px-4 py-2 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-bold text-center",children:c.nursery_name}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-l-transparent border-r-transparent border-t-white dark:border-t-gray-800"})]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-red-500 text-white p-3 rounded-full shadow-lg border-4 border-white animate-pulse",children:e.jsx(le,{className:"w-6 h-6"})}),e.jsx("div",{className:"w-0 h-0 border-l-[8px] border-r-[8px] border-t-[12px] border-l-transparent border-r-transparent border-t-red-500 -mt-1"})]}),e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-16 h-16 bg-red-500 bg-opacity-20 rounded-full animate-ping"})]})}),e.jsx("div",{className:"absolute top-4 left-4 rtl:left-auto rtl:right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 max-w-xs",children:e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500 text-white",children:e.jsx(Ft,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm mb-1",children:c.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs leading-relaxed",children:c.address}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Re,{className:"w-3 h-3 text-red-500"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",dir:"ltr",children:c.phone})]})]})]})}),e.jsx("div",{className:"absolute bottom-4 right-4 rtl:right-auto rtl:left-4",children:e.jsxs(L,{onClick:()=>{const u=encodeURIComponent(c.address);window.open(`https://www.google.com/maps/search/${u}`,"_blank")},className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 shadow-lg",children:[e.jsx(Br,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),c.google_maps_button]})})]})})]})})]})})},Fg=()=>{const{t}=Wt(),{isRTL:s}=te(),[r,a]=b.useState(0),[n,l]=b.useState(!1),i={initial:{opacity:0,y:60},animate:{opacity:1,y:0},transition:{duration:.6}},o={animate:{transition:{staggerChildren:.1}}},d=[{id:"entrance",name:s?"المدخل الرئيسي":"Hall d'entrée",description:s?"مدخل واسع ومضيء مع استقبال ودود وبيئة آمنة":"Hall spacieux et lumineux avec accueil chaleureux et environnement sécurisé",image:"/images/tour/entrance.jpg",highlights:[s?"نظام أمان متطور":"Système de sécurité avancé",s?"استقبال دافئ":"Accueil chaleureux",s?"مساحة واسعة":"Espace spacieux"]},{id:"classroom",name:s?"قاعة التعلم":"Salle de classe",description:s?"قاعة مجهزة بأحدث الوسائل التعليمية والألعاب التطويرية":"Salle équipée avec les derniers outils pédagogiques et jeux de développement",image:"/images/tour/classroom.jpg",highlights:[s?"ألعاب تعليمية":"Jeux éducatifs",s?"إضاءة طبيعية":"Éclairage naturel",s?"أثاث آمن":"Mobilier sécurisé"]},{id:"playground",name:s?"منطقة اللعب":"Aire de jeux",description:s?"منطقة لعب آمنة ومحفزة مع ألعاب متنوعة لتطوير المهارات الحركية":"Aire de jeux sécurisée et stimulante avec jeux variés pour le développement moteur",image:"/images/tour/playground.jpg",highlights:[s?"ألعاب آمنة":"Jeux sécurisés",s?"أرضية مطاطية":"Sol en caoutchouc",s?"مراقبة مستمرة":"Surveillance continue"]},{id:"dining",name:s?"قاعة الطعام":"Salle à manger",description:s?"قاعة طعام نظيفة ومريحة حيث يتناول الأطفال وجباتهم الصحية":"Salle à manger propre et confortable où les enfants prennent leurs repas sains",image:"/images/tour/dining.jpg",highlights:[s?"وجبات صحية":"Repas sains",s?"طاولات مناسبة":"Tables adaptées",s?"بيئة نظيفة":"Environnement propre"]},{id:"nap",name:s?"غرفة النوم":"Salle de sieste",description:s?"غرفة هادئة ومريحة للراحة والنوم مع أسرة مريحة وبيئة مهدئة":"Salle calme et confortable pour le repos avec lits douillets et ambiance apaisante",image:"/images/tour/nap.jpg",highlights:[s?"أسرة مريحة":"Lits confortables",s?"إضاءة خافتة":"Éclairage tamisé",s?"هدوء تام":"Calme absolu"]},{id:"garden",name:s?"الحديقة":"Jardin",description:s?"حديقة جميلة وآمنة للأنشطة الخارجية والاستكشاف":"Beau jardin sécurisé pour les activités extérieures et l'exploration",image:"/images/tour/garden.jpg",highlights:[s?"نباتات طبيعية":"Plantes naturelles",s?"هواء نقي":"Air pur",s?"أنشطة خارجية":"Activités extérieures"]}],m=()=>{a(h=>(h+1)%d.length)},c=()=>{a(h=>(h-1+d.length)%d.length)},u=()=>{l(!n)};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(F.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:s?"جولة افتراضية":"Visite virtuelle"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:s?"اكتشف مرافق حضانة ميما الغالية من خلال جولة افتراضية شاملة":"Découvrez les installations de la crèche Mima Elghalia à travers une visite virtuelle complète"})]}),e.jsx(F.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"max-w-6xl mx-auto mb-12",children:e.jsxs($,{className:"overflow-hidden border-0 bg-white dark:bg-gray-800 shadow-2xl",children:[e.jsx(J,{className:"bg-gradient-to-r from-primary-600 to-secondary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-2xl font-bold",children:d[r].name}),e.jsx(Ye,{className:"text-primary-100",children:d[r].description})]}),e.jsx("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:e.jsxs("span",{className:"text-sm opacity-90",children:[r+1," / ",d.length]})})]})}),e.jsx(I,{className:"p-0 relative",children:e.jsxs("div",{className:"relative h-[500px] md:h-[600px] bg-gray-100 dark:bg-gray-700",children:[e.jsx(Bt,{src:d[r].image,alt:d[r].name,fallback:Ct.placeholder,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(ul,{className:"w-16 h-16 mx-auto mb-4 opacity-80"}),e.jsx("p",{className:"text-lg font-medium",children:s?"منظر 360 درجة":"Vue 360°"}),e.jsx("p",{className:"text-sm opacity-80",children:s?"انقر واسحب للاستكشاف":"Cliquez et glissez pour explorer"})]})}),e.jsx("button",{onClick:c,className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/80 dark:bg-gray-800/80 rounded-full flex items-center justify-center hover:bg-white dark:hover:bg-gray-800 transition-colors shadow-lg",children:e.jsx(et,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),e.jsx("button",{onClick:m,className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/80 dark:bg-gray-800/80 rounded-full flex items-center justify-center hover:bg-white dark:hover:bg-gray-800 transition-colors shadow-lg",children:e.jsx(Vt,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2",children:e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse bg-white/90 dark:bg-gray-800/90 rounded-full px-4 py-2 shadow-lg",children:[e.jsx("button",{onClick:u,className:"w-10 h-10 bg-primary-600 text-white rounded-full flex items-center justify-center hover:bg-primary-700 transition-colors",children:n?e.jsx(Kc,{className:"w-5 h-5"}):e.jsx(Yc,{className:"w-5 h-5 ml-0.5"})}),e.jsx("button",{className:"w-8 h-8 text-gray-600 dark:text-gray-300 hover:text-primary-600 transition-colors",children:e.jsx(Jc,{className:"w-5 h-5"})}),e.jsx("button",{className:"w-8 h-8 text-gray-600 dark:text-gray-300 hover:text-primary-600 transition-colors",children:e.jsx(Xc,{className:"w-5 h-5"})}),e.jsx("button",{className:"w-8 h-8 text-gray-600 dark:text-gray-300 hover:text-primary-600 transition-colors",children:e.jsx(Zc,{className:"w-5 h-5"})}),e.jsx("button",{className:"w-8 h-8 text-gray-600 dark:text-gray-300 hover:text-primary-600 transition-colors",children:e.jsx(Qc,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-lg p-3 shadow-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2 text-sm",children:s?"المميزات":"Points forts"}),e.jsx("ul",{className:"space-y-1",children:d[r].highlights.map((h,y)=>e.jsxs("li",{className:"flex items-center text-xs text-gray-600 dark:text-gray-300",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full mr-2 rtl:mr-0 rtl:ml-2"}),h]},y))})]})})]})})]})}),e.jsxs(F.div,{variants:o,initial:"initial",animate:"animate",className:"max-w-6xl mx-auto mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center",children:s?"استكشف جميع المرافق":"Explorez toutes nos installations"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:d.map((h,y)=>e.jsx(F.div,{variants:i,children:e.jsxs("button",{onClick:()=>a(y),className:`w-full p-3 rounded-xl transition-all duration-300 ${r===y?"bg-primary-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-primary-50 dark:hover:bg-gray-700 shadow-md"}`,children:[e.jsx("div",{className:"aspect-square mb-2 rounded-lg overflow-hidden",children:e.jsx(Bt,{src:h.image,alt:h.name,fallback:Ct.placeholder,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"text-sm font-medium text-center",children:h.name})]})},h.id))})]}),e.jsxs(F.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:s?"لماذا تختار حضانة ميما الغالية؟":"Pourquoi choisir la crèche Mima Elghalia ?"})}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:Oe,title:s?"شفافية كاملة":"Transparence totale",description:s?"يمكن للوالدين زيارة الحضانة في أي وقت والاطلاع على جميع المرافق":"Les parents peuvent visiter la crèche à tout moment et voir toutes les installations"},{icon:ed,title:s?"مرافق حديثة":"Installations modernes",description:s?"مرافق مجهزة بأحدث التقنيات والمعايير العالمية للسلامة":"Installations équipées des dernières technologies et normes de sécurité internationales"},{icon:Ft,title:s?"موقع مثالي":"Emplacement idéal",description:s?"موقع استراتيجي سهل الوصول مع مواقف سيارات آمنة":"Emplacement stratégique facilement accessible avec parking sécurisé"}].map((h,y)=>e.jsx($,{className:"text-center border-0 bg-white dark:bg-gray-800 shadow-lg",children:e.jsxs(I,{className:"p-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-primary-600 to-secondary-600 rounded-2xl flex items-center justify-center",children:e.jsx(h.icon,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:h.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:h.description})]})},y))})]}),e.jsx(F.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mt-16",children:e.jsx($,{className:"max-w-2xl mx-auto border-0 bg-gradient-to-r from-primary-600 to-secondary-600 text-white",children:e.jsxs(I,{className:"p-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:s?"مقتنع؟ احجز زيارة حقيقية!":"Convaincu ? Réservez une visite réelle !"}),e.jsx("p",{className:"text-lg mb-6 opacity-90",children:s?"تعال وزر حضانتنا شخصياً لتتعرف على فريقنا وتشاهد المرافق عن قرب":"Venez visiter notre crèche en personne pour rencontrer notre équipe et voir les installations de près"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(L,{asChild:!0,size:"lg",variant:"secondary",children:e.jsx("a",{href:"/contact",children:s?"احجز موعد زيارة":"Réserver une visite"})}),e.jsx(L,{asChild:!0,size:"lg",variant:"outline",className:"border-white text-white hover:bg-white hover:text-primary-600",children:e.jsx("a",{href:"/inscription",children:s?"سجل الآن":"S'inscrire maintenant"})})]})]})})})]})})},Vg=()=>{var x,j;const{isRTL:t}=te(),{login:s,loading:r,error:a,clearError:n,isAuthenticated:l,user:i}=oe(),o=ct(),d=Ns(),[m,c]=b.useState(!1);(j=(x=d.state)==null?void 0:x.from)!=null&&j.pathname;const{register:u,handleSubmit:h,formState:{errors:y}}=lr(),f=async v=>{var k,N;try{await s(v.email,v.password),U.success(t?"تم تسجيل الدخول بنجاح":"Connexion réussie"),setTimeout(()=>{o("/",{replace:!0})},1e3)}catch(g){U.error(((N=(k=g.response)==null?void 0:k.data)==null?void 0:N.error)||(t?"خطأ في تسجيل الدخول":"Erreur de connexion"))}},p=async(v,k)=>{var N,g;try{await s(v,k),U.success(t?"تم تسجيل الدخول بنجاح":"Connexion réussie"),setTimeout(()=>{o("/",{replace:!0})},500)}catch(_){U.error(((g=(N=_.response)==null?void 0:N.data)==null?void 0:g.error)||(t?"خطأ في تسجيل الدخول":"Erreur de connexion"))}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md w-full",children:e.jsxs($,{className:"shadow-xl",children:[e.jsxs(J,{className:"text-center",children:[e.jsx(F.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},children:e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center mb-4",children:e.jsx(qr,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"})})}),e.jsx(Q,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?"تسجيل الدخول":"Connexion"}),e.jsx(Ye,{className:"text-gray-600 dark:text-gray-300",children:t?"أدخل بياناتك للوصول إلى حسابك":"Entrez vos identifiants pour accéder à votre compte"})]}),e.jsxs(I,{children:[e.jsxs("form",{onSubmit:h(f),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"البريد الإلكتروني":"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",...u("email",{required:t?"البريد الإلكتروني مطلوب":"Email requis",pattern:{value:/^\S+@\S+$/i,message:t?"بريد إلكتروني غير صحيح":"Email invalide"}}),className:`w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${y.email?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل بريدك الإلكتروني":"Entrez votre email"})]}),y.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"كلمة المرور":"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:m?"text":"password",...u("password",{required:t?"كلمة المرور مطلوبة":"Mot de passe requis"}),className:`w-full pl-10 rtl:pl-4 rtl:pr-12 pr-12 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${y.password?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل كلمة المرور":"Entrez votre mot de passe"}),e.jsx("button",{type:"button",onClick:()=>c(!m),className:"absolute right-3 rtl:right-auto rtl:left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:m?e.jsx(Xs,{className:"w-5 h-5"}):e.jsx(Oe,{className:"w-5 h-5"})})]}),y.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.password.message})]}),a&&e.jsx(F.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:a})}),e.jsx(L,{type:"submit",disabled:r,className:"w-full py-3 text-lg font-semibold",size:"lg",children:r?e.jsx(ne,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"تسجيل الدخول":"Se connecter"]})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center mb-3",children:t?"اختبار سريع":"Tests rapides"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>p("crechemimaelghalia@gmail.com","admin123"),disabled:r,className:"w-full px-4 py-2 text-sm bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:t?"دخول كمدير":"Connexion Admin"}),e.jsx("button",{type:"button",onClick:()=>p("staff@creche.com","staff123"),disabled:r,className:"w-full px-4 py-2 text-sm bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:t?"دخول كموظف":"Connexion Staff"}),e.jsx("button",{type:"button",onClick:()=>p("parent@creche.com","parent123"),disabled:r,className:"w-full px-4 py-2 text-sm bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors",children:t?"دخول كولي أمر":"Connexion Parent"})]})]})]}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t?"ليس لديك حساب؟":"Pas encore de compte ?"," ",e.jsx(W,{to:"/register",className:"text-primary-600 dark:text-primary-400 hover:text-primary-500 font-medium",children:t?"إنشاء حساب":"Créer un compte"})]}),e.jsx(W,{to:"/",className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:t?"العودة إلى الصفحة الرئيسية":"Retour à l'accueil"})]})]})]})})})},Og=()=>{const{isRTL:t}=te(),{register:s,loading:r,error:a,clearError:n,isAuthenticated:l,user:i}=oe(),o=ct(),[d,m]=b.useState(!1),[c,u]=b.useState(!1),{register:h,handleSubmit:y,watch:f,formState:{errors:p}}=lr(),x=f("password"),j=async v=>{var k,N;try{const{confirmPassword:g,..._}=v;await s(_),U.success(t?"تم إنشاء الحساب بنجاح":"Compte créé avec succès"),setTimeout(()=>{o("/",{replace:!0})},1e3)}catch(g){U.error(((N=(k=g.response)==null?void 0:k.data)==null?void 0:N.error)||(t?"خطأ في إنشاء الحساب":"Erreur lors de la création du compte"))}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md w-full",children:e.jsxs($,{className:"shadow-xl",children:[e.jsxs(J,{className:"text-center",children:[e.jsx(F.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},children:e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center mb-4",children:e.jsx(bt,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"})})}),e.jsx(Q,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?"إنشاء حساب":"Créer un compte"}),e.jsx(Ye,{className:"text-gray-600 dark:text-gray-300",children:t?"املأ المعلومات أدناه لإنشاء حساب جديد":"Remplissez les informations ci-dessous pour créer votre compte"})]}),e.jsxs(I,{children:[e.jsxs("form",{onSubmit:y(j),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"الاسم الأول":"Prénom"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",...h("first_name",{required:t?"الاسم الأول مطلوب":"Prénom requis",minLength:{value:2,message:t?"الاسم قصير جداً":"Prénom trop court"}}),className:`w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${p.first_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"الاسم الأول":"Prénom"})]}),p.first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.first_name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"اسم العائلة":"Nom"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",...h("last_name",{required:t?"اسم العائلة مطلوب":"Nom requis",minLength:{value:2,message:t?"الاسم قصير جداً":"Nom trop court"}}),className:`w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${p.last_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"اسم العائلة":"Nom"})]}),p.last_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.last_name.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"البريد الإلكتروني":"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",...h("email",{required:t?"البريد الإلكتروني مطلوب":"Email requis",pattern:{value:/^\S+@\S+$/i,message:t?"بريد إلكتروني غير صحيح":"Email invalide"}}),className:`w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${p.email?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل بريدك الإلكتروني":"Entrez votre email"})]}),p.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.email.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"رقم الهاتف":"Téléphone"," ",e.jsxs("span",{className:"text-gray-400",children:["(",t?"اختياري":"optionnel",")"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",...h("phone"),className:"w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors",placeholder:t?"رقم الهاتف":"Numéro de téléphone"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"كلمة المرور":"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:d?"text":"password",...h("password",{required:t?"كلمة المرور مطلوبة":"Mot de passe requis",minLength:{value:6,message:t?"كلمة المرور قصيرة جداً (6 أحرف على الأقل)":"Mot de passe trop court (6 caractères minimum)"}}),className:`w-full pl-10 rtl:pl-4 rtl:pr-12 pr-12 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${p.password?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل كلمة المرور":"Entrez votre mot de passe"}),e.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 rtl:right-auto rtl:left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:d?e.jsx(Xs,{className:"w-5 h-5"}):e.jsx(Oe,{className:"w-5 h-5"})})]}),p.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"تأكيد كلمة المرور":"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:c?"text":"password",...h("confirmPassword",{required:t?"تأكيد كلمة المرور مطلوب":"Confirmation du mot de passe requise",validate:v=>v===x||(t?"كلمات المرور غير متطابقة":"Les mots de passe ne correspondent pas")}),className:`w-full pl-10 rtl:pl-4 rtl:pr-12 pr-12 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${p.confirmPassword?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أعد إدخال كلمة المرور":"Confirmez votre mot de passe"}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 rtl:right-auto rtl:left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c?e.jsx(Xs,{className:"w-5 h-5"}):e.jsx(Oe,{className:"w-5 h-5"})})]}),p.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.confirmPassword.message})]}),a&&e.jsx(F.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:a})}),e.jsx(L,{type:"submit",disabled:r,className:"w-full py-3 text-lg font-semibold",size:"lg",children:r?e.jsx(ne,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(bt,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"إنشاء الحساب":"Créer le compte"]})})]}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t?"لديك حساب بالفعل؟":"Vous avez déjà un compte ?"," ",e.jsx(W,{to:"/login",className:"text-primary-600 dark:text-primary-400 hover:text-primary-500 font-medium",children:t?"تسجيل الدخول":"Se connecter"})]}),e.jsx(W,{to:"/",className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:t?"العودة إلى الصفحة الرئيسية":"Retour à l'accueil"})]})]})]})})})},es=()=>{const[t,s]=b.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return b.useEffect(()=>{const a=window.document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark"),localStorage.setItem("theme",t)},[t]),{theme:t,toggleTheme:()=>{s(a=>a==="light"?"dark":"light")},isDark:t==="dark"}},Pc=({userRole:t="parent"})=>{const{isRTL:s}=te();es();const[r,a]=b.useState([]),[n,l]=b.useState(!0),[i,o]=b.useState("all");b.useEffect(()=>{d()},[]);const d=async()=>{try{l(!0);const x=(await B.get("/api/holidays")).data;if(x.success){const j=x.holidays.sort((v,k)=>new Date(v.date)-new Date(k.date));a(j)}}catch(p){console.error("Erreur chargement jours fériés:",p)}finally{l(!1)}},m=p=>{const x=p.name.toLowerCase(),j=(p.description||"").toLowerCase();return x.includes("national")||x.includes("indépendance")||x.includes("révolution")||x.includes("république")||x.includes("travail")||x.includes("martyrs")?"national":x.includes("aïd")||x.includes("ramadan")||x.includes("hégirien")||x.includes("achoura")||x.includes("mawlid")||x.includes("عيد")||x.includes("رمضان")||x.includes("هجرية")?"religious":x.includes("vacances")||x.includes("scolaire")||x.includes("école")||x.includes("عطلة")||j.includes("école")?"school":"custom"},c=p=>{switch(p){case"national":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"religious":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"school":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300";default:return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300"}},u=p=>{switch(p){case"national":return s?"وطني":"National";case"religious":return s?"ديني":"Religieux";case"school":return s?"مدرسي":"Scolaire";default:return s?"مخصص":"Personnalisé"}},h=r.filter(p=>i==="all"?!0:m(p)===i),y=h.filter(p=>new Date(p.date)>=new Date),f=h.filter(p=>new Date(p.date)<new Date);return n?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(p=>e.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"},p))})]})}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx(be,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s?"الأعياد والعطل":"Jours Fériés"})]}),e.jsx("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 text-xs rounded-full",children:s?`${h.length} يوم`:`${h.length} jours`})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:[{key:"all",label:s?"الكل":"Tous"},{key:"national",label:s?"وطني":"National"},{key:"religious",label:s?"ديني":"Religieux"},{key:"school",label:s?"مدرسي":"Scolaire"}].map(p=>e.jsx("button",{onClick:()=>o(p.key),className:`px-3 py-1 text-xs rounded-full transition-colors ${i===p.key?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:p.label},p.key))})]}),e.jsx("div",{className:"p-6",children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ye,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s?"لا توجد أعياد مفعلة":"Aucun jour férié activé"})]}):e.jsxs("div",{className:"space-y-6",children:[y.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 text-green-600"}),s?"الأعياد القادمة":"Prochains jours fériés"]}),e.jsx("div",{className:"space-y-3",children:y.slice(0,5).map(p=>{const x=m(p);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${x==="national"?"bg-blue-500":x==="religious"?"bg-green-500":x==="school"?"bg-orange-500":"bg-purple-500"}`}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:p.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(p.date).toLocaleDateString(s?"ar-TN":"fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c(x)}`,children:u(x)})]},p.id)})})]}),f.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:s?"الأعياد السابقة":"Jours fériés passés"}),e.jsx("div",{className:"space-y-2",children:f.slice(-3).reverse().map(p=>{const x=m(p);return e.jsx("div",{className:"flex items-center justify-between p-2 opacity-60",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${x==="national"?"bg-blue-400":x==="religious"?"bg-green-400":x==="school"?"bg-orange-400":"bg-purple-400"}`}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 text-sm",children:p.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(p.date).toLocaleDateString(s?"ar-TN":"fr-FR",{month:"short",day:"numeric"})})]})]})},p.id)})})]})]})})]})},zg=()=>{const{user:t}=oe(),{isRTL:s}=te(),{isDark:r}=es(),{getImageUrl:a,hasImage:n}=Da(),l=ct(),[i,o]=b.useState(!0),[d,m]=b.useState([]);b.useEffect(()=>{c()},[]);const c=async()=>{try{o(!0);const y=(await B.get("/api/user/children-summary")).data;y.success&&m(y.children||[])}catch(h){console.error("Erreur chargement enfants:",h),U.error(s?"خطأ في تحميل البيانات":"Erreur de chargement")}finally{o(!1)}},u=[{id:"attendance-report",title:s?"تقرير الحضور":"Rapport de présence",description:s?"عرض تقرير حضور أطفالك":"Consultez le rapport de présence de vos enfants",icon:Ce,color:"bg-blue-500",hoverColor:"hover:bg-blue-600",path:"/attendance-parent"},{id:"absence-request",title:s?"إبلاغ عن غياب":"Signaler une absence",description:s?"أبلغ عن غياب طفلك مسبقاً":"Prévenez d'une absence de votre enfant",icon:ye,color:"bg-orange-500",hoverColor:"hover:bg-orange-600",path:"/absence-request"}];return i?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(ne,{})}):e.jsx("div",{className:`min-h-screen p-4 md:p-6 ${r?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center overflow-hidden",children:n()?e.jsx("img",{src:a(),alt:"Photo de profil",className:"w-16 h-16 object-cover rounded-full"}):e.jsx(me,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s?`مرحباً ${t==null?void 0:t.first_name}`:`Bienvenue ${t==null?void 0:t.first_name}`}),e.jsx("p",{className:"text-blue-100",children:s?"مساحتك الشخصية لمتابعة أطفالك":"Votre espace personnel pour suivre vos enfants"})]})]})})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5"}),s?"أطفالي":"Mes enfants"]})}),e.jsx(I,{children:d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(le,{className:`w-12 h-12 mx-auto mb-4 ${r?"text-gray-500":"text-gray-400"}`}),e.jsx("p",{className:`${r?"text-gray-400":"text-gray-600"}`,children:s?"لا توجد أطفال مسجلون":"Aucun enfant inscrit"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(h=>e.jsx("div",{className:`p-4 rounded-lg border ${r?"bg-gray-800 border-gray-600":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:`font-medium ${r?"text-white":"text-gray-900"}`,children:[h.first_name," ",h.last_name]}),e.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:h.enrollment_status==="approved"?s?"مقبول":"Approuvé":h.enrollment_status==="pending"?s?"في الانتظار":"En attente":s?"غير محدد":"Non défini"})]})]})},h.id))})})]})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),s?"الإجراءات السريعة":"Actions rapides"]})}),e.jsx(I,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map(h=>e.jsx(F.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer",onClick:()=>l(h.path),children:e.jsxs("div",{className:`${h.color} ${h.hoverColor} rounded-xl p-6 text-white transition-colors`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(h.icon,{className:"w-6 h-6"})}),e.jsx(Vt,{className:`w-5 h-5 ${s?"rotate-180":""}`})]}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:h.title}),e.jsx("p",{className:"text-white/80 text-sm",children:h.description})]})},h.id))})})]})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:e.jsx(Pc,{userRole:"parent"})})]})})},Bg=()=>{const{user:t}=oe(),{isRTL:s}=te(),{isDark:r}=es(),a=ct(),[n,l]=b.useState(!0),[i,o]=b.useState([]),[d,m]=b.useState({}),[c,u]=b.useState(new Date),[h,y]=b.useState({}),[f,p]=b.useState([]),[x,j]=b.useState(null);b.useEffect(()=>{v()},[c]);const v=async()=>{try{l(!0);try{const T=c.getFullYear(),A=c.getMonth()+1,q=await B.get(`/schedule-settings/closed-days/${T}/${A}`);if(q.data.success){const M=q.data.closed_days.map(O=>O.day);p(M),y(q.data.weekly_settings)}else{console.log("⚠️ Paramètres non trouvés, utilisation des valeurs par défaut");const M=k(null,c);p(M)}}catch(T){console.error("Erreur chargement jours fermés:",T),console.log("⚠️ Erreur paramètres, utilisation des valeurs par défaut");const A=k(null,c);p(A),U.error(s?"خطأ في تحميل إعدادات الحضانة":"Erreur chargement paramètres crèche")}const S=(await B.get("/api/user/children-summary")).data.children||[];o(S),S.length>0&&!x&&j(S[0]);const R=S.map(async T=>{try{const A=await B.get(`/attendance/child/${T.id}/month`,{params:{year:c.getFullYear(),month:c.getMonth()+1}});return{childId:T.id,data:A.data.attendance||[]}}catch(A){return console.error(`Erreur chargement présence enfant ${T.id}:`,A),{childId:T.id,data:[]}}}),H=await Promise.all(R),z={};H.forEach(T=>{z[T.childId]=T.data}),m(z)}catch(C){console.error("Erreur chargement données:",C),U.error(s?"خطأ في تحميل البيانات":"Erreur de chargement des données")}finally{l(!1)}},k=(C,S)=>{const R=[],H=S.getFullYear(),z=S.getMonth(),T=new Date(H,z+1,0).getDate();for(let A=1;A<=T;A++){const M=new Date(H,z,A).getDay();({0:!0,1:!1,2:!1,3:!1,4:!1,5:!1,6:!0})[M]&&R.push(A)}return R},N=C=>{if(!C)return"-";if(C.match(/^\d{2}:\d{2}$/))return C;if(C.includes("T")||C.includes(" "))return new Date(C).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",hour12:!1});try{const[S,R]=C.split(":");return`${S.padStart(2,"0")}:${R.padStart(2,"0")}`}catch{return C}},g=C=>C.toLocaleDateString(s?"ar-TN":"fr-FR",{month:"long",year:"numeric"}),_=C=>{const S=new Date(c);S.setMonth(c.getMonth()+C),u(S)},w=(C,S)=>{const R=d[C]||[],H=c.getFullYear(),z=c.getMonth(),A=new Date(H,z,S).toISOString().split("T")[0];return R.find(q=>q.date.split("T")[0]===A)},P=C=>{if(!x)return"closed";const S=new Date(c.getFullYear(),c.getMonth(),C);if(f.includes(C))return"closed";const R=w(x.id,C);return R&&R.check_in_time?"present":S<new Date&&!f.includes(C)?"absent":"future"},D=()=>{const C=c.getFullYear(),S=c.getMonth(),R=new Date(C,S,1).getDay(),H=new Date(C,S+1,0).getDate(),z=[],T=s?["أح","إث","ث","أر","خ","ج","س"]:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"];z.push(e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:T.map((M,O)=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-600 dark:text-gray-300",children:M},O))},"headers"));const A=[];for(let M=0;M<R;M++)A.push(e.jsx("div",{className:"p-2"},`empty-${M}`));const q=[];for(let M=1;M<=H;M++){const O=P(M),X=w(x==null?void 0:x.id,M);let K="bg-white",ue="border-gray-200",Se="text-gray-900 dark:text-white",we=null;switch(O){case"present":K="bg-green-50",ue="border-green-500",Se="text-green-900",we=e.jsx(je,{className:"w-4 h-4 text-green-600"});break;case"absent":K="bg-red-50",ue="border-red-500",Se="text-red-900",we=e.jsx(Ke,{className:"w-4 h-4 text-red-600"});break;case"closed":K="bg-gray-100",ue="border-gray-400",Se="text-gray-500 dark:text-gray-400",we=e.jsx(yn,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"});break;default:K="bg-white",ue="border-gray-200",Se="text-gray-400 dark:text-gray-500"}q.push(e.jsxs("div",{className:`${K} ${ue} ${Se} border-2 rounded-lg p-2 min-h-[80px] flex flex-col items-center justify-start transition-all hover:shadow-md`,children:[e.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:M}),we]}),O==="present"&&X&&e.jsxs("div",{className:"text-xs text-center w-full",children:[e.jsxs("div",{className:"text-green-700 font-medium",children:[s?"وصول":"Arrivée",": ",N(X.check_in_time)]}),X.check_out_time&&e.jsxs("div",{className:"text-green-600",children:[s?"مغادرة":"Départ",": ",N(X.check_out_time)]})]}),O==="closed"&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:s?"مغلق":"Fermé"})]},M))}return z.push(e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[A,q]},"calendar")),z};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(ne,{})}):e.jsx("div",{className:`min-h-screen p-4 md:p-6 ${r?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("button",{onClick:()=>a("/mon-espace"),className:`flex items-center gap-2 transition-colors ${r?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(et,{className:"w-4 h-4"}),s?"رجوع إلى مساحتي":"Retour à Mon Espace"]})}),e.jsx("h1",{className:`text-3xl font-bold mb-2 ${r?"text-white":"text-gray-900"}`,children:s?"تقرير حضور الأطفال":"Calendrier de Présence"}),e.jsx("p",{className:`${r?"text-gray-300":"text-gray-600"}`,children:s?"تابع حضور أطفالك في الحضانة":"Suivez la présence de vos enfants à la crèche"})]}),i.length>0&&e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(C=>e.jsx("button",{onClick:()=>j(C),className:`px-4 py-2 rounded-lg border-2 transition-all ${(x==null?void 0:x.id)===C.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),C.first_name," ",C.last_name]})},C.id))})})})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>_(-1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(hl,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:g(c)}),e.jsx("button",{onClick:()=>_(1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Na,{className:"w-5 h-5"})})]})})})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mb-6",children:e.jsx($,{children:e.jsxs(I,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:s?"مفتاح الألوان":"Légende"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-50 border-2 border-green-500 rounded"}),e.jsx(je,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:s?"حاضر":"Présent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-50 border-2 border-red-500 rounded"}),e.jsx(Ke,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm",children:s?"غائب":"Absent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-100 border-2 border-gray-400 rounded"}),e.jsx(yn,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),e.jsx("span",{className:"text-sm",children:s?"مغلق":"Fermé"})]})]})]})})}),i.length===0?e.jsx($,{children:e.jsxs(I,{className:"text-center py-12",children:[e.jsx(le,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:s?"لا توجد أطفال مسجلون":"Aucun enfant inscrit"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s?"لم يتم العثور على أطفال مرتبطين بحسابك":"Aucun enfant trouvé associé à votre compte"})]})}):x?e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),s?"تقويم حضور":"Calendrier de présence"," - ",x.first_name," ",x.last_name]})}),e.jsx(I,{className:"p-6",children:D()})]})}):null]})})},Ug=({isOpen:t,onClose:s,selectedDate:r,children:a,selectedChild:n,onChildSelect:l,reason:i,onReasonChange:o,notes:d,onNotesChange:m,onSubmit:c,submitting:u})=>{const{isRTL:h}=te(),y=[{value:"sick",label:h?"مرض":"Maladie"},{value:"vacation",label:h?"عطلة":"Vacances"},{value:"medical_visit",label:h?"زيارة طبية":"Visite médicale"},{value:"family_event",label:h?"حدث عائلي":"Événement familial"},{value:"other",label:h?"أخرى":"Autre"}],f=p=>{p.preventDefault(),n&&i&&c()};return t?e.jsx(qo,{children:e.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:s,children:e.jsxs(F.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:`bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden ${h?"rtl":"ltr"}`,onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-6 h-6 mr-3 rtl:mr-0 rtl:ml-3 text-primary-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:h?"تفاصيل طلب الغياب":"Détails de la demande"}),r&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.toLocaleDateString(h?"ar-TN":"fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg transition-colors",disabled:u,children:e.jsx(Ht,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[e.jsx(le,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),h?"الطفل *":"Enfant *"]}),e.jsxs("select",{value:n,onChange:p=>l(p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white transition-colors",required:!0,disabled:u,children:[e.jsx("option",{value:"",children:h?"اختر طفل":"Sélectionnez un enfant"}),a.map(p=>e.jsxs("option",{value:p.id,children:[p.first_name," ",p.last_name]},p.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[e.jsx(Hr,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),h?"سبب الغياب *":"Raison de l'absence *"]}),e.jsxs("select",{value:i,onChange:p=>o(p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white transition-colors",required:!0,disabled:u,children:[e.jsx("option",{value:"",children:h?"اختر سبب":"Sélectionnez une raison"}),y.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:h?"ملاحظات إضافية":"Notes supplémentaires"}),e.jsx("textarea",{value:d,onChange:p=>m(p.target.value),rows:4,placeholder:h?"أي معلومات إضافية...":"Toute information supplémentaire...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white resize-none transition-colors",disabled:u})]}),e.jsxs("div",{className:"flex space-x-3 rtl:space-x-reverse pt-4",children:[e.jsx(L,{type:"submit",disabled:u||!n||!i,className:"flex-1",children:u?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 rtl:mr-0 rtl:ml-2"}),h?"جاري الإرسال...":"Envoi en cours..."]}):e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(ka,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),h?"إرسال الطلب":"Envoyer la demande"]})}),e.jsx(L,{type:"button",variant:"outline",onClick:s,disabled:u,className:"px-6",children:h?"إلغاء":"Annuler"})]})]})})]})})}):null},qg=({selectedDate:t,onDateSelect:s,children:r,selectedChild:a,onChildSelect:n,reason:l,onReasonChange:i,notes:o,onNotesChange:d,onSubmit:m,submitting:c})=>{const{isRTL:u}=te(),[h,y]=b.useState(new Date),[f,p]=b.useState(!1),x=w=>{const P=w.getFullYear(),D=w.getMonth(),C=new Date(P,D+1,0),S=[];for(let R=1;R<=C.getDate();R++)S.push(new Date(P,D,R));return S},j=()=>{y(new Date(h.getFullYear(),h.getMonth()-1,1))},v=()=>{y(new Date(h.getFullYear(),h.getMonth()+1,1))},k=w=>{const P=new Date;P.setHours(0,0,0,0),w>=P&&(s(w),p(!0))},N=()=>{t&&a&&l&&(m(),p(!1))},g=x(h),_=new Date;return _.setHours(0,0,0,0),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(be,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),u?"اختر تاريخ الغياب":"Sélectionner la date d'absence"]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:j,children:e.jsx(hl,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium min-w-[120px] text-center",children:h.toLocaleDateString(u?"ar-TN":"fr-FR",{month:"long",year:"numeric"})}),e.jsx(L,{variant:"outline",size:"sm",onClick:v,children:e.jsx(Na,{className:"w-4 h-4"})})]})]})}),e.jsxs(I,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].map(w=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:u?["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"][["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].indexOf(w)]:w},w))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:g.map((w,P)=>{const D=w<_,C=t&&w.toDateString()===t.toDateString(),S=w.getDay()===0||w.getDay()===6;return e.jsx("button",{onClick:()=>k(w),disabled:D,className:`
                    p-3 min-h-[50px] border rounded-lg text-sm font-medium transition-all duration-200
                    ${D?"bg-gray-100 text-gray-400 cursor-not-allowed border-gray-200":"hover:bg-primary-50 hover:border-primary-300 cursor-pointer"}
                    ${C?"bg-primary-500 text-white border-primary-500":"bg-white border-gray-200"}
                    ${S&&!D&&!C?"bg-gray-50 text-gray-600":""}
                  `,children:w.getDate()},P)})}),t&&e.jsx("div",{className:"mt-4 p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-primary-700 dark:text-primary-300",children:[e.jsx(ae,{className:"w-4 h-4 inline mr-1"}),u?"التاريخ المحدد:":"Date sélectionnée:"," "," ",e.jsx("span",{className:"font-medium",children:t.toLocaleDateString(u?"ar-TN":"fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})})]})]}),e.jsx(Ug,{isOpen:f,onClose:()=>p(!1),selectedDate:t,children:r,selectedChild:a,onChildSelect:n,reason:l,onReasonChange:i,notes:o,onNotesChange:d,onSubmit:N,submitting:c})]})},Hg=()=>{const{user:t}=oe(),{isRTL:s}=te(),r=ct(),[a,n]=b.useState(!0),[l,i]=b.useState(!1),[o,d]=b.useState([]),[m,c]=b.useState([]),[u,h]=b.useState(null),[y,f]=b.useState(""),[p,x]=b.useState(""),[j,v]=b.useState(""),k=[{value:"sick",label:s?"مريض":"Maladie"},{value:"vacation",label:s?"عطلة":"Vacances"},{value:"medical_visit",label:s?"زيارة طبية":"Visite médicale"},{value:"family_event",label:s?"مناسبة عائلية":"Événement familial"},{value:"other",label:s?"أخرى":"Autre"}];b.useEffect(()=>{N()},[]);const N=async()=>{var D;try{n(!0);const C=await B.get(`/api/children/parent/${t.id}`);console.log("👶 Réponse enfants:",C.data),C.data.success?(d(C.data.children||[]),console.log("✅ Enfants chargés:",((D=C.data.children)==null?void 0:D.length)||0)):(d([]),console.log("⚠️ Aucun enfant trouvé ou erreur"));try{const S=await B.get(`/absence-requests/parent/${t.id}`);c(S.data.requests||[])}catch(S){console.error("Erreur chargement demandes d'absence:",S),c([])}}catch(C){console.error("Erreur chargement données:",C),U.error(s?"خطأ في تحميل البيانات":"Erreur lors du chargement des données")}finally{n(!1)}},g=async()=>{var D,C;if(!y||!u||!p){U.error(s?"يرجى ملء جميع الحقول المطلوبة":"Veuillez remplir tous les champs requis");return}try{i(!0);const S={child_id:y,absence_date:u.toISOString().split("T")[0],reason:p,notes:j};console.log("📤 Envoi demande d'absence:",S);const R=await B.post("/absence-requests",S);R.data.success?(U.success(s?"تم إرسال طلب الغياب بنجاح":"Demande d'absence envoyée avec succès"),h(null),f(""),x(""),v(""),N()):U.error(R.data.error||(s?"خطأ في إرسال الطلب":"Erreur lors de l'envoi de la demande"))}catch(S){console.error("❌ Erreur envoi demande:",S);const R=((C=(D=S.response)==null?void 0:D.data)==null?void 0:C.error)||S.message;U.error(s?`خطأ: ${R}`:`Erreur: ${R}`)}finally{i(!1)}},_=D=>{switch(D){case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20";case"acknowledged":return"text-green-600 bg-green-100 dark:bg-green-900/20";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/20"}},w=D=>{switch(D){case"pending":return e.jsx(ae,{className:"w-4 h-4"});case"acknowledged":return e.jsx(je,{className:"w-4 h-4"});default:return e.jsx(ye,{className:"w-4 h-4"})}},P=D=>{switch(D){case"pending":return s?"في الانتظار":"En attente";case"acknowledged":return s?"تم الاستلام":"Pris en compte";default:return D}};return a?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(ne,{})}):e.jsx("div",{className:`min-h-screen bg-gray-50 dark:bg-gray-900 p-4 ${s?"rtl":"ltr"}`,children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs(L,{variant:"outline",onClick:()=>r("/mon-espace"),className:"mr-4 rtl:mr-0 rtl:ml-4",children:[e.jsx(et,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 rtl:rotate-180"}),s?"العودة إلى مساحتي":"Retour à Mon Espace"]})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:s?"طلب غياب":"Demande d'absence"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s?"أعلم الإدارة بغياب طفلك مسبقاً":"Informez l'administration de l'absence de votre enfant à l'avance"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:e.jsx(qg,{selectedDate:u,onDateSelect:h,children:o,selectedChild:y,onChildSelect:f,reason:p,onReasonChange:x,notes:j,onNotesChange:v,onSubmit:g,submitting:l})}),e.jsx(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:e.jsxs($,{children:[e.jsxs(J,{children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),s?"الطلبات السابقة":"Demandes précédentes"]}),e.jsx(Ye,{children:s?"تاريخ طلبات الغياب المرسلة":"Historique de vos demandes d'absence"})]}),e.jsx(I,{children:m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ye,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:s?"لا توجد طلبات سابقة":"Aucune demande précédente"})]}):e.jsx("div",{className:"space-y-4",children:m.map(D=>{var C;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"w-4 h-4 text-gray-500 mr-2 rtl:mr-0 rtl:ml-2"}),e.jsxs("span",{className:"font-medium",children:[D.child_first_name," ",D.child_last_name]})]}),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${_(D.status)}`,children:[w(D.status),e.jsx("span",{className:"ml-1 rtl:ml-0 rtl:mr-1",children:P(D.status)})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),new Date(D.absence_date).toLocaleDateString(s?"ar-TN":"fr-FR")]}),e.jsxs("div",{children:[e.jsx("strong",{children:s?"السبب:":"Raison:"})," ",((C=k.find(S=>S.value===D.reason))==null?void 0:C.label)||D.reason]}),D.notes&&e.jsxs("div",{children:[e.jsx("strong",{children:s?"ملاحظات:":"Notes:"})," ",D.notes]})]})]},D.id)})})})]})})]})]})})},Gg=()=>{const{user:t,isAdmin:s,isStaff:r}=oe(),{isRTL:a}=te(),[n,l]=b.useState(null),[i,o]=b.useState(!0);b.useEffect(()=>{setTimeout(()=>{l({totalChildren:24,presentToday:18,pendingEnrollments:5,maxCapacity:30,availablePlaces:6,attendanceRate:85,newEnrollmentsThisMonth:3}),o(!1)},1e3)},[]);const d=[{title:a?"إجمالي الأطفال":"Total Enfants",value:(n==null?void 0:n.totalChildren)||0,icon:le,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900",change:"+2",changeText:a?"هذا الشهر":"ce mois"},{title:a?"الحاضرون اليوم":"Présents aujourd'hui",value:(n==null?void 0:n.presentToday)||0,icon:Ze,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900",change:`${(n==null?void 0:n.attendanceRate)||0}%`,changeText:a?"معدل الحضور":"taux présence"},{title:a?"طلبات معلقة":"Demandes en attente",value:(n==null?void 0:n.pendingEnrollments)||0,icon:Ur,color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900",change:"Urgent",changeText:a?"يتطلب مراجعة":"nécessite révision"},{title:a?"أماكن متاحة":"Places disponibles",value:(n==null?void 0:n.availablePlaces)||0,icon:Be,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900",change:`/${(n==null?void 0:n.maxCapacity)||30}`,changeText:a?"السعة القصوى":"capacité max"}],m=[{title:a?"تسجيل حضور":"Enregistrer présence",description:a?"تسجيل وصول أو مغادرة طفل":"Marquer arrivée/départ enfant",icon:ae,link:"/dashboard/attendance/today",color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-900/20"},{title:a?"مراجعة الطلبات":"Réviser demandes",description:a?"مراجعة طلبات التسجيل المعلقة":"Examiner inscriptions en attente",icon:Ce,link:"/dashboard/pending-enrollments",color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20"},{title:a?"إضافة طفل":"Ajouter enfant",description:a?"تسجيل طفل جديد في النظام":"Enregistrer nouvel enfant",icon:le,link:"/dashboard/children/add",color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",adminOnly:!0},{title:a?"التقارير":"Rapports",description:a?"عرض الإحصائيات والتقارير":"Voir statistiques et rapports",icon:gs,link:"/dashboard/reports/stats",color:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",adminOnly:!0}],c=[{type:"enrollment",message:a?"طلب تسجيل جديد من لينا بن علي":"Nouvelle demande d'inscription de Lina Ben Ali",time:a?"منذ 2 ساعات":"il y a 2h",icon:Ur,color:"text-blue-600"},{type:"attendance",message:a?"يوسف بن علي وصل إلى الحضانة":"Youssef Benali est arrivé à la crèche",time:a?"منذ 8:30 صباحاً":"à 8:30",icon:Ze,color:"text-green-600"},{type:"approval",message:a?"تم قبول طلب تسجيل أمينة العلوي":"Demande d'Amina Alaoui approuvée",time:a?"أمس":"hier",icon:je,color:"text-green-600"},{type:"attendance",message:a?"إيما مارتن غادرت الحضانة":"Emma Martin a quitté la crèche",time:a?"منذ 17:15":"à 17:15",icon:Gr,color:"text-orange-600"}];return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ne,{size:"lg"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 rounded-xl p-6 text-white",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:a?`مرحباً، ${t==null?void 0:t.first_name}`:`Bonjour, ${t==null?void 0:t.first_name}`}),e.jsx("p",{className:"text-primary-100 text-lg",children:a?"إليك نظرة عامة على أنشطة الحضانة اليوم":"Voici un aperçu des activités de la crèche aujourd'hui"})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:a?"الإحصائيات":"Statistiques"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map((u,h)=>e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:h*.1},children:e.jsx($,{className:"hover:shadow-lg transition-shadow h-32",children:e.jsx(I,{className:"p-6 h-full",children:e.jsxs("div",{className:"flex items-center justify-between h-full",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:u.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:u.value}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{className:"font-medium",children:u.change})," ",u.changeText]})]}),e.jsx("div",{className:`w-12 h-12 ${u.bgColor} rounded-lg flex items-center justify-center`,children:e.jsx(u.icon,{className:`w-6 h-6 ${u.color}`})})]})})})},h))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:a?"الإجراءات السريعة":"Actions rapides"}),e.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:e.jsxs($,{children:[e.jsxs(J,{children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(gs,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),a?"الإجراءات السريعة":"Actions rapides"]}),e.jsx(Ye,{children:a?"الوصول السريع للمهام الشائعة":"Accès rapide aux tâches courantes"})]}),e.jsx(I,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.filter(u=>!u.adminOnly||s()).map((u,h)=>e.jsx(W,{to:u.link,className:`p-4 rounded-lg border-2 border-transparent hover:border-gray-200 dark:hover:border-gray-700 ${u.bgColor} transition-all hover:shadow-md`,children:e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:`w-10 h-10 ${u.bgColor} rounded-lg flex items-center justify-center`,children:e.jsx(u.icon,{className:`w-5 h-5 ${u.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:u.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:u.description})]})]})},h))})})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:a?"الأنشطة الأخيرة":"Activités récentes"}),e.jsx(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.6},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),a?"الأنشطة الأخيرة":"Activités récentes"]})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-4",children:c.map((u,h)=>e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(u.icon,{className:`w-4 h-4 ${u.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:u.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.time})]})]},h))})})]})})]})]}),t&&e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:e.jsx(Pc,{userRole:t==null?void 0:t.role})})]})},tl=()=>{const{user:t,updateUser:s}=oe(),{isRTL:r}=te(),{isDark:a}=es(),{getImageUrl:n,hasImage:l}=Da(),i=ct(),[o,d]=b.useState(!1),[m,c]=b.useState(!1),[u,h]=b.useState(!1),[y,f]=b.useState({first_name:(t==null?void 0:t.first_name)||"",last_name:(t==null?void 0:t.last_name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",current_password:"",new_password:"",confirm_password:""});b.useEffect(()=>{t&&f({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",phone:t.phone||"",current_password:"",new_password:"",confirm_password:""})},[t]);const p=v=>{const{name:k,value:N}=v.target;f(g=>({...g,[k]:N}))},x=async v=>{const k=v.target.files[0];if(k)try{d(!0);const N=new FormData;N.append("image",k);const g=await B.post("/api/profile/upload",N,{headers:{"Content-Type":"multipart/form-data"}});g.data.success&&(s({...t,profile_image:g.data.imageUrl}),U.success(r?"تم تحديث الصورة":"Photo mise à jour"))}catch{U.error("Erreur lors de l'upload")}finally{d(!1)}},j=async v=>{var k,N;if(v.preventDefault(),!(!m&&!u)){if(u&&y.new_password!==y.confirm_password){U.error(r?"كلمات المرور غير متطابقة":"Les mots de passe ne correspondent pas");return}d(!0);try{const g=await B.put("/api/profile",y);g.data.success&&(s(g.data.user),U.success(r?"تم التحديث بنجاح":"Profil mis à jour"),f(_=>({..._,current_password:"",new_password:"",confirm_password:""})),c(!1),h(!1))}catch(g){U.error(((N=(k=g.response)==null?void 0:k.data)==null?void 0:N.error)||"Erreur")}finally{d(!1)}}};return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(ne,{})}):e.jsx("div",{className:`min-h-screen p-4 md:p-6 ${a?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>i(-1),className:"flex items-center gap-2 mb-6",children:[e.jsx(et,{className:`w-4 h-4 ${r?"rotate-180":""}`}),r?"رجوع":"Retour"]}),e.jsx("div",{className:"text-center",children:e.jsx("h1",{className:`text-3xl font-bold mb-2 ${a?"text-white":"text-gray-900"}`,children:r?"الملف الشخصي":"Mon Profil"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ul,{className:"w-5 h-5"}),r?"الصورة الشخصية":"Photo de profil"]})}),e.jsxs(I,{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:l()?e.jsx("img",{src:n(),alt:"Photo de profil",className:"w-32 h-32 object-cover"}):e.jsx(me,{className:"w-16 h-16 text-gray-400"})}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full cursor-pointer transition-colors",children:[e.jsx(nr,{className:"w-4 h-4"}),e.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden"})]})]}),e.jsxs("h3",{className:`font-semibold ${a?"text-white":"text-gray-900"}`,children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:(t==null?void 0:t.role)==="admin"?r?"مدير":"Administrateur":(t==null?void 0:t.role)==="staff"?r?"موظف":"Personnel":r?"ولي أمر":"Parent"})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5"}),r?"المعلومات الشخصية":"Informations personnelles"]}),!m&&!u&&e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"flex items-center gap-2",children:[e.jsx(td,{className:"w-4 h-4"}),r?"تعديل":"Modifier"]})]})}),e.jsx(I,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r?"الاسم الأول":"Prénom"}),e.jsx("input",{type:"text",name:"first_name",value:y.first_name,onChange:p,disabled:!m,className:`w-full px-4 py-2 border rounded-lg ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} ${m?"":"opacity-60"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r?"اسم العائلة":"Nom"}),e.jsx("input",{type:"text",name:"last_name",value:y.last_name,onChange:p,disabled:!m,className:`w-full px-4 py-2 border rounded-lg ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} ${m?"":"opacity-60"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r?"البريد الإلكتروني":"Email"}),e.jsx("input",{type:"email",name:"email",value:y.email,onChange:p,disabled:!m,className:`w-full px-4 py-2 border rounded-lg ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} ${m?"":"opacity-60"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r?"رقم الهاتف":"Téléphone"}),e.jsx("input",{type:"tel",name:"phone",value:y.phone,onChange:p,disabled:!m,className:`w-full px-4 py-2 border rounded-lg ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} ${m?"":"opacity-60"}`})]})]}),!u&&m&&e.jsxs(L,{type:"button",variant:"outline",onClick:()=>h(!0),className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),r?"تغيير كلمة المرور":"Changer le mot de passe"]}),u&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:`font-medium ${a?"text-white":"text-gray-900"}`,children:r?"تغيير كلمة المرور":"Changer le mot de passe"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r?"كلمة المرور الحالية":"Mot de passe actuel"}),e.jsx("input",{type:"password",name:"current_password",value:y.current_password,onChange:p,className:`w-full px-4 py-2 border rounded-lg ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r?"كلمة المرور الجديدة":"Nouveau mot de passe"}),e.jsx("input",{type:"password",name:"new_password",value:y.new_password,onChange:p,className:`w-full px-4 py-2 border rounded-lg ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r?"تأكيد كلمة المرور":"Confirmer le mot de passe"}),e.jsx("input",{type:"password",name:"confirm_password",value:y.confirm_password,onChange:p,className:`w-full px-4 py-2 border rounded-lg ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]}),(m||u)&&e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(L,{type:"submit",className:"flex items-center gap-2",children:[e.jsx(_a,{className:"w-4 h-4"}),r?"حفظ":"Sauvegarder"]}),e.jsx(L,{type:"button",variant:"outline",onClick:()=>{c(!1),h(!1),f({first_name:(t==null?void 0:t.first_name)||"",last_name:(t==null?void 0:t.last_name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",current_password:"",new_password:"",confirm_password:""})},children:r?"إلغاء":"Annuler"})]})]})})]})})]})]})})},hs={getAllChildren:async(t={})=>{try{const{page:s=1,limit:r=20,search:a="",status:n="all",age:l="all"}=t;return(await B.get("/api/children",{params:{page:s,limit:r,search:a,status:n,age:l}})).data}catch(s){throw console.error("Erreur lors de la récupération des enfants:",s),s}},getChildById:async t=>{try{return(await B.get(`/api/children/${t}`)).data}catch(s){throw console.error("Erreur lors de la récupération de l'enfant:",s),s}},createChild:async t=>{try{return(await B.post("/api/children",t)).data}catch(s){throw console.error("Erreur lors de la création de l'enfant:",s),s}},updateChild:async(t,s)=>{try{return(await B.put(`/api/children/${t}`,s)).data}catch(r){throw console.error("Erreur lors de la mise à jour de l'enfant:",r),r}},deleteChild:async t=>{try{return(await B.delete(`/api/children/${t}`)).data}catch(s){throw console.error("Erreur lors de la suppression de l'enfant:",s),s}},getChildrenStats:async()=>{try{return(await B.get("/api/children/stats")).data}catch(t){throw console.error("Erreur lors de la récupération des statistiques:",t),t}},getChildrenByParent:async t=>{try{return(await B.get(`/api/children/parent/${t}`)).data}catch(s){throw console.error("Erreur lors de la récupération des enfants du parent:",s),s}},getAvailableChildren:async()=>{try{return(await B.get("/api/children/available")).data}catch(t){throw console.error("Erreur lors de la récupération des enfants disponibles:",t),t}},getOrphanChildren:async()=>{try{return(await B.get("/api/children/orphans")).data}catch(t){throw console.error("Erreur lors de la récupération des enfants orphelins:",t),t}},associateChildToParent:async(t,s)=>{try{return(await B.put(`/api/children/${t}/associate-parent`,{parentId:s})).data}catch(r){throw console.error("Erreur lors de l'association enfant-parent:",r),r}}},Wg={getProfile:async()=>{try{return(await B.get("/api/users/profile")).data}catch(t){throw console.error("Erreur lors de la récupération du profil:",t),t}},updateProfile:async t=>{try{return(await B.put("/api/users/profile",t)).data}catch(s){throw console.error("Erreur lors de la mise à jour du profil:",s),s}},changePassword:async t=>{try{return(await B.put("/api/users/change-password",t)).data}catch(s){throw console.error("Erreur lors du changement de mot de passe:",s),s}},uploadProfileImage:async t=>{try{const s=new FormData;return s.append("profile_image",t),(await B.post("/api/users/profile/image",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("Erreur lors de l'upload de l'image:",s),s}},getAllUsers:async(t={})=>{try{return(await B.get("/api/users",{params:t})).data}catch(s){throw console.error("Erreur lors de la récupération des utilisateurs:",s),s}},getUserById:async t=>{try{return(await B.get(`/users/${t}`)).data}catch(s){throw console.error("Erreur lors de la récupération de l'utilisateur:",s),s}},updateUser:async(t,s)=>{try{return(await B.put(`/users/${t}`,s)).data}catch(r){throw console.error("Erreur lors de la mise à jour de l'utilisateur:",r),r}},toggleUserStatus:async t=>{try{return(await B.put(`/users/${t}/toggle-status`)).data}catch(s){throw console.error("Erreur lors du changement de statut:",s),s}}},Kg={documentTypes:{CARNET_MEDICAL:"carnet_medical",ACTE_NAISSANCE:"acte_naissance",CERTIFICAT_MEDICAL:"certificat_medical"},uploadDocument:async(t,s,r)=>new Promise(a=>{setTimeout(()=>{console.log(`Document ${s} uploadé pour l'enfant ${r}:`,t.name),a({success:!0,documentId:Date.now(),filename:t.name,type:s})},1e3)}),getChildDocuments:async t=>new Promise(s=>{setTimeout(()=>{s({success:!0,documents:[{id:1,name:"Acte de naissance",type:"acte_naissance",filename:"acte_naissance.pdf",uploadDate:"2025-01-15",status:"approved",size:"245 KB"},{id:2,name:"Carnet médical",type:"carnet_medical",filename:"carnet_medical.pdf",uploadDate:"2025-01-16",status:"pending",size:"1.2 MB"},{id:3,name:"Certificat médical",type:"certificat_medical",filename:"certificat_medical.pdf",uploadDate:"2025-01-17",status:"approved",size:"180 KB"}]})},500)}),viewDocument:t=>{const s=new Blob(["Contenu simulé du document: "+t.name],{type:"application/pdf"}),r=URL.createObjectURL(s);return window.open(r,"_blank"),setTimeout(()=>URL.revokeObjectURL(r),1e3),Promise.resolve({success:!0,message:"Document ouvert"})},downloadDocument:t=>{const s=new Blob(["Contenu simulé du document: "+t.name],{type:"application/pdf"}),r=URL.createObjectURL(s),a=t.createElement("a");return a.href=r,a.download=t.filename,t.body.appendChild(a),a.click(),t.body.removeChild(a),URL.revokeObjectURL(r),Promise.resolve({success:!0,message:"Document téléchargé"})},downloadReglement:()=>{const t=document.createElement("a");t.href="/documents/reglement-interieur.pdf",t.download="reglement-interieur-mima-elghalia.pdf",document.body.appendChild(t),t.click(),document.body.removeChild(t)},validateFile:t=>{const r=["application/pdf","image/jpeg","image/jpg","image/png"];return t?t.size>5242880?{valid:!1,error:"Fichier trop volumineux (max 5MB)"}:r.includes(t.type)?{valid:!0}:{valid:!1,error:"Type de fichier non supporté (PDF, JPG, PNG uniquement)"}:{valid:!1,error:"Aucun fichier sélectionné"}}},Yg=()=>{const{user:t,isAdmin:s,isStaff:r}=oe(),{isRTL:a}=te(),[n,l]=b.useState(!0),[i,o]=b.useState(null),[d,m]=b.useState(!1),[c,u]=b.useState(!1),[h,y]=b.useState(null),[f,p]=b.useState([]),[x,j]=b.useState(""),[v,k]=b.useState([]),[N,g]=b.useState(""),[_,w]=b.useState("all"),[P,D]=b.useState("all"),[C,S]=b.useState({}),[R,H]=b.useState([]),[z,T]=b.useState(!1),[A,q]=b.useState({page:1,limit:20,total:0,totalPages:0}),M=async()=>{try{l(!0);const V={page:A.page,limit:A.limit,search:N,status:"approved",age:P},se=await hs.getAllChildren(V);if(console.log("📋 ChildrenPage - Réponse API:",se),se.success){const re=se.data.children||[];console.log("✅ ChildrenPage - Enfants chargés:",re.length),k(re),q(pe=>{var Te,Me;return{...pe,total:((Te=se.data.pagination)==null?void 0:Te.total)||0,totalPages:((Me=se.data.pagination)==null?void 0:Me.pages)||0}})}else console.error("❌ ChildrenPage - Erreur:",se),U.error("Erreur lors du chargement des enfants")}catch(V){console.error("Erreur lors du chargement des enfants:",V),U.error("Erreur de connexion, vérifiez votre connexion internet")}finally{l(!1)}};b.useEffect(()=>{if(N.trim()!==""){const V=setTimeout(()=>{M()},1e3);return()=>clearTimeout(V)}else M()},[N,P,A.page]);const O=()=>{M()},X=async V=>{y(V),m(!1),u(!1);try{T(!0);const se=await Kg.getChildDocuments(V.id);se.success&&H(se.documents)}catch(se){console.error("Erreur chargement documents:",se),H([])}finally{T(!1)}},K=V=>{y(V),S({first_name:V.first_name||"",last_name:V.last_name||"",birth_date:V.birth_date?V.birth_date.split("T")[0]:"",gender:V.gender||"M",medical_info:V.medical_info||"",emergency_contact_name:V.emergency_contact_name||"",emergency_contact_phone:V.emergency_contact_phone||"",status:V.status||"pending"}),u(!0)},ue=async V=>{const se=a?`هل أنت متأكد من إلغاء تفعيل حساب الوالد لـ ${V.first_name} ${V.last_name}؟

سيتم:
- إلغاء تفعيل حساب الوالد
- إخفاء الطفل من القائمة
- منع الوالد من الدخول للنظام`:`Êtes-vous sûr de vouloir désactiver le compte parent de ${V.first_name} ${V.last_name} ?

Ceci va :
- Désactiver le compte parent
- Masquer l'enfant de la liste
- Empêcher le parent de se connecter`;if(window.confirm(se))try{if(o(V.id),(await fetch(`/api/children/${V.id}/deactivate-parent`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok)U.success(a?"تم إلغاء تفعيل حساب الوالد بنجاح":"Compte parent désactivé avec succès"),M();else throw new Error("Erreur lors de la désactivation")}catch(re){console.error("Erreur lors de la désactivation:",re),U.error(a?"خطأ في إلغاء تفعيل الحساب":"Erreur lors de la désactivation du compte")}finally{o(null)}},Se=async V=>{var se,re;if(V.preventDefault(),!!h)try{o("save");const pe=await hs.updateChild(h.id,C);pe.success?(U.success(a?"تم تحديث بيانات الطفل بنجاح":"Informations de l'enfant mises à jour avec succès"),u(!1),y(null),S({}),M()):U.error(pe.error||(a?"خطأ في التحديث":"Erreur lors de la mise à jour"))}catch(pe){console.error("Erreur sauvegarde enfant:",pe),U.error(((re=(se=pe.response)==null?void 0:se.data)==null?void 0:re.error)||(a?"خطأ في الاتصال":"Erreur de connexion"))}finally{o(null)}},we=(V,se)=>{S(re=>({...re,[V]:se}))},ht=async V=>{var se;try{y(V),m(!0);const re=await Wg.getAllUsers({role:"parent"});console.log("Parents response:",re),re.users?p(re.users):(se=re.data)!=null&&se.users&&p(re.data.users)}catch(re){console.error("Erreur chargement parents:",re),U.error("Erreur lors du chargement des parents")}},jr=async()=>{var V,se;if(!x||!h){U.error(a?"يرجى اختيار ولي أمر":"Veuillez sélectionner un parent");return}try{o("associate"),(await hs.associateChildToParent(h.id,x)).success&&(U.success(a?"تم ربط الطفل بولي الأمر بنجاح":"Enfant associé au parent avec succès"),m(!1),y(null),j(""),M())}catch(re){console.error("Erreur association:",re),U.error(((se=(V=re.response)==null?void 0:V.data)==null?void 0:se.error)||"Erreur lors de l'association")}finally{o(null)}},At=V=>{const se=new Date,re=new Date(V);let pe=se.getFullYear()-re.getFullYear(),Te=se.getMonth()-re.getMonth(),Me=se.getDate()-re.getDate();if(Me<0){Te--;const Mc=new Date(se.getFullYear(),se.getMonth(),0);Me+=Mc.getDate()}return Te<0&&(pe--,Te+=12),pe===0&&Te===0?a?`${Me} يوم`:`${Me} jour${Me>1?"s":""}`:pe===0?Me===0?a?`${Te} شهر`:`${Te} mois`:a?`${Te} شهر و ${Me} يوم`:`${Te} mois et ${Me} jour${Me>1?"s":""}`:Te===0?a?`${pe} سنة`:`${pe} an${pe>1?"s":""}`:a?`${pe} سنة و ${Te} شهر`:`${pe} an${pe>1?"s":""} et ${Te} mois`},pn=V=>{switch(V){case"approved":return e.jsx(je,{className:"w-4 h-4 text-green-600"});case"rejected":return e.jsx(Ke,{className:"w-4 h-4 text-red-600"});case"pending":default:return e.jsx(ye,{className:"w-4 h-4 text-yellow-600"})}},Dc=V=>{switch(V){case"approved":return{text:a?"مقبول":"Inscrit",color:"text-green-800 dark:text-green-200",bgColor:"bg-green-100 dark:bg-green-900"};case"pending":return{text:a?"في الانتظار":"En attente",color:"text-yellow-800 dark:text-yellow-200",bgColor:"bg-yellow-100 dark:bg-yellow-900"};case"rejected":return{text:a?"مرفوض":"Rejeté",color:"text-red-800 dark:text-red-200",bgColor:"bg-red-100 dark:bg-red-900"};default:return{text:a?"غير محدد":"Non défini",color:"text-gray-800 dark:text-gray-200",bgColor:"bg-gray-100 dark:bg-gray-900"}}},Rc=V=>V.status==="present"?{text:a?"حاضر":"Présent",color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900"}:V.status==="absent"?{text:a?"غائب":"Absent",color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900"}:{text:a?"غير مسجل":"Non inscrit",color:"text-gray-600",bgColor:"bg-gray-100 dark:bg-gray-900"};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ne,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a?"إدارة الأطفال":"Gestion des enfants"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:a?`${v.length} طفل`:`${v.length} enfants`})]}),e.jsxs("div",{className:"flex gap-2 mt-4 sm:mt-0",children:[e.jsxs(L,{onClick:O,variant:"outline",size:"sm",disabled:n,children:[e.jsx(Fe,{className:`w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 ${n?"animate-spin":""}`}),a?"تحديث":"Actualiser"]}),(s()||r())&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{asChild:!0,children:e.jsxs(W,{to:"/dashboard/children/add",children:[e.jsx(ir,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),a?"إضافة طفل":"Ajouter enfant"]})}),r()&&e.jsx(L,{asChild:!0,variant:"outline",children:e.jsxs(W,{to:"/dashboard/children/add?personal=true",children:[e.jsx(bt,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),a?"إضافة طفلي":"Mon enfant"]})})]})]})]})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:a?"البحث في الأطفال...":"Rechercher des enfants...",value:N,onChange:V=>g(V.target.value),className:"w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("select",{value:P,onChange:V=>D(V.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:a?"جميع الأعمار":"Tous les âges"}),e.jsx("option",{value:"baby",children:a?"رضع (< 1 سنة)":"Bébés (< 1 an)"}),e.jsx("option",{value:"toddler",children:a?"أطفال صغار (1-3 سنة)":"Tout-petits (1-3 ans)"}),e.jsx("option",{value:"preschool",children:a?"ما قبل المدرسة (> 3 سنة)":"Préscolaire (> 3 ans)"})]}),e.jsxs(L,{variant:"outline",onClick:()=>{g(""),w("all"),D("all")},children:[e.jsx(Gt,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),a?"إعادة تعيين":"Réinitialiser"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:v.map(V=>{const se=V.attendance_today||{status:"absent",check_in:null,check_out:null},re=Rc(se),pe=Dc(V.enrollment_status||"approved");return e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs($,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsxs(Q,{className:"text-lg",children:[V.first_name," ",V.last_name]}),e.jsxs(Ye,{children:[At(V.birth_date)," • ",V.gender==="M"?a?"ذكر":"Garçon":a?"أنثى":"Fille"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${pe.color} ${pe.bgColor}`,children:[pn(V.status),e.jsx("span",{className:"ml-1 rtl:ml-0 rtl:mr-1",children:pe.text})]})})]})}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-3 rounded-lg ${re.bgColor}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a?"الحضور اليوم:":"Présence aujourd'hui:"}),e.jsx("span",{className:`text-sm font-medium ${re.color}`,children:re.text})]}),se.check_in&&e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse mt-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[e.jsx(ae,{className:"w-3 h-3"}),e.jsxs("span",{children:[a?"الوصول:":"Arrivée:"," ",se.check_in]})]}),se.check_out&&e.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[e.jsx(ae,{className:"w-3 h-3"}),e.jsxs("span",{children:[a?"المغادرة:":"Départ:"," ",se.check_out]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:a?"معلومات الولي":"Informations parent"}),e.jsx("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:V.parent_first_name?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(me,{className:"w-3 h-3"}),e.jsxs("span",{children:[V.parent_first_name," ",V.parent_last_name]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Re,{className:"w-3 h-3"}),V.parent_phone?e.jsx("a",{href:`tel:${V.parent_phone}`,className:"text-blue-600 hover:text-blue-800 underline",dir:"ltr",children:V.parent_phone}):e.jsx("span",{dir:"ltr",className:a?"text-right":"text-left",children:a?"غير محدد":"Non spécifié"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-gray-500",children:a?"لا يوجد ولي أمر مسجل":"Aucun parent enregistré"}),s()&&e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>ht(V),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[e.jsx(bt,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),a?"ربط ولي أمر":"Associer parent"]})]})})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a?"معلومات طبية:":"Infos médicales:"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:V.medical_info||(a?"لا توجد معلومات طبية":"Aucune information médicale")})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 rtl:space-x-reverse pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>X(V),children:[e.jsx(Oe,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),a?"عرض":"Voir"]}),(s()||r())&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>K(V),children:[e.jsx(Sa,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),a?"تعديل":"Modifier"]}),s()&&e.jsxs(L,{size:"sm",variant:"destructive",onClick:()=>ue(V),disabled:i===V.id,children:[e.jsx(xl,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),a?"حذف":"Supprimer"]})]})]})]})})]})},V.id)})}),v.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(le,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:a?"لا توجد أطفال":"Aucun enfant trouvé"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a?"لا توجد أطفال مطابقة لمعايير البحث":"Aucun enfant ne correspond aux critères de recherche"})]}),d&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:a?"ربط ولي أمر":"Associer un parent"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a?"الطفل":"Enfant"}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[h.first_name," ",h.last_name]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:At(h.birth_date)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a?"اختر ولي الأمر":"Sélectionner un parent"}),e.jsxs("select",{value:x,onChange:V=>j(V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:a?"اختر ولي أمر...":"Sélectionner un parent..."}),f.map(V=>e.jsxs("option",{value:V.id,children:[V.first_name," ",V.last_name," (",V.email,")"]},V.id))]})]}),x&&e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:a?"سيتم ربط هذا الطفل بولي الأمر المحدد. يمكن لولي الأمر بعد ذلك رؤية معلومات الطفل في حسابه.":"Cet enfant sera associé au parent sélectionné. Le parent pourra alors voir les informations de l'enfant dans son compte."})})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(L,{onClick:()=>{m(!1),y(null),j("")},variant:"outline",className:"flex-1",disabled:i==="associate",children:a?"إلغاء":"Annuler"}),e.jsxs(L,{onClick:jr,disabled:!x||i==="associate",className:"flex-1",children:[i==="associate"?e.jsx(Fe,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"}):e.jsx(bt,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),i==="associate"?a?"جاري الربط...":"Association...":a?"ربط":"Associer"]})]})]})}),h&&!d&&!c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a?"تفاصيل الطفل":"Détails de l'enfant"}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>y(null),children:"✕"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a?"الاسم الأول":"Prénom"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:h.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a?"اسم العائلة":"Nom de famille"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:h.last_name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a?"تاريخ الميلاد":"Date de naissance"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:new Date(h.birth_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a?"العمر":"Âge"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:At(h.birth_date)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a?"الجنس":"Genre"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:h.gender==="M"?a?"ذكر":"Garçon":a?"أنثى":"Fille"})]}),h.medical_info&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a?"المعلومات الطبية":"Informations médicales"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:h.medical_info})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a?"جهة الاتصال الطارئة":"Contact d'urgence"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:h.emergency_contact_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a?"هاتف الطوارئ":"Téléphone d'urgence"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",dir:"ltr",children:h.emergency_contact_phone})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:a?"معلومات ووسائل الاتصال":"Informations et moyens de contact"}),h.parent_first_name&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:a?"👤 الوالد":"👤 Parent"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-300",children:a?"الاسم":"Nom"}),e.jsxs("p",{className:"mt-1 text-sm text-blue-900 dark:text-blue-100",children:[h.parent_first_name," ",h.parent_last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-300",children:a?"البريد الإلكتروني":"Email"}),e.jsx("p",{className:"mt-1 text-sm text-blue-900 dark:text-blue-100",dir:"ltr",children:h.parent_email||"Non renseigné"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-300",children:a?"الهاتف":"Téléphone"}),e.jsx("p",{className:"mt-1 text-sm text-blue-900 dark:text-blue-100",dir:"ltr",children:h.parent_phone})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.parent_email&&e.jsxs(L,{size:"sm",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-100",onClick:()=>window.location.href=`mailto:${h.parent_email}`,children:[e.jsx(Ue,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),a?"إرسال إيميل":"Envoyer email"]}),h.parent_phone&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{size:"sm",variant:"outline",className:"border-green-300 text-green-700 hover:bg-green-100",onClick:()=>window.location.href=`tel:${h.parent_phone}`,children:[e.jsx(Re,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),a?"اتصال":"Appeler"]}),e.jsxs(L,{size:"sm",variant:"outline",className:"border-purple-300 text-purple-700 hover:bg-purple-100",onClick:()=>window.location.href=`sms:${h.parent_phone}`,children:[e.jsx(Hr,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),a?"رسالة نصية":"SMS"]})]})]})]}),h.emergency_contact_name&&h.emergency_contact_name!==`${h.parent_first_name} ${h.parent_last_name}`&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h5",{className:"font-medium text-orange-900 dark:text-orange-100",children:a?"🚨 جهة الاتصال للطوارئ":"🚨 Contact d'urgence"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 dark:text-orange-300",children:a?"الاسم":"Nom"}),e.jsx("p",{className:"mt-1 text-sm text-orange-900 dark:text-orange-100",children:h.emergency_contact_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 dark:text-orange-300",children:a?"الهاتف":"Téléphone"}),e.jsx("p",{className:"mt-1 text-sm text-orange-900 dark:text-orange-100",dir:"ltr",children:h.emergency_contact_phone})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(L,{size:"sm",variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-100",onClick:()=>window.location.href=`tel:${h.emergency_contact_phone}`,children:[e.jsx(Re,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),a?"اتصال طارئ":"Appel d'urgence"]}),e.jsxs(L,{size:"sm",variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-100",onClick:()=>window.location.href=`sms:${h.emergency_contact_phone}`,children:[e.jsx(Hr,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),a?"رسالة طارئة":"SMS d'urgence"]})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(L,{onClick:()=>{y(null),H([])},children:a?"إغلاق":"Fermer"})})]})})}),c&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a?"تعديل معلومات الاتصال والطبية":"Modifier les contacts et informations médicales"}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>{u(!1),y(null)},children:"✕"})]}),e.jsxs("form",{className:"space-y-6",onSubmit:Se,children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:a?"معلومات الطفل (غير قابلة للتعديل)":"Informations de l'enfant (non modifiables)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a?"الاسم:":"Nom:"}),e.jsxs("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 font-medium text-gray-900 dark:text-white",children:[h.first_name," ",h.last_name]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a?"تاريخ الميلاد:":"Date de naissance:"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 font-medium text-gray-900 dark:text-white",children:new Date(h.birth_date).toLocaleDateString()})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a?"المعلومات الطبية":"Informations médicales"}),e.jsx("textarea",{value:C.medical_info||"",onChange:V=>we("medical_info",V.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:a?"أدخل المعلومات الطبية (حساسية، أدوية، ملاحظات خاصة...)":"Entrez les informations médicales (allergies, médicaments, notes spéciales...)"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:a?"جهة الاتصال للطوارئ":"Contact d'urgence"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a?"الاسم الكامل":"Nom complet"}),e.jsx("input",{type:"text",value:C.emergency_contact_name||"",onChange:V=>we("emergency_contact_name",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:a?"اسم جهة الاتصال للطوارئ":"Nom du contact d'urgence",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a?"رقم الهاتف":"Numéro de téléphone"}),e.jsx("input",{type:"tel",value:C.emergency_contact_phone||"",onChange:V=>we("emergency_contact_phone",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"+33 6 12 34 56 78",required:!0,dir:"ltr"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:a?"يمكن أن يكون هذا الشخص هو الوالد أو شخص آخر موثوق":"Peut être le parent ou une autre personne de confiance"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(L,{type:"button",onClick:()=>{u(!1),y(null),S({})},variant:"outline",className:"flex-1",disabled:i==="save",children:a?"إلغاء":"Annuler"}),e.jsx(L,{type:"submit",className:"flex-1",disabled:i==="save",children:i==="save"?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"}),a?"جاري الحفظ...":"Sauvegarde..."]}):a?"حفظ التغييرات":"Sauvegarder"})]})]})]})})})]})},Jg=()=>{const{user:t}=oe(),{isRTL:s}=te(),r=ct(),[a]=Ic(),[n,l]=b.useState(!1),[i,o]=b.useState([]),d=a.get("personal")==="true",{register:m,handleSubmit:c,formState:{errors:u},watch:h,setValue:y}=lr();b.useEffect(()=>{d&&t&&(y("emergency_contact_name",`${t.first_name} ${t.last_name}`),y("emergency_contact_phone",t.phone||""))},[d,t,y]);const f=async j=>{var v,k;l(!0);try{const N={first_name:j.first_name,last_name:j.last_name,birth_date:j.birth_date,gender:j.gender,medical_info:j.medical_info||"",emergency_contact_name:j.emergency_contact_name,emergency_contact_phone:j.emergency_contact_phone,status:"pending"},g=await hs.createChild(N);g.success?(U.success(s?"تم إضافة الطفل بنجاح":"Enfant ajouté avec succès"),r("/dashboard/children")):U.error(g.error||(s?"خطأ في إضافة الطفل":"Erreur lors de l'ajout"))}catch(N){console.error("Erreur ajout enfant:",N),U.error(((k=(v=N.response)==null?void 0:v.data)==null?void 0:k.error)||(s?"خطأ في إضافة الطفل":"Erreur lors de l'ajout"))}finally{l(!1)}},p=j=>{if(!j)return"";const v=new Date,k=new Date(j),N=(v.getFullYear()-k.getFullYear())*12+(v.getMonth()-k.getMonth());if(N<12)return`${N} ${s?"شهر":"mois"}`;{const g=Math.floor(N/12),_=N%12;return`${g} ${s?"سنة":"an"}${g>1?"s":""} ${_>0?`${_} ${s?"شهر":"mois"}`:""}`}},x=h("birth_date");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsxs(L,{variant:"outline",onClick:()=>r("/dashboard/children"),className:"flex items-center",children:[e.jsx(et,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),s?"العودة":"Retour"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d?s?"إضافة طفلي":"Ajouter mon enfant":s?"إضافة طفل جديد":"Ajouter un enfant"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d?s?"إدخال معلومات طفلي الشخصي":"Saisir les informations de mon enfant personnel":s?"إدخال معلومات الطفل الجديد":"Saisir les informations du nouvel enfant"})]})]})}),e.jsxs($,{children:[e.jsxs(J,{children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(le,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),s?"معلومات الطفل":"Informations de l'enfant"]}),e.jsx(Ye,{children:s?"جميع الحقول المطلوبة يجب ملؤها":"Tous les champs obligatoires doivent être remplis"})]}),e.jsx(I,{children:e.jsxs("form",{onSubmit:c(f),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s?"الاسم الأول":"Prénom"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",...m("first_name",{required:s?"الاسم الأول مطلوب":"Prénom requis"}),className:`w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${u.first_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:s?"أدخل الاسم الأول":"Entrez le prénom"})]}),u.first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.first_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s?"اسم العائلة":"Nom"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",...m("last_name",{required:s?"اسم العائلة مطلوب":"Nom requis"}),className:`w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${u.last_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:s?"أدخل اسم العائلة":"Entrez le nom"})]}),u.last_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.last_name.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s?"تاريخ الميلاد":"Date de naissance"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"date",...m("birth_date",{required:s?"تاريخ الميلاد مطلوب":"Date de naissance requise",validate:j=>{const v=new Date(j),k=new Date,N=new Date;return N.setFullYear(k.getFullYear()-6),v>k?s?"تاريخ الميلاد لا يمكن أن يكون في المستقبل":"La date de naissance ne peut pas être dans le futur":v<N?s?"الطفل كبير جداً للحضانة":"L'enfant est trop âgé pour la crèche":!0}}),className:`w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${u.birth_date?"border-red-500":"border-gray-300 dark:border-gray-600"}`})]}),x&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s?"العمر:":"Âge:"," ",p(x)]}),u.birth_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.birth_date.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s?"الجنس":"Sexe"," *"]}),e.jsxs("select",{...m("gender",{required:s?"الجنس مطلوب":"Sexe requis"}),className:`w-full px-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${u.gender?"border-red-500":"border-gray-300 dark:border-gray-600"}`,children:[e.jsx("option",{value:"",children:s?"اختر الجنس":"Sélectionner le sexe"}),e.jsx("option",{value:"M",children:s?"ذكر":"Masculin"}),e.jsx("option",{value:"F",children:s?"أنثى":"Féminin"})]}),u.gender&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.gender.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s?"تاريخ التسجيل":"Date d'inscription"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"date",...m("enrollment_date"),defaultValue:new Date().toISOString().split("T")[0],className:"w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors border-gray-300 dark:border-gray-600"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s?"المعلومات الطبية":"Informations médicales"}),e.jsxs("div",{className:"relative",children:[e.jsx(_t,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-3 text-gray-400 w-5 h-5"}),e.jsx("textarea",{...m("medical_info"),rows:3,className:"w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors border-gray-300 dark:border-gray-600",placeholder:s?"الحساسية، الأدوية، ملاحظات طبية...":"Allergies, médicaments, notes médicales..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s?"اسم جهة الاتصال للطوارئ":"Contact d'urgence"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",...m("emergency_contact_name",{required:s?"اسم جهة الاتصال للطوارئ مطلوب":"Contact d'urgence requis"}),className:`w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${u.emergency_contact_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:s?"اسم جهة الاتصال":"Nom du contact"})]}),u.emergency_contact_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.emergency_contact_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s?"هاتف الطوارئ":"Téléphone d'urgence"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",...m("emergency_contact_phone",{required:s?"هاتف الطوارئ مطلوب":"Téléphone d'urgence requis"}),className:`w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-3 border rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors ${u.emergency_contact_phone?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:s?"رقم الهاتف":"Numéro de téléphone"})]}),u.emergency_contact_phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.emergency_contact_phone.message})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",...m("lunch_assistance"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 rtl:ml-0 rtl:mr-2 block text-sm text-gray-700 dark:text-gray-300",children:s?"مساعدة في الغداء":"Assistance pour le déjeuner"})]})}),e.jsxs("div",{className:"flex justify-end space-x-4 rtl:space-x-reverse pt-6",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>r("/dashboard/children"),children:s?"إلغاء":"Annuler"}),e.jsx(L,{type:"submit",disabled:n,children:n?e.jsx(ne,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(_a,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),s?"حفظ":"Enregistrer"]})})]})]})})]})]})},It={getAllEnrollments:async(t={})=>{try{const{page:s=1,limit:r=20,status:a="all"}=t;return(await B.get("/api/enrollments",{params:{page:s,limit:r,status:a}})).data}catch(s){throw console.error("Erreur lors de la récupération des inscriptions:",s),s}},getEnrollmentById:async t=>{try{return(await B.get(`/api/enrollments/${t}`)).data}catch(s){throw console.error("Erreur lors de la récupération de l'inscription:",s),s}},getEnrollmentStats:async()=>{try{return(await B.get("/api/enrollments/stats")).data}catch(t){throw console.error("Erreur lors de la récupération des statistiques:",t),t}},createEnrollment:async(t,s=[])=>{try{const r=new FormData;return Object.keys(t).forEach(n=>{t[n]!==null&&t[n]!==void 0&&r.append(n,t[n])}),s.forEach(n=>{r.append("documents",n)}),(await B.post("/api/enrollments",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Erreur lors de la création de l'inscription:",r),r}},approveEnrollment:async(t,s={})=>{try{return(await B.put(`/api/enrollments/${t}/approve`,s)).data}catch(r){throw console.error("Erreur lors de l'approbation de l'inscription:",r),r}},rejectEnrollment:async(t,s={})=>{try{return(await B.put(`/enrollments/${t}/reject`,s)).data}catch(r){throw console.error("Erreur lors du rejet de l'inscription:",r),r}}},Vs=()=>{const{user:t}=Pa(),{isRTL:s}=cr(),[r,a]=b.useState(!0),[n,l]=b.useState([]),[i,o]=b.useState("all"),[d,m]=b.useState(null),[c,u]=b.useState(!1),[h,y]=b.useState(!1),[f,p]=b.useState(!1),[x,j]=b.useState({appointment_date:"",admin_comment:""}),[v,k]=b.useState(!1),[N,g]=b.useState([]);b.useEffect(()=>{_()},[i]),b.useEffect(()=>{(async()=>{try{const A=await It.getAllEnrollments({status:"all",limit:1e3});A.enrollments&&g(A.enrollments)}catch(A){console.warn("Erreur chargement compteurs:",A),g(n)}})()},[]);const _=async()=>{var T;try{a(!0);try{const A=await It.getAllEnrollments({status:i==="all"?"all":i,limit:100});if(A.enrollments){l(A.enrollments),k(!1);return}}catch(A){console.error("❌ Erreur API:",A),console.error("Détails erreur:",((T=A.response)==null?void 0:T.data)||A.message),l([]),k(!0)}}catch(A){console.error("Erreur récupération inscriptions:",A),Ne.error(s?"خطأ في تحميل الطلبات":"Erreur lors du chargement des demandes")}finally{a(!1)}},w=T=>{m(T),u(!0)},P=async()=>{if(d){y(!0);try{await It.approveEnrollment(d.id,{appointment_date:x.appointment_date||null,admin_comment:x.admin_comment||""}),await _(),u(!1),p(!1),m(null),j({appointment_date:"",admin_comment:""})}catch(T){console.error("Erreur lors de l'approbation:",T)}finally{y(!1)}}},D=()=>{_()};n.filter(T=>T.status===i);const C=T=>{switch(T){case"pending":return e.jsx(ae,{className:"w-4 h-4 text-yellow-500"});case"approved":return e.jsx(je,{className:"w-4 h-4 text-green-500"});case"rejected":return e.jsx(Ke,{className:"w-4 h-4 text-red-500"});default:return e.jsx(Ce,{className:"w-4 h-4 text-gray-500"})}},S=T=>({pending:s?"في الانتظار":"En attente",approved:s?"مقبول":"Approuvé",rejected:s?"مرفوض":"Rejeté"})[T]||T,R=T=>{switch(T){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"}},H=T=>{const A=new Date,q=new Date(T),M=(A.getFullYear()-q.getFullYear())*12+(A.getMonth()-q.getMonth());if(M<12)return`${M} ${s?"شهر":"mois"}`;{const O=Math.floor(M/12),X=M%12;return`${O} ${s?"سنة":"an"}${O>1?"s":""} ${X>0?`${X} ${s?"شهر":"mois"}`:""}`}},z=[{id:"all",label:s?"الكل":"Toutes",count:N.length},{id:"pending",label:s?"في الانتظار":"En attente",count:N.filter(T=>T.status==="pending").length},{id:"approved",label:s?"مقبولة":"Approuvées",count:N.filter(T=>T.status==="approved").length},{id:"rejected",label:s?"مرفوضة":"Rejetées",count:N.filter(T=>T.status==="rejected").length}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s?"جميع طلبات التسجيل":"Toutes les inscriptions"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s?"عرض وتتبع جميع طلبات التسجيل وحالاتها":"Consulter et suivre toutes les demandes d'inscription et leur statut"})]}),e.jsxs(L,{onClick:D,variant:"outline",size:"sm",disabled:r,children:[e.jsx(Fe,{className:`w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 ${r?"animate-spin":""}`}),s?"تحديث":"Actualiser"]})]}),v&&e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-orange-800 dark:text-orange-200",children:s?"بيانات تجريبية":"Données de démonstration"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1",children:s?"لا يمكن الاتصال بقاعدة البيانات. يتم عرض بيانات تجريبية.":"Impossible de se connecter à la base de données. Affichage des données de démonstration."})]})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"-mb-px flex space-x-8 rtl:space-x-reverse",children:z.map(T=>e.jsxs("button",{onClick:()=>o(T.id),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${i===T.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[T.label,e.jsx("span",{className:`ml-2 rtl:ml-0 rtl:mr-2 py-0.5 px-2 rounded-full text-xs ${i===T.id?"bg-primary-100 text-primary-600 dark:bg-primary-900/20 dark:text-primary-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:T.count})]},T.id))})}),r?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ne,{size:"lg"})}):n.length===0?e.jsx($,{children:e.jsxs(I,{className:"text-center py-8",children:[e.jsx(Ce,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s?"لا توجد طلبات في هذه الفئة":"Aucune demande dans cette catégorie"})]})}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map(T=>e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx($,{className:"hover:shadow-md transition-shadow",children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[C(T.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(T.status)}`,children:S(T.status)})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(T.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white mb-2",children:[T.child_first_name," ",T.child_last_name]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),H(T.child_birth_date)," (",T.child_gender==="M"?s?"ذكر":"Garçon":s?"أنثى":"Fille",")"]}),T.decision_by&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h5",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:s?"معلومات القرار":"Informations de décision"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),e.jsxs("span",{children:[T.decision_by," (",T.decision_by_role,")"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),e.jsxs("span",{children:[s?"تاريخ القرار:":"Décision:"," ",new Date(T.decision_date).toLocaleDateString()]})]}),T.processed_date&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),e.jsxs("span",{children:[s?"تاريخ المعالجة:":"Traitement:"," ",new Date(T.processed_date).toLocaleDateString()]})]}),T.admin_comment&&e.jsxs("div",{className:"mt-2 text-xs italic text-gray-600 dark:text-gray-400",children:['"',T.admin_comment,'"']}),T.rejection_reason&&e.jsxs("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:[s?"سبب الرفض:":"Raison du rejet:"," ",T.rejection_reason]})]})]}),!T.decision_by&&T.status==="pending"&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center text-xs text-yellow-700 dark:text-yellow-300",children:[e.jsx(ae,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),e.jsx("span",{children:s?"في انتظار المراجعة":"En attente de révision"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:s?"ولي الأمر":"Parent"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),T.parent_first_name," ",T.parent_last_name]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),e.jsx("a",{href:`mailto:${T.parent_email}`,className:"text-blue-600 hover:text-blue-800",children:T.parent_email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),e.jsx("a",{href:`tel:${T.parent_phone||""}`,className:"text-blue-600 hover:text-blue-800",dir:"ltr",children:T.parent_phone||"Téléphone non disponible"})]})]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 rtl:space-x-reverse ml-4 rtl:ml-0 rtl:mr-4",children:e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>w(T),children:[e.jsx(Oe,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),s?"عرض التفاصيل":"Voir détails"]})})]})})})},T.id))}),c&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s?"تفاصيل طلب التسجيل":"Détails de la demande"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(Ht,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:s?"معلومات الطفل":"Informations de l'enfant"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"الاسم:":"Nom:"}),e.jsxs("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:[d.child_first_name," ",d.child_last_name]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"تاريخ الميلاد:":"Date de naissance:"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:new Date(d.child_birth_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"الجنس:":"Sexe:"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:d.child_gender==="M"?s?"ذكر":"Masculin":s?"أنثى":"Féminin"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"العمر:":"Âge:"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:H(d.child_birth_date)})]})]}),d.child_medical_info&&e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"المعلومات الطبية:":"Informations médicales:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:d.child_medical_info})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:s?"معلومات ولي الأمر":"Informations du parent"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"الاسم:":"Nom:"}),e.jsxs("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:[d.parent_first_name," ",d.parent_last_name]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"البريد الإلكتروني:":"Email:"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:d.parent_email})]}),d.parent_phone&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"الهاتف:":"Téléphone:"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:d.parent_phone})]})]})]}),(d.emergency_contact_name||d.emergency_contact_phone)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:s?"جهة الاتصال للطوارئ":"Contact d'urgence"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[d.emergency_contact_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"الاسم:":"Nom:"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:d.emergency_contact_name})]}),d.emergency_contact_phone&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s?"الهاتف:":"Téléphone:"}),e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2",children:d.emergency_contact_phone})]})]})]}),d.status==="pending"&&e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(L,{onClick:()=>{u(!1),window.location.href=`/dashboard/pending-enrollments?highlight=${d.id}`},disabled:h,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ce,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),s?"معالجة الملف الآن":"Traitement le dossier maintenant"]})})]})]})})}),f&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:s?"قبول طلب التسجيل":"Approuver la demande d'inscription"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[d.child_first_name," ",d.child_last_name]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s?"الوالد:":"Parent:"," ",d.parent_first_name," ",d.parent_last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s?"تاريخ الموعد (اختياري)":"Date de rendez-vous (optionnel)"}),e.jsx("input",{type:"date",value:x.appointment_date,onChange:T=>j(A=>({...A,appointment_date:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s?"ملاحظات إضافية (اختياري)":"Commentaires additionnels (optionnel)"}),e.jsx("textarea",{value:x.admin_comment,onChange:T=>j(A=>({...A,admin_comment:T.target.value})),placeholder:s?"أضف ملاحظات للوالد...":"Ajoutez des notes pour le parent...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",rows:"3"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 rtl:space-x-reverse mt-6",children:[e.jsx(L,{variant:"outline",onClick:()=>{p(!1),j({appointment_date:"",admin_comment:""})},disabled:h,children:s?"إلغاء":"Annuler"}),e.jsxs(L,{onClick:P,disabled:h,className:"bg-green-600 hover:bg-green-700",children:[h?e.jsx(ne,{size:"sm"}):e.jsx(ps,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),s?"تأكيد القبول":"Confirmer l'approbation"]})]})]})})})]})},nt={getTodayAttendance:async(t={})=>{try{const{page:s=1,limit:r=50}=t;return(await B.get("/api/attendance/today",{params:{page:s,limit:r}})).data}catch(s){throw console.error("Erreur lors de la récupération des présences d'aujourd'hui:",s),s}},getAttendanceByDate:async(t,s={})=>{try{const{page:r=1,limit:a=50}=s;return(await B.get(`/api/attendance/date/${t}`,{params:{page:r,limit:a}})).data}catch(r){throw console.error("Erreur lors de la récupération des présences par date:",r),r}},getAttendanceStats:async(t=null)=>{try{const s=t?{date:t}:{};return(await B.get("/api/attendance/stats",{params:s})).data}catch(s){throw console.error("Erreur lors de la récupération des statistiques:",s),s}},getCurrentlyPresent:async()=>{try{return(await B.get("/api/attendance/currently-present")).data}catch(t){throw console.error("Erreur lors de la récupération des présents:",t),t}},checkIn:async(t,s=null)=>{try{return(await B.post("/api/attendance/check-in",{child_id:t,notes:s})).data}catch(r){throw console.error("Erreur lors de l'enregistrement de l'arrivée:",r),r}},checkOut:async(t,s=null)=>{try{return(await B.post("/api/attendance/check-out",{child_id:t,notes:s})).data}catch(r){throw console.error("Erreur lors de l'enregistrement du départ:",r),r}},getChildAttendanceHistory:async(t,s={})=>{try{const{page:r=1,limit:a=30}=s;return(await B.get(`/api/attendance/child/${t}/history`,{params:{page:r,limit:a}})).data}catch(r){throw console.error("Erreur lors de la récupération de l'historique:",r),r}},getChildTodayAttendance:async t=>{try{return(await B.get(`/api/attendance/child/${t}/today`)).data}catch(s){throw console.error("Erreur lors de la récupération de la présence du jour:",s),s}}},Xe=(t,s=!1)=>{if(!t||t==="null"||t===null||t===void 0)return"-";try{const r=new Date(t);return isNaN(r.getTime())?"-":r.toLocaleTimeString(s?"ar-TN":"fr-FR",{hour:"2-digit",minute:"2-digit",timeZone:"Africa/Tunis"})}catch(r){return console.error("Erreur formatTime:",r,"pour:",t),"-"}},sl=(t,s=!1)=>{if(!t||t==="null"||t===null||t===void 0)return"-";try{const r=new Date(t);return isNaN(r.getTime())?"-":r.toLocaleDateString(s?"ar-TN":"fr-FR")}catch(r){return console.error("Erreur formatDate:",r,"pour:",t),"-"}},ls=(t,s)=>{if(!t||!s||t==="null"||s==="null")return null;try{const r=new Date(t),a=new Date(s);if(isNaN(r.getTime())||isNaN(a.getTime()))return null;const l=(a.getTime()-r.getTime())/(1e3*60*60);return Math.round(l*10)/10}catch(r){return console.error("Erreur calculateDuration:",r),null}},rl=({currentlyPresent:t,attendanceData:s,allChildren:r,stats:a,onCheckIn:n,onCheckOut:l,actionLoading:i})=>{const{isRTL:o}=te(),d=m=>{const c=new Date,u=new Date(m),h=(c.getFullYear()-u.getFullYear())*12+(c.getMonth()-u.getMonth());if(h<12)return`${h} ${o?"شهر":"mois"}`;{const y=Math.floor(h/12);return`${y} ${o?"سنة":"an"}${y>1?"s":""}`}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:o?"المجموع":"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.total)||0})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:o?"حاضر":"Présents"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:(t==null?void 0:t.length)||0})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ke,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:o?"غائب":"Absents"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:(a==null?void 0:a.absent)||0})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:o?"مكتمل":"Terminé"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(a==null?void 0:a.completed)||0})]})]})})})]}),e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Ze,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),o?"الأطفال الحاضرون حالياً":"Enfants actuellement présents",e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded-full text-sm",children:(t==null?void 0:t.length)||0})]})}),e.jsx(I,{children:(t==null?void 0:t.length)===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(le,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:o?"لا يوجد أطفال حاضرون حالياً":"Aucun enfant présent actuellement"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t==null?void 0:t.map(m=>e.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:[m.first_name," ",m.last_name]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d(m.birth_date)})]})]})}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:o?"وقت الوصول:":"Arrivée:"}),e.jsx("span",{className:"font-medium",children:Xe(m.check_in_time,o)})]}),e.jsx(L,{onClick:()=>l(m.id),disabled:i===m.id,size:"sm",variant:"outline",className:"w-full mt-2",children:i===m.id?e.jsx(ne,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),o?"تسجيل المغادرة":"Enregistrer départ"]})})]})]},m.id))})})]}),e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),o?"تسجيل الحضور السريع":"Enregistrement rapide"]})}),e.jsx(I,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:((r==null?void 0:r.filter(c=>!(t==null?void 0:t.some(h=>h.id===c.id||h.child_id===c.id))))||[]).map(c=>{const u=s==null?void 0:s.find(p=>p.child_id===c.id),h=(u==null?void 0:u.check_in_time)&&!(u!=null&&u.check_out_time),y=(u==null?void 0:u.check_in_time)&&(u==null?void 0:u.check_out_time),f=!(u!=null&&u.check_in_time);return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${h?"bg-green-100 dark:bg-green-900":y?"bg-blue-100 dark:bg-blue-900":"bg-gray-100 dark:bg-gray-700"}`,children:e.jsx(le,{className:`w-5 h-5 ${h?"text-green-600 dark:text-green-400":y?"text-blue-600 dark:text-blue-400":"text-gray-400"}`})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:[c.first_name," ",c.last_name]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d(c.birth_date)})]})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${h?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":y?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:h?o?"حاضر":"Présent":y?o?"مكتمل":"Terminé":o?"غائب":"Absent"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[(u==null?void 0:u.check_in_time)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:o?"وصل:":"Arrivée:"}),e.jsx("span",{className:"font-medium",children:Xe(u.check_in_time,o)})]}),(u==null?void 0:u.check_out_time)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:o?"غادر:":"Départ:"}),e.jsx("span",{className:"font-medium",children:Xe(u.check_out_time,o)})]}),u.check_in_time&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-300 flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),o?"المدة:":"Durée:"]}),e.jsx("span",{className:"font-semibold text-primary-600 dark:text-primary-400",children:(()=>{const p=ls(u.check_in_time,u.check_out_time);if(p){const x=Math.floor(p),j=Math.round((p-x)*60);return x>0?`${x}h${j>0?` ${j}min`:""}`:`${j}min`}return"-"})()})]})]}),e.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse mt-3",children:[f&&e.jsx(L,{onClick:()=>n(c.id),disabled:i===c.id,size:"sm",className:"flex-1",children:i===c.id?e.jsx(ne,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),o?"وصول":"Arrivée"]})}),h&&e.jsx(L,{onClick:()=>l(c.id),disabled:i===c.id,size:"sm",variant:"outline",className:"flex-1",children:i===c.id?e.jsx(ne,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),o?"مغادرة":"Départ"]})})]})]})]},c.id)})})})]})]})},Xg=({attendanceData:t,selectedDate:s,onDateChange:r,searchTerm:a,onSearchChange:n,filterStatus:l,onFilterChange:i})=>{const{isRTL:o}=te(),d=x=>{const j=new Date,v=new Date(x),k=(j.getFullYear()-v.getFullYear())*12+(j.getMonth()-v.getMonth());if(k<12)return`${k} ${o?"شهر":"mois"}`;{const N=Math.floor(k/12);return`${N} ${o?"سنة":"an"}${N>1?"s":""}`}},m=x=>{if(!x)return"absent";const j=x.check_in_time!==null&&x.check_in_time!==void 0&&x.check_in_time!=="null"&&typeof x.check_in_time=="string"&&x.check_in_time.trim()!=="",v=x.check_out_time!==null&&x.check_out_time!==void 0&&x.check_out_time!=="null"&&typeof x.check_out_time=="string"&&x.check_out_time.trim()!=="";return j?j&&!v?"present":j&&v?"completed":"absent":"absent"},c=x=>{switch(x){case"present":return e.jsx(je,{className:"w-4 h-4 text-green-500"});case"absent":return e.jsx(Ke,{className:"w-4 h-4 text-red-500"});case"completed":return e.jsx(ae,{className:"w-4 h-4 text-blue-500"});default:return e.jsx(Ke,{className:"w-4 h-4 text-gray-500"})}},u=x=>({present:o?"حاضر":"Présent",absent:o?"غائب":"Absent",completed:o?"مكتمل":"Terminé"})[x]||x,h=x=>{switch(x){case"present":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"absent":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"}},y=x=>{var k,N,g;const j={enfant:`${x.child_first_name||((k=x.child)==null?void 0:k.first_name)} ${x.child_last_name||((N=x.child)==null?void 0:N.last_name)}`,age:d(x.child_birth_date||((g=x.child)==null?void 0:g.birth_date)),date:sl(x.date||s,o),arrivee:Xe(x.check_in_time,o),depart:Xe(x.check_out_time,o),duree:ls(x.check_in_time,x.check_out_time)?`${ls(x.check_in_time,x.check_out_time)}h`:"-",notes:x.notes||(o?"لا توجد ملاحظات":"Aucune note")},v=o?`تفاصيل الحضور:

الطفل: ${j.enfant}
العمر: ${j.age}
التاريخ: ${j.date}
وقت الوصول: ${j.arrivee}
وقت المغادرة: ${j.depart}
المدة: ${j.duree}
الملاحظات: ${j.notes}`:`Détails de présence:

Enfant: ${j.enfant}
Âge: ${j.age}
Date: ${j.date}
Arrivée: ${j.arrivee}
Départ: ${j.depart}
Durée: ${j.duree}
Notes: ${j.notes}`;alert(v)},f=()=>{if(p.length===0)return;const x=[o?"الطفل":"Enfant",o?"العمر":"Âge",o?"التاريخ":"Date",o?"وقت الوصول":"Heure arrivée",o?"وقت المغادرة":"Heure départ",o?"المدة (ساعات)":"Durée (heures)",o?"الحالة":"Statut",o?"ملاحظات":"Notes"],j=p.map(_=>{var D,C,S;const w=m(_),P=ls(_.check_in_time,_.check_out_time);return[`${_.child_first_name||((D=_.child)==null?void 0:D.first_name)} ${_.child_last_name||((C=_.child)==null?void 0:C.last_name)}`,d(_.child_birth_date||((S=_.child)==null?void 0:S.birth_date)),sl(_.date||s,o),Xe(_.check_in_time,o),Xe(_.check_out_time,o),P?`${P}h`:"",u(w),_.notes||""]}),v=[x,...j].map(_=>_.map(w=>`"${w}"`).join(",")).join(`
`),k=new Blob([v],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a"),g=URL.createObjectURL(k);N.setAttribute("href",g),N.setAttribute("download",`presences_${s}.csv`),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N)},p=(t==null?void 0:t.filter(x=>{var g,_;const j=x.child_first_name||((g=x.child)==null?void 0:g.first_name)||"",v=x.child_last_name||((_=x.child)==null?void 0:_.last_name)||"",k=j.toLowerCase().includes(a.toLowerCase())||v.toLowerCase().includes(a.toLowerCase());let N=!0;return l!=="all"&&(N=m(x)===l),k&&N}))||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Gt,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),o?"تصفية البيانات":"Filtres"]})}),e.jsx(I,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o?"التاريخ":"Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"date",value:s,onChange:x=>r(x.target.value),className:"w-full pl-10 rtl:pl-3 rtl:pr-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o?"البحث":"Recherche"}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:o?"البحث عن طفل...":"Rechercher un enfant...",value:a,onChange:x=>n(x.target.value),className:"w-full pl-10 rtl:pl-3 rtl:pr-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o?"الحالة":"Statut"}),e.jsxs("select",{value:l,onChange:x=>i(x.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:o?"الكل":"Tous"}),e.jsx("option",{value:"present",children:o?"حاضر":"Présent"}),e.jsx("option",{value:"absent",children:o?"غائب":"Absent"}),e.jsx("option",{value:"completed",children:o?"مكتمل":"Terminé"})]})]})]})})]}),e.jsxs($,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(be,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),o?"سجل الحضور":"Historique des présences",e.jsx("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 px-2 py-1 rounded-full text-sm",children:p.length})]}),e.jsx("div",{className:"flex space-x-2 rtl:space-x-reverse",children:e.jsxs(L,{variant:"outline",size:"sm",onClick:f,disabled:p.length===0,children:[e.jsx(dt,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),o?"تصدير CSV":"Exporter CSV"]})})]})}),e.jsx(I,{children:p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(be,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:o?"لا توجد سجلات للتاريخ المحدد":"Aucun enregistrement pour cette date"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left rtl:text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o?"الطفل":"Enfant"}),e.jsx("th",{className:"px-6 py-3 text-left rtl:text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o?"العمر":"Âge"}),e.jsx("th",{className:"px-6 py-3 text-left rtl:text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o?"وقت الوصول":"Arrivée"}),e.jsx("th",{className:"px-6 py-3 text-left rtl:text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o?"وقت المغادرة":"Départ"}),e.jsx("th",{className:"px-6 py-3 text-left rtl:text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o?"المدة":"Durée"}),e.jsx("th",{className:"px-6 py-3 text-left rtl:text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o?"الحالة":"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left rtl:text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o?"الإجراءات":"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:p.map(x=>{var k,N,g;const j=m(x),v=ls(x.check_in_time,x.check_out_time);return e.jsxs(F.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),e.jsx("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[x.child_first_name||((k=x.child)==null?void 0:k.first_name)," ",x.child_last_name||((N=x.child)==null?void 0:N.last_name)]})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:d(x.child_birth_date||((g=x.child)==null?void 0:g.birth_date))}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:Xe(x.check_in_time,o)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:Xe(x.check_out_time,o)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:v?`${v}h`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(j)}`,children:[c(j),e.jsx("span",{className:"ml-1 rtl:ml-0 rtl:mr-1",children:u(j)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>y(x),title:o?"عرض التفاصيل":"Voir les détails",children:e.jsx(Oe,{className:"w-4 h-4"})})})]},`${x.child_id}-${x.date}`)})})]})})})]})]})},Zg=({stats:t,attendanceData:s})=>{const{isRTL:r}=te(),[a,n]=b.useState("week"),i=(()=>{if(!s||s.length===0)return[];const c=new Date,u=new Date(c.getFullYear(),c.getMonth(),c.getDate());return s.filter(h=>{let y;if(h.date?y=new Date(h.date):h.check_in_time?y=new Date(h.check_in_time):y=new Date,isNaN(y.getTime()))return!1;switch(a){case"week":const f=new Date(u);f.setDate(u.getDate()-u.getDay()+1);const p=new Date(f);return p.setDate(f.getDate()+6),y>=f&&y<=p;case"month":return y.getMonth()===c.getMonth()&&y.getFullYear()===c.getFullYear();case"year":return y.getFullYear()===c.getFullYear();default:return!0}})})(),d=(()=>{if(!i||i.length===0)return{averagePresence:0,punctualityRate:0,averageStayDuration:0,mostActiveDay:"-",topPerformers:[]};const c=i.length,u=i.filter(_=>_.check_in_time).length,h=c>0?Math.round(u/c*100):0,y=i.filter(_=>_.check_in_time?new Date(_.check_in_time).getHours()<9:!1).length,f=u>0?Math.round(y/u*100):0,p=i.filter(_=>_.check_in_time&&_.check_out_time),x=p.reduce((_,w)=>{if(!w.check_in_time||!w.check_out_time)return _;const P=new Date(w.check_in_time),D=new Date(w.check_out_time);if(isNaN(P.getTime())||isNaN(D.getTime()))return _;const C=(D-P)/(1e3*60*60);return _+(C>0?C:0)},0),j=p.length>0&&x>0?Math.round(x/p.length*10)/10:0,v={};i.forEach(_=>{if(_.check_in_time){const w=new Date(_.check_in_time).toLocaleDateString();v[w]=(v[w]||0)+1}});const k=Object.keys(v).reduce((_,w)=>v[_]>v[w]?_:w,"-"),N={};i.forEach(_=>{if(_.child&&_.check_in_time){const w=_.child.id,P=`${_.child.first_name} ${_.child.last_name}`;N[w]||(N[w]={name:P,count:0}),N[w].count++}});const g=Object.values(N).sort((_,w)=>w.count-_.count).slice(0,5);return{averagePresence:h,punctualityRate:f,averageStayDuration:j,mostActiveDay:k,topPerformers:g}})(),m=[{day:r?"الإثنين":"Lun",present:12,absent:3},{day:r?"الثلاثاء":"Mar",present:14,absent:1},{day:r?"الأربعاء":"Mer",present:13,absent:2},{day:r?"الخميس":"Jeu",present:15,absent:0},{day:r?"الجمعة":"Ven",present:11,absent:4}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r?"إحصائيات الحضور":"Statistiques de présence"}),e.jsxs("select",{value:a,onChange:c=>n(c.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"week",children:r?"هذا الأسبوع":"Cette semaine"}),e.jsx("option",{value:"month",children:r?"هذا الشهر":"Ce mois"}),e.jsx("option",{value:"year",children:r?"هذا العام":"Cette année"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r?"معدل الحضور":"Taux de présence"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[d.averagePresence,"%"]})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(ae,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r?"معدل الالتزام بالوقت":"Ponctualité"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[d.punctualityRate,"%"]})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(gs,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r?"متوسط ساعات البقاء":"Durée moyenne"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[d.averageStayDuration,"h"]})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg",children:e.jsx(pl,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r?"إجمالي الأطفال":"Total enfants"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(t==null?void 0:t.total)||0})]})]})})})]}),e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(ar,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),r?"الحضور الأسبوعي":"Présence hebdomadaire"]})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-4",children:m.map((c,u)=>{const h=c.present+c.absent,y=h>0?c.present/h*100:0;return e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-16 text-sm font-medium text-gray-600 dark:text-gray-400",children:c.day}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.present," ",r?"حاضر":"présents"," / ",h," ",r?"إجمالي":"total"]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[Math.round(y),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx(F.div,{initial:{width:0},animate:{width:`${y}%`},transition:{duration:.5,delay:u*.1},className:"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full"})})]})]},u)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(jt,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),r?"الأطفال الأكثر التزاماً":"Enfants les plus assidus"]})}),e.jsx(I,{children:d.topPerformers.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(jt,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r?"لا توجد بيانات كافية":"Pas assez de données"})]}):e.jsx("div",{className:"space-y-3",children:d.topPerformers.map((c,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${u===0?"bg-yellow-100 text-yellow-800":u===1?"bg-gray-100 text-gray-800":u===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:u+1}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.name})]}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.count," ",r?"يوم":"jours"]})]},u))})})]}),e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(_t,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),r?"تنبيهات وتوصيات":"Alertes et recommandations"]})}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[d.averagePresence<80&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[e.jsx(_t,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:r?"معدل حضور منخفض":"Taux de présence faible"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:r?"معدل الحضور أقل من 80%. يُنصح بمتابعة الأسباب.":"Le taux de présence est inférieur à 80%. Il est recommandé de suivre les causes."})]})]})}),d.punctualityRate<70&&e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[e.jsx(ae,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:r?"تحسين الالتزام بالوقت":"Améliorer la ponctualité"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:r?"معدل الالتزام بالوقت يمكن تحسينه. تذكير الأهالي بأوقات الوصول.":"Le taux de ponctualité peut être amélioré. Rappeler aux parents les heures d'arrivée."})]})]})}),d.averagePresence>=90&&e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[e.jsx(jt,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:r?"أداء ممتاز!":"Excellent performance !"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:r?"معدل حضور ممتاز. استمروا في العمل الرائع!":"Excellent taux de présence. Continuez ce travail formidable !"})]})]})})]})})]})]})]})},Os=()=>{const{isAdmin:t,isStaff:s}=oe(),{isRTL:r}=te(),a=Ns(),[n,l]=b.useState(!0),i=()=>{const M=a.pathname;return M.includes("/today")?"today":M.includes("/history")?"history":M.includes("/stats")?"stats":"today"},[o,d]=b.useState(i()),[m,c]=b.useState([]),[u,h]=b.useState(null),[y,f]=b.useState([]),[p,x]=b.useState([]),[j,v]=b.useState(new Date().toISOString().split("T")[0]),[k,N]=b.useState(""),[g,_]=b.useState("all"),[w,P]=b.useState(null),D=[{id:"today",label:r?"اليوم":"Aujourd'hui",icon:ae,path:"/dashboard/attendance/today"},{id:"history",label:r?"التاريخ":"Historique",icon:be,path:"/dashboard/attendance/history"},{id:"stats",label:r?"الإحصائيات":"Statistiques",icon:ar,path:"/dashboard/attendance/stats"}],C=async()=>{try{switch(l(!0),o){case"today":await S();break;case"history":await R();break;case"stats":await H();break;default:await S()}}catch(M){console.error("Erreur chargement données:",M),U.error(r?"خطأ في تحميل البيانات":"Erreur lors du chargement")}finally{l(!1)}},S=async()=>{try{const[M,O,X,K]=await Promise.all([hs.getAllChildren({status:"approved",limit:100}),nt.getTodayAttendance(),nt.getCurrentlyPresent(),nt.getAttendanceStats()]),ue=M.success?M.data.children||[]:[];console.log("🎯 AttendancePage - Enfants chargés:",ue.length),x(ue),c(O.attendance||[]),f(X.children||[]),h(K)}catch(M){console.error("❌ AttendancePage - Erreur loadTodayData:",M)}},R=async()=>{try{const M=await nt.getAttendanceByDate(j);c(M.attendances||[])}catch(M){console.error("❌ AttendancePage - Erreur loadHistoryData:",M)}},H=async()=>{const[M,O]=await Promise.all([nt.getTodayAttendance(),nt.getAttendanceStats()]);c(M.attendance||M.attendances||[]),h(O)},z=async M=>{var O,X;try{P(M),await nt.checkIn(M),U.success(r?"تم تسجيل الوصول بنجاح":"Arrivée enregistrée avec succès"),await S()}catch(K){console.error("Erreur check-in:",K),U.error(((X=(O=K.response)==null?void 0:O.data)==null?void 0:X.error)||(r?"خطأ في تسجيل الوصول":"Erreur lors de l'enregistrement"))}finally{P(null)}},T=async M=>{var O,X;try{P(M),await nt.checkOut(M),U.success(r?"تم تسجيل المغادرة بنجاح":"Départ enregistré avec succès"),await S()}catch(K){console.error("Erreur check-out:",K),U.error(((X=(O=K.response)==null?void 0:O.data)==null?void 0:X.error)||(r?"خطأ في تسجيل المغادرة":"Erreur lors de l'enregistrement"))}finally{P(null)}};b.useEffect(()=>{C()},[o,j]),b.useEffect(()=>{d(i())},[a.pathname]);const A=()=>{C()},q=()=>{switch(o){case"today":return e.jsx(rl,{currentlyPresent:y,attendanceData:m,allChildren:p,stats:u,onCheckIn:z,onCheckOut:T,actionLoading:w});case"history":return e.jsx(Xg,{attendanceData:m,selectedDate:j,onDateChange:v,searchTerm:k,onSearchChange:N,filterStatus:g,onFilterChange:_});case"stats":return e.jsx(Zg,{stats:u,attendanceData:m});default:return console.log("🎯 AttendancePage - Rendu TodaySection avec allChildren:",p.length),e.jsx(rl,{currentlyPresent:y,attendanceData:m,allChildren:p,stats:u,onCheckIn:z,onCheckOut:T,actionLoading:w})}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ne,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r?"إدارة الحضور":"Gestion des présences"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r?"تتبع حضور وغياب الأطفال":"Suivi des présences et absences des enfants"})]}),e.jsxs(L,{onClick:A,variant:"outline",size:"sm",disabled:n,children:[e.jsx(Fe,{className:`w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 ${n?"animate-spin":""}`}),r?"تحديث":"Actualiser"]})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"-mb-px flex space-x-8 rtl:space-x-reverse",children:D.map(M=>{const O=M.icon,X=o===M.id;return e.jsxs(W,{to:M.path,className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap flex items-center ${X?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[e.jsx(O,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),M.label]},M.id)})})}),e.jsx(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:q()},o)]})},zr=()=>{const{user:t}=Pa(),s=()=>(t==null?void 0:t.role)==="admin",r=()=>(t==null?void 0:t.role)==="staff",{isRTL:a}=cr(),[n,l]=b.useState(!0),[i,o]=b.useState([]),[d,m]=b.useState(""),[c,u]=b.useState("all"),[h,y]=b.useState(!1),[f,p]=b.useState(!1),[x,j]=b.useState(null),[v,k]=b.useState({title:"",description:"",document_type:"reglement",is_public:!0}),N=async()=>{try{l(!0),o([{id:1,title:"Règlement intérieur",description:"Règlement de la crèche Mima Elghalia",document_type:"reglement",is_public:!0,created_at:new Date().toISOString(),uploaded_by_name:"Admin",uploaded_by_lastname:"System",original_filename:"reglement.pdf"},{id:2,title:"Formulaire d'inscription",description:"Formulaire à remplir pour l'inscription",document_type:"formulaire",is_public:!0,created_at:new Date().toISOString(),uploaded_by_name:"Admin",uploaded_by_lastname:"System",original_filename:"formulaire.pdf"}])}catch(C){console.error("Erreur lors du chargement des documents:",C),Ne.error("Erreur de connexion")}finally{l(!1)}};b.useEffect(()=>{N()},[c]);const g=()=>{N()},_=async()=>{if(!x||!v.title){Ne.error(a?"يرجى ملء جميع الحقول المطلوبة":"Veuillez remplir tous les champs requis");return}try{p(!0),await new Promise(C=>setTimeout(C,1e3)),Ne.success(a?"تم رفع المستند بنجاح":"Document uploadé avec succès"),y(!1),j(null),k({title:"",description:"",document_type:"reglement",is_public:!0}),N()}catch(C){console.error("Erreur upload:",C),Ne.error("Erreur lors de l'upload")}finally{p(!1)}},w=async C=>{if(window.confirm(a?"هل أنت متأكد من حذف هذا المستند؟":"Êtes-vous sûr de vouloir supprimer ce document ?"))try{o(S=>S.filter(R=>R.id!==C)),Ne.success(a?"تم حذف المستند بنجاح":"Document supprimé avec succès")}catch(S){console.error("Erreur suppression:",S),Ne.error("Erreur lors de la suppression")}},P=async(C,S)=>{try{Ne.success(a?"تم تحميل المستند":`Téléchargement de ${S} démarré`)}catch(R){console.error("Erreur téléchargement:",R),Ne.error("Erreur lors du téléchargement")}},D=i.filter(C=>{var R;return C.title.toLowerCase().includes(d.toLowerCase())||((R=C.description)==null?void 0:R.toLowerCase().includes(d.toLowerCase()))});return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ne,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a?"إدارة المستندات":"Gestion des documents"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a?"إدارة المستندات الإدارية والملفات":"Gérer les documents administratifs et fichiers"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{onClick:g,variant:"outline",size:"sm",disabled:n,children:[e.jsx(Fe,{className:`w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 ${n?"animate-spin":""}`}),a?"تحديث":"Actualiser"]}),(s()||r())&&e.jsxs(L,{onClick:()=>y(!0),children:[e.jsx(ir,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),a?"رفع مستند":"Ajouter document"]})]})]}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:a?"البحث في المستندات...":"Rechercher des documents...",value:d,onChange:C=>m(C.target.value),className:"w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("select",{value:c,onChange:C=>u(C.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:a?"جميع الأنواع":"Tous les types"}),e.jsx("option",{value:"reglement",children:a?"اللوائح":"Règlements"}),e.jsx("option",{value:"formulaire",children:a?"النماذج":"Formulaires"}),e.jsx("option",{value:"general",children:a?"عام":"Général"})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(C=>e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs($,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:e.jsx(Ce,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:C.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:C.document_type})]})]}),C.is_public&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300",children:a?"عام":"Public"})]})}),e.jsxs(I,{children:[C.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:C.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-4",children:[e.jsx("span",{children:new Date(C.created_at).toLocaleDateString(a?"ar":"fr")}),e.jsxs("span",{children:[C.uploaded_by_name," ",C.uploaded_by_lastname]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>P(C.id,C.original_filename),className:"flex-1",children:[e.jsx(dt,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),a?"تحميل":"Télécharger"]}),(s()||r())&&e.jsx(L,{size:"sm",variant:"outline",onClick:()=>w(C.id),className:"text-red-600 border-red-600 hover:bg-red-50",children:e.jsx(xl,{className:"w-4 h-4"})})]})]})]})},C.id))}),D.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ce,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:a?"لا توجد مستندات":"Aucun document trouvé"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a?"لا توجد مستندات مطابقة لمعايير البحث":"Aucun document ne correspond aux critères de recherche"})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:a?"رفع مستند جديد":"Ajouter un nouveau document"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a?"العنوان":"Titre"}),e.jsx("input",{type:"text",value:v.title,onChange:C=>k({...v,title:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:a?"عنوان المستند":"Titre du document"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a?"الوصف":"Description"}),e.jsx("textarea",{value:v.description,onChange:C=>k({...v,description:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:a?"وصف المستند":"Description du document",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a?"النوع":"Type"}),e.jsxs("select",{value:v.document_type,onChange:C=>k({...v,document_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"reglement",children:a?"لائحة":"Règlement"}),e.jsx("option",{value:"formulaire",children:a?"نموذج":"Formulaire"}),e.jsx("option",{value:"general",children:a?"عام":"Général"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a?"الملف":"Fichier"}),e.jsx("input",{type:"file",onChange:C=>j(C.target.files[0]),accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_public",checked:v.is_public,onChange:C=>k({...v,is_public:C.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_public",className:"ml-2 rtl:ml-0 rtl:mr-2 block text-sm text-gray-900 dark:text-white",children:a?"مستند عام (يمكن للجميع الوصول إليه)":"Document public (accessible à tous)"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(L,{onClick:()=>y(!1),variant:"outline",className:"flex-1",children:a?"إلغاء":"Annuler"}),e.jsxs(L,{onClick:_,disabled:f||!x||!v.title,className:"flex-1",children:[f?e.jsx(Fe,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"}):e.jsx(nr,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),f?a?"جاري الرفع...":"Upload...":a?"رفع":"Uploader"]})]})]})})]})},Qg=()=>{const{isRTL:t}=cr(),{user:s}=Pa(),r=()=>(s==null?void 0:s.role)==="admin",a=()=>(s==null?void 0:s.role)==="staff",[n,l]=b.useState(!0),[i,o]=b.useState([]),[d,m]=b.useState(!1),[c,u]=b.useState(null),[h,y]=b.useState(!1),[f,p]=b.useState(!1),[x,j]=b.useState(null);b.useEffect(()=>{const R=new URLSearchParams(window.location.search).get("highlight");R&&(j(parseInt(R)),window.history.replaceState({},"",window.location.pathname)),v()},[]),b.useEffect(()=>{x&&i.length>0&&setTimeout(()=>{const S=document.querySelector(`[data-enrollment-id="${x}"]`);S&&S.scrollIntoView({behavior:"smooth",block:"center"})},500)},[x,i]);const v=async()=>{var S;try{l(!0);try{const R=await It.getAllEnrollments({status:"pending",limit:100});if(R.enrollments){o(R.enrollments),p(!1);return}}catch(R){console.error("❌ Erreur API:",R),console.error("Détails erreur:",((S=R.response)==null?void 0:S.data)||R.message),o([]),p(!0)}}catch(R){console.error("Erreur:",R),Ne.error(t?"خطأ في تحميل الطلبات":"Erreur lors du chargement")}finally{l(!1)}},k=async S=>{try{m(!0),f?await new Promise(R=>setTimeout(R,1e3)):await It.approveEnrollment(S.id,{appointment_date:new Date().toISOString().split("T")[0],admin_comment:`Approuvé par ${s==null?void 0:s.first_name} ${s==null?void 0:s.last_name}`}),o(R=>R.filter(H=>H.id!==S.id)),Ne.success(t?"تم قبول الطلب":"Demande approuvée")}catch(R){console.error("Erreur approbation:",R),Ne.error(t?"خطأ في الموافقة":"Erreur lors de l'approbation")}finally{m(!1)}},N=async S=>{const R=prompt(t?"سبب الرفض:":"Raison du rejet:");if(R)try{m(!0),f?await new Promise(H=>setTimeout(H,1e3)):await It.rejectEnrollment(S.id,{reason:R,admin_comment:`Rejeté par ${s==null?void 0:s.first_name} ${s==null?void 0:s.last_name}`}),o(H=>H.filter(z=>z.id!==S.id)),Ne.success(t?"تم رفض الطلب":"Demande rejetée")}catch(H){console.error("Erreur rejet:",H),Ne.error(t?"خطأ في الرفض":"Erreur lors du rejet")}finally{m(!1)}},g=S=>{u(S),y(!0)},_=S=>{const R=S.original_name||S.filename;Ne.success(t?`تم تحميل ${R}`:`Téléchargement de ${R} démarré`)},w=S=>{const R=S.original_name||S.filename;Ne.success(t?`فتح ${R}`:`Ouverture de ${R}`)},P=S=>S.includes("carnet_medical")?"vaccination_record":S.includes("acte_naissance")?"birth_certificate":S.includes("certificat_medical")?"medical_certificate":"document",D=S=>{switch(S){case"birth_certificate":return e.jsx(Ce,{className:"w-5 h-5"});case"vaccination_record":return e.jsx(Qe,{className:"w-5 h-5"});case"medical_certificate":return e.jsx(zs,{className:"w-5 h-5"});case"address_proof":return e.jsx(Ft,{className:"w-5 h-5"});default:return e.jsx(Ce,{className:"w-5 h-5"})}},C=S=>{const R=new Date,H=new Date(S);let z=R.getFullYear()-H.getFullYear(),T=R.getMonth()-H.getMonth();(T<0||T===0&&R.getDate()<H.getDate())&&(z--,T+=12),R.getDate()<H.getDate()&&T--;const A=z*12+T;return A<12?`${A} ${t?"شهر":"mois"}`:`${z} ${t?"سنة":"an"}${z>1?"s":""}`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?"الطلبات في الانتظار":"Demandes en attente"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:t?"مراجعة وإدارة طلبات التسجيل الجديدة":"Examiner et gérer les nouvelles demandes d'inscription"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsxs(L,{onClick:v,variant:"outline",size:"sm",disabled:n,children:[e.jsx(Fe,{className:`w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 ${n?"animate-spin":""}`}),t?"تحديث":"Actualiser"]}),e.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900/20 px-3 py-2 rounded-lg",children:e.jsxs("span",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:[i.length," ",t?"طلب":"demande(s)"]})})]})]}),n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ne,{size:"lg"})}):i.length===0?e.jsx($,{children:e.jsxs(I,{className:"text-center py-12",children:[e.jsx(je,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t?"لا توجد طلبات في الانتظار":"Aucune demande en attente"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t?"جميع الطلبات تم معالجتها":"Toutes les demandes ont été traitées"})]})}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map(S=>e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},"data-enrollment-id":S.id,children:e.jsx($,{className:`hover:shadow-md transition-shadow ${S.id===x?"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-900/20":""}`,children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(ae,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200",children:t?"في الانتظار":"En attente"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(S.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white mb-2",children:[S.child_first_name," ",S.child_last_name]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),C(S.child_birth_date)," (",S.child_gender==="M"?t?"ذكر":"Garçon":t?"أنثى":"Fille",")"]}),S.medical_info&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),S.medical_info]}),S.documents&&S.documents.length>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(sd,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),e.jsxs("span",{className:"text-blue-600",children:[S.documents.length," ",t?"وثيقة":"document(s)"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:t?"معلومات الوالد":"Informations parent"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),S.parent_first_name," ",S.parent_last_name]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),e.jsx("a",{href:`mailto:${S.parent_email}`,className:"text-blue-600 hover:text-blue-800",children:S.parent_email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),e.jsx("a",{href:`tel:${S.parent_phone||""}`,className:"text-blue-600 hover:text-blue-800",dir:"ltr",children:S.parent_phone||"Téléphone non disponible"})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4 rtl:ml-0 rtl:mr-4",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>g(S),disabled:!S.files||S.files.length===0,children:[e.jsx(Oe,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),t?"الوثائق":"Documents"]}),(r()||a())&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{size:"sm",onClick:()=>k(S),disabled:d,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(je,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),t?"قبول":"Approuver"]}),e.jsxs(L,{size:"sm",variant:"destructive",onClick:()=>N(S),disabled:d,children:[e.jsx(Ke,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),t?"رفض":"Rejeter"]})]})]})]})})})},S.id))}),h&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t?"وثائق الطلب":"Documents de la demande"}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>y(!1),children:"✕"})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:[c.child_first_name," ",c.child_last_name]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t?"الوالد:":"Parent:"," ",c.parent_first_name," ",c.parent_last_name]})]}),c.files&&c.files.length>0?e.jsx("div",{className:"space-y-3",children:c.files.map(S=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:"text-blue-600",children:D(P(S.filename))}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:S.original_name||S.filename}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse text-sm text-gray-500",children:[e.jsx("span",{children:S.filename}),e.jsxs("span",{children:[Math.round(S.file_size/1024)," KB"]}),e.jsx("span",{children:S.mime_type})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>w(S),children:[e.jsx(Oe,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),t?"عرض":"Voir"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>_(S),children:[e.jsx(dt,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),t?"تحميل":"Télécharger"]})]})]})},S.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ce,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t?"لا توجد وثائق مرفقة":"Aucun document attaché"})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(L,{variant:"outline",onClick:()=>y(!1),children:t?"إغلاق":"Fermer"})})]})})})]})},ef=()=>{const{isRTL:t}=te(),{isAdmin:s}=oe(),[r,a]=b.useState([]),[n,l]=b.useState(!0),[i,o]=b.useState(""),[d,m]=b.useState("all"),[c,u]=b.useState(null),[h,y]=b.useState(!1);b.useEffect(()=>{(async()=>{try{setTimeout(()=>{a([{id:1,first_name:"Ahmed",last_name:"Ben Ali",email:"ahmed.benali@email.com",phone:"+216 25 123 456",status:"active",children_count:2,registration_date:"2024-01-15",last_login:"2024-10-20",children:["Lina Ben Ali","Omar Ben Ali"]},{id:2,first_name:"Fatma",last_name:"Trabelsi",email:"fatma.trabelsi@email.com",phone:"+216 22 987 654",status:"active",children_count:1,registration_date:"2024-02-20",last_login:"2024-10-22",children:["Youssef Trabelsi"]},{id:3,first_name:"Mohamed",last_name:"Khelifi",email:"mohamed.khelifi@email.com",phone:"+216 28 456 789",status:"inactive",children_count:1,registration_date:"2024-03-10",last_login:"2024-09-15",children:["Amina Khelifi"]},{id:4,first_name:"Amel",last_name:"Sassi",email:"amel.sassi@email.com",phone:"+216 26 321 987",status:"active",children_count:3,registration_date:"2023-12-05",last_login:"2024-10-21",children:["Sarra Sassi","Khalil Sassi","Nour Sassi"]}]),l(!1)},1e3)}catch(k){console.error("Erreur chargement parents:",k),l(!1)}})()},[]);const f=r.filter(v=>{const k=v.first_name.toLowerCase().includes(i.toLowerCase())||v.last_name.toLowerCase().includes(i.toLowerCase())||v.email.toLowerCase().includes(i.toLowerCase()),N=d==="all"||v.status===d;return k&&N}),p=v=>{u(v),y(!0)},x=v=>{a(k=>k.map(N=>N.id===v?{...N,status:N.status==="active"?"inactive":"active"}:N)),U.success(t?"تم تحديث حالة الولي":"Statut du parent mis à jour")},j=()=>{const v=`data:text/csv;charset=utf-8,Nom,Email,Téléphone,Enfants,Statut
`+f.map(g=>`${g.first_name} ${g.last_name},${g.email},${g.phone},${g.children_count},${g.status}`).join(`
`),k=encodeURI(v),N=document.createElement("a");N.setAttribute("href",k),N.setAttribute("download","parents.csv"),document.body.appendChild(N),N.click(),document.body.removeChild(N),U.success(t?"تم تصدير قائمة الأولياء":"Liste des parents exportée")};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ne,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?"إدارة الأولياء":"Gestion des Parents"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:t?"إدارة حسابات أولياء الأمور ومعلوماتهم":"Gérer les comptes et informations des parents"})]}),e.jsxs("div",{className:"flex space-x-3 rtl:space-x-reverse mt-4 sm:mt-0",children:[e.jsxs(L,{onClick:j,variant:"outline",className:"flex items-center",children:[e.jsx(dt,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),t?"تصدير":"Exporter"]}),s()&&e.jsxs(L,{className:"flex items-center bg-primary-500 hover:bg-primary-600",children:[e.jsx(ir,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),t?"إضافة ولي":"Ajouter Parent"]})]})]}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Be,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"إجمالي الأولياء":"Total Parents"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.length})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(Ze,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"نشط":"Actifs"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.filter(v=>v.status==="active").length})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg",children:e.jsx(Gr,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"غير نشط":"Inactifs"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.filter(v=>v.status==="inactive").length})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(le,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"إجمالي الأطفال":"Total Enfants"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.reduce((v,k)=>v+k.children_count,0)})]})]})})})]}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(kt,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:t?"البحث عن ولي...":"Rechercher un parent...",value:i,onChange:v=>o(v.target.value),className:"w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Gt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:d,onChange:v=>m(v.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:t?"جميع الحالات":"Tous les statuts"}),e.jsx("option",{value:"active",children:t?"نشط":"Actif"}),e.jsx("option",{value:"inactive",children:t?"غير نشط":"Inactif"})]})]})]})})})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Be,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"قائمة الأولياء":"Liste des Parents",e.jsxs("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 text-sm font-normal text-gray-500",children:["(",f.length,")"]})]})}),e.jsx(I,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الاسم":"Nom"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"البريد الإلكتروني":"Email"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الهاتف":"Téléphone"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الأطفال":"Enfants"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الحالة":"Statut"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الإجراءات":"Actions"})]})}),e.jsx("tbody",{children:f.map(v=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsxs("td",{className:"py-3 px-4",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[v.first_name," ",v.last_name]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t?"مسجل منذ":"Inscrit le"," ",new Date(v.registration_date).toLocaleDateString()]})]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),v.email]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",dir:"ltr",children:[e.jsx(Re,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),v.phone]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 text-blue-500"}),e.jsx("span",{className:"font-medium",children:v.children_count})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:v.status==="active"?t?"نشط":"Actif":t?"غير نشط":"Inactif"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(L,{size:"sm",variant:"outline",onClick:()=>p(v),children:e.jsx(Oe,{className:"w-4 h-4"})}),s()&&e.jsxs(e.Fragment,{children:[e.jsx(L,{size:"sm",variant:"outline",onClick:()=>x(v.id),children:v.status==="active"?e.jsx(Gr,{className:"w-4 h-4"}):e.jsx(Ze,{className:"w-4 h-4"})}),e.jsx(L,{size:"sm",variant:"outline",children:e.jsx(Sa,{className:"w-4 h-4"})})]})]})})]},v.id))})]})})})]})}),h&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:t?"تفاصيل الولي":"Détails du Parent"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"الاسم الكامل":"Nom complet"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[c.first_name," ",c.last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"البريد الإلكتروني":"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:c.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"رقم الهاتف":"Téléphone"}),e.jsx("p",{className:"text-gray-900 dark:text-white",dir:"ltr",children:c.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"الأطفال":"Enfants"}),e.jsx("ul",{className:"text-gray-900 dark:text-white",children:c.children.map((v,k)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(le,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 text-blue-500"}),v]},k))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"آخر تسجيل دخول":"Dernière connexion"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(c.last_login).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 rtl:space-x-reverse mt-6",children:e.jsx(L,{variant:"outline",onClick:()=>y(!1),children:t?"إغلاق":"Fermer"})})]})})]})},tf=()=>{const{isRTL:t}=te(),{isAdmin:s}=oe(),[r,a]=b.useState([]),[n,l]=b.useState(!0),[i,o]=b.useState(""),[d,m]=b.useState("all"),[c,u]=b.useState(null),[h,y]=b.useState(!1);b.useEffect(()=>{(async()=>{try{setTimeout(()=>{a([{id:1,first_name:"Sarah",last_name:"Benali",email:"sarah.benali@mimaelghalia.tn",phone:"+216 25 111 222",role:"admin",status:"active",hire_date:"2023-01-15",last_login:"2024-10-22",department:"Administration",experience_years:5,specialization:"Gestion pédagogique"},{id:2,first_name:"Amina",last_name:"Khelifi",email:"amina.khelifi@mimaelghalia.tn",phone:"+216 22 333 444",role:"staff",status:"active",hire_date:"2023-03-20",last_login:"2024-10-22",department:"Éducation",experience_years:3,specialization:"Petite enfance"},{id:3,first_name:"Fatma",last_name:"Trabelsi",email:"fatma.trabelsi@mimaelghalia.tn",phone:"+216 28 555 666",role:"staff",status:"active",hire_date:"2023-06-10",last_login:"2024-10-21",department:"Soins",experience_years:4,specialization:"Soins infirmiers"},{id:4,first_name:"Mohamed",last_name:"Sassi",email:"mohamed.sassi@mimaelghalia.tn",phone:"+216 26 777 888",role:"staff",status:"inactive",hire_date:"2023-09-05",last_login:"2024-09-30",department:"Sécurité",experience_years:2,specialization:"Surveillance"}]),l(!1)},1e3)}catch(k){console.error("Erreur chargement personnel:",k),l(!1)}})()},[]);const f=r.filter(v=>{const k=v.first_name.toLowerCase().includes(i.toLowerCase())||v.last_name.toLowerCase().includes(i.toLowerCase())||v.email.toLowerCase().includes(i.toLowerCase())||v.department.toLowerCase().includes(i.toLowerCase()),N=d==="all"||v.role===d;return k&&N}),p=v=>{u(v),y(!0)},x=v=>{const k={admin:{label:t?"مدير":"Admin",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400"},staff:{label:t?"موظف":"Staff",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"}};return k[v]||k.staff},j=()=>{const v=`data:text/csv;charset=utf-8,Nom,Email,Téléphone,Rôle,Département,Statut
`+f.map(g=>`${g.first_name} ${g.last_name},${g.email},${g.phone},${g.role},${g.department},${g.status}`).join(`
`),k=encodeURI(v),N=document.createElement("a");N.setAttribute("href",k),N.setAttribute("download","personnel.csv"),document.body.appendChild(N),N.click(),document.body.removeChild(N),U.success(t?"تم تصدير قائمة الموظفين":"Liste du personnel exportée")};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ne,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?"إدارة الموظفين":"Gestion du Personnel"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:t?"إدارة فريق العمل والأدوار والصلاحيات":"Gérer l'équipe, les rôles et les permissions"})]}),e.jsxs("div",{className:"flex space-x-3 rtl:space-x-reverse mt-4 sm:mt-0",children:[e.jsxs(L,{onClick:j,variant:"outline",className:"flex items-center",children:[e.jsx(dt,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),t?"تصدير":"Exporter"]}),s()&&e.jsxs(L,{className:"flex items-center bg-primary-500 hover:bg-primary-600",children:[e.jsx(ir,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),t?"إضافة موظف":"Ajouter Personnel"]})]})]}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Be,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"إجمالي الموظفين":"Total Personnel"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.length})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(Qe,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"المديرون":"Administrateurs"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.filter(v=>v.role==="admin").length})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(Ze,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"نشط":"Actifs"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.filter(v=>v.status==="active").length})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:e.jsx(jt,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"ml-3 rtl:ml-0 rtl:mr-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"متوسط الخبرة":"Expérience Moy."}),e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[Math.round(r.reduce((v,k)=>v+k.experience_years,0)/r.length||0)," ",t?"سنوات":"ans"]})]})]})})})]}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsx($,{children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(kt,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:t?"البحث عن موظف...":"Rechercher un membre du personnel...",value:i,onChange:v=>o(v.target.value),className:"w-full pl-10 rtl:pl-4 rtl:pr-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Gt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:d,onChange:v=>m(v.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:t?"جميع الأدوار":"Tous les rôles"}),e.jsx("option",{value:"admin",children:t?"مدير":"Administrateur"}),e.jsx("option",{value:"staff",children:t?"موظف":"Personnel"})]})]})]})})})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Ze,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"قائمة الموظفين":"Liste du Personnel",e.jsxs("span",{className:"ml-2 rtl:ml-0 rtl:mr-2 text-sm font-normal text-gray-500",children:["(",f.length,")"]})]})}),e.jsx(I,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الاسم":"Nom"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"البريد الإلكتروني":"Email"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الدور":"Rôle"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"القسم":"Département"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الخبرة":"Expérience"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الحالة":"Statut"}),e.jsx("th",{className:"text-left rtl:text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:t?"الإجراءات":"Actions"})]})}),e.jsx("tbody",{children:f.map(v=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsxs("td",{className:"py-3 px-4",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[v.first_name," ",v.last_name]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.specialization})]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),v.email]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x(v.role).color}`,children:[e.jsx(Qe,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),x(v.role).label]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:v.department})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(ae,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),v.experience_years," ",t?"سنوات":"ans"]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:v.status==="active"?t?"نشط":"Actif":t?"غير نشط":"Inactif"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(L,{size:"sm",variant:"outline",onClick:()=>p(v),children:e.jsx(Oe,{className:"w-4 h-4"})}),s()&&e.jsx(L,{size:"sm",variant:"outline",children:e.jsx(Sa,{className:"w-4 h-4"})})]})})]},v.id))})]})})})]})}),h&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:t?"تفاصيل الموظف":"Détails du Personnel"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"الاسم الكامل":"Nom complet"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[c.first_name," ",c.last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"البريد الإلكتروني":"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:c.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"رقم الهاتف":"Téléphone"}),e.jsx("p",{className:"text-gray-900 dark:text-white",dir:"ltr",children:c.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"الدور":"Rôle"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:x(c.role).label})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"القسم":"Département"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:c.department})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"التخصص":"Spécialisation"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:c.specialization})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"تاريخ التوظيف":"Date d'embauche"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(c.hire_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"سنوات الخبرة":"Années d'expérience"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[c.experience_years," ",t?"سنوات":"ans"]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 rtl:space-x-reverse mt-6",children:e.jsx(L,{variant:"outline",onClick:()=>y(!1),children:t?"إغلاق":"Fermer"})})]})})]})},sf=()=>{const{isRTL:t}=te(),{isAdmin:s}=oe(),[r,a]=b.useState("parent"),[n,l]=b.useState(!1),[i,o]=b.useState(!1),[d,m]=b.useState({first_name:"",last_name:"",email:"",phone:"",password:"",confirm_password:"",role:"parent",department:"",specialization:"",children_ids:[]}),[c,u]=b.useState({}),[h,y]=b.useState([]);b.useEffect(()=>{r==="parent"&&(async()=>{try{console.log("Tentative de chargement des enfants non associés...");const _=[{id:1,first_name:"Ahmed",last_name:"Ben Ali",age:4,birth_date:"2020-03-15"},{id:2,first_name:"Fatima",last_name:"Trabelsi",age:3,birth_date:"2021-07-22"}];console.log("Utilisation des données de test:",_),y(_)}catch(_){console.error("Erreur lors du chargement des enfants:",_),y([])}})()},[r]);const f=[{value:"parent",label:t?"ولي أمر":"Parent",description:t?"حساب ولي أمر للوصول إلى معلومات الطفل":"Compte parent pour accéder aux informations de l'enfant",icon:Be,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/20"},{value:"staff",label:t?"موظف":"Personnel",description:t?"حساب موظف للوصول إلى إدارة الأطفال":"Compte personnel pour accéder à la gestion des enfants",icon:me,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/20"}];s()&&f.push({value:"admin",label:t?"مدير":"Administrateur",description:t?"حساب مدير مع صلاحيات كاملة":"Compte administrateur avec accès complet",icon:Qe,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/20"});const p=[{value:"administration",label:t?"الإدارة":"Administration"},{value:"education",label:t?"التعليم":"Éducation"},{value:"soins",label:t?"الرعاية":"Soins"},{value:"securite",label:t?"الأمن":"Sécurité"},{value:"cuisine",label:t?"المطبخ":"Cuisine"}],x=g=>{const{name:_,value:w}=g.target;m(P=>({...P,[_]:w})),c[_]&&u(P=>({...P,[_]:""}))},j=g=>{a(g),m(_=>({..._,role:g,department:g==="parent"?"":_.department,specialization:g==="parent"?"":_.specialization,children_ids:g==="parent"?_.children_ids:[]}))},v=g=>{m(_=>({..._,children_ids:_.children_ids.includes(g)?_.children_ids.filter(w=>w!==g):[..._.children_ids,g]}))},k=()=>{const g={};return d.first_name.trim()||(g.first_name=t?"الاسم الأول مطلوب":"Le prénom est requis"),d.last_name.trim()||(g.last_name=t?"اسم العائلة مطلوب":"Le nom de famille est requis"),d.email.trim()?/\S+@\S+\.\S+/.test(d.email)||(g.email=t?"البريد الإلكتروني غير صحيح":"Format d'email invalide"):g.email=t?"البريد الإلكتروني مطلوب":"L'email est requis",d.phone.trim()||(g.phone=t?"رقم الهاتف مطلوب":"Le téléphone est requis"),d.password?d.password.length<6&&(g.password=t?"كلمة المرور يجب أن تكون 6 أحرف على الأقل":"Le mot de passe doit contenir au moins 6 caractères"):g.password=t?"كلمة المرور مطلوبة":"Le mot de passe est requis",d.password!==d.confirm_password&&(g.confirm_password=t?"كلمات المرور غير متطابقة":"Les mots de passe ne correspondent pas"),d.role!=="parent"&&(d.department||(g.department=t?"القسم مطلوب":"Le département est requis"),d.specialization.trim()||(g.specialization=t?"التخصص مطلوب":"La spécialisation est requise")),u(g),Object.keys(g).length===0},N=async g=>{if(g.preventDefault(),!!k()){o(!0);try{await new Promise(_=>setTimeout(_,2e3)),U.success(t?"تم إنشاء المستخدم بنجاح":"Utilisateur créé avec succès"),m({first_name:"",last_name:"",email:"",phone:"",password:"",confirm_password:"",role:"parent",department:"",specialization:""}),a("parent")}catch{U.error(t?"خطأ في إنشاء المستخدم":"Erreur lors de la création")}finally{o(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?"إضافة مستخدم جديد":"Ajouter un Nouvel Utilisateur"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:t?"إنشاء حساب جديد للأولياء أو الموظفين":"Créer un nouveau compte pour parents ou personnel"})]}),e.jsx(W,{to:"/dashboard",children:e.jsxs(L,{variant:"outline",className:"flex items-center",children:[e.jsx(et,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2 rtl:rotate-180"}),t?"العودة":"Retour"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Qe,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"نوع الحساب":"Type de Compte"]})}),e.jsx(I,{className:"space-y-3",children:f.map(g=>e.jsx("div",{onClick:()=>j(g.value),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${r===g.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:`p-2 rounded-lg ${g.bgColor}`,children:e.jsx(g.icon,{className:`w-5 h-5 ${g.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:g.label}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:g.description})]}),r===g.value&&e.jsx(ps,{className:"w-5 h-5 text-primary-500"})]})},g.value))})]})}),e.jsx(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"lg:col-span-2",children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(bt,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"معلومات المستخدم":"Informations Utilisateur"]})}),e.jsx(I,{children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"الاسم الأول":"Prénom"," *"]}),e.jsx("input",{type:"text",name:"first_name",value:d.first_name,onChange:x,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.first_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل الاسم الأول":"Entrez le prénom"}),c.first_name&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),c.first_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"اسم العائلة":"Nom de famille"," *"]}),e.jsx("input",{type:"text",name:"last_name",value:d.last_name,onChange:x,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.last_name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل اسم العائلة":"Entrez le nom de famille"}),c.last_name&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),c.last_name]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"البريد الإلكتروني":"Email"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:x,className:`w-full pl-10 rtl:pl-3 rtl:pr-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.email?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل البريد الإلكتروني":"Entrez l'email"})]}),c.email&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),c.email]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"رقم الهاتف":"Téléphone"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"tel",name:"phone",value:d.phone,onChange:x,className:`w-full pl-10 rtl:pl-3 rtl:pr-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.phone?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل رقم الهاتف":"Entrez le téléphone",dir:"ltr"})]}),c.phone&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),c.phone]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"كلمة المرور":"Mot de passe"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:n?"text":"password",name:"password",value:d.password,onChange:x,className:`w-full pl-10 rtl:pl-3 rtl:pr-10 pr-10 rtl:pr-3 rtl:pl-10 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.password?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل كلمة المرور":"Entrez le mot de passe"}),e.jsx("button",{type:"button",onClick:()=>l(!n),className:"absolute right-3 rtl:right-auto rtl:left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?e.jsx(Xs,{className:"w-4 h-4"}):e.jsx(Oe,{className:"w-4 h-4"})})]}),c.password&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),c.password]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"تأكيد كلمة المرور":"Confirmer mot de passe"," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:n?"text":"password",name:"confirm_password",value:d.confirm_password,onChange:x,className:`w-full pl-10 rtl:pl-3 rtl:pr-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.confirm_password?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أعد إدخال كلمة المرور":"Confirmez le mot de passe"})]}),c.confirm_password&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),c.confirm_password]})]})]}),r==="parent"&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:t?"ربط الأطفال":"Associer des Enfants"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:t?"اختر الأطفال الذين سيكونون تحت رعاية هذا الولي":"Sélectionnez les enfants qui seront sous la responsabilité de ce parent"}),h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:t?"لا توجد أطفال متاحة للربط":"Aucun enfant disponible pour association"}),e.jsx("p",{className:"text-sm mt-2",children:t?"جميع الأطفال مرتبطون بأولياء أمور":"Tous les enfants sont déjà associés à des parents"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(g=>e.jsx("div",{onClick:()=>v(g.id),className:`p-3 border rounded-lg cursor-pointer transition-all ${d.children_ids.includes(g.id)?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600 hover:border-primary-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[g.first_name," ",g.last_name]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?`${g.age} سنوات`:`${g.age} ans`})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${d.children_ids.includes(g.id)?"border-primary-500 bg-primary-500":"border-gray-300"}`,children:d.children_ids.includes(g.id)&&e.jsx(ps,{className:"w-3 h-3 text-white"})})]})},g.id))}),d.children_ids.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:t?`تم اختيار ${d.children_ids.length} طفل/أطفال`:`${d.children_ids.length} enfant(s) sélectionné(s)`})})]}),r!=="parent"&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:t?"المعلومات المهنية":"Informations Professionnelles"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"القسم":"Département"," *"]}),e.jsxs("select",{name:"department",value:d.department,onChange:x,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.department?"border-red-500":"border-gray-300 dark:border-gray-600"}`,children:[e.jsx("option",{value:"",children:t?"اختر القسم":"Sélectionner le département"}),p.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))]}),c.department&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),c.department]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t?"التخصص":"Spécialisation"," *"]}),e.jsx("input",{type:"text",name:"specialization",value:d.specialization,onChange:x,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.specialization?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:t?"أدخل التخصص":"Entrez la spécialisation"}),c.specialization&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),c.specialization]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 rtl:space-x-reverse pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{to:"/dashboard",children:e.jsx(L,{type:"button",variant:"outline",children:t?"إلغاء":"Annuler"})}),e.jsx(L,{type:"submit",disabled:i,className:"bg-primary-500 hover:bg-primary-600 text-white",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 rtl:mr-0 rtl:ml-2"}),t?"جاري الإنشاء...":"Création..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(bt,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),t?"إنشاء المستخدم":"Créer l'utilisateur"]})})]})]})})]})})]})]})},rf=()=>{const{isRTL:t}=te(),[s,r]=b.useState(!0),[a,n]=b.useState("month"),[l,i]=b.useState(null);b.useEffect(()=>{(async()=>{try{setTimeout(()=>{i({overview:{totalChildren:45,totalParents:38,totalStaff:8,capacity:60,occupancyRate:75,averageAttendance:85},trends:{childrenGrowth:12,attendanceChange:5,enrollmentChange:-2,satisfactionScore:4.6},monthly:{enrollments:[5,8,12,7,9,15,11,6,10,13,8,9],attendance:[82,85,88,84,87,90,89,86,88,91,87,85],revenue:[12e3,15e3,18e3,14e3,16e3,22e3,19e3,13e3,17e3,21e3,16e3,18e3]},departments:[{name:t?"الرضع":"Bébés",count:12,percentage:27},{name:t?"الصغار":"Petits",count:18,percentage:40},{name:t?"الكبار":"Grands",count:15,percentage:33}],topPerformers:[{name:"Amina Khelifi",role:t?"معلمة":"Éducatrice",score:98},{name:"Sarah Benali",role:t?"مديرة":"Directrice",score:96},{name:"Fatma Trabelsi",role:t?"ممرضة":"Infirmière",score:94}],alerts:[{type:"warning",message:t?"معدل الحضور منخفض هذا الأسبوع":"Taux de présence faible cette semaine"},{type:"info",message:t?"5 طلبات تسجيل جديدة في الانتظار":"5 nouvelles demandes d'inscription en attente"},{type:"success",message:t?"تم تحقيق هدف الشهر":"Objectif mensuel atteint"}]}),r(!1)},1e3)}catch(c){console.error("Erreur chargement statistiques:",c),r(!1)}})()},[a,t]);const o=()=>{const m=`data:text/csv;charset=utf-8,Métrique,Valeur
Total Enfants,${l.overview.totalChildren}
Total Parents,${l.overview.totalParents}
Personnel,${l.overview.totalStaff}
Taux d'occupation,${l.overview.occupancyRate}%
Présence moyenne,${l.overview.averageAttendance}%`,c=encodeURI(m),u=document.createElement("a");u.setAttribute("href",c),u.setAttribute("download","statistiques-generales.csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u),U.success(t?"تم تصدير الإحصائيات":"Statistiques exportées")},d=()=>{r(!0),setTimeout(()=>{r(!1),U.success(t?"تم تحديث الإحصائيات":"Statistiques mises à jour")},1e3)};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ne,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?"الإحصائيات العامة":"Statistiques Générales"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:t?"نظرة شاملة على أداء الحضانة ومؤشرات النجاح":"Vue d'ensemble des performances et indicateurs de succès"})]}),e.jsxs("div",{className:"flex space-x-3 rtl:space-x-reverse mt-4 sm:mt-0",children:[e.jsxs(L,{onClick:d,variant:"outline",className:"flex items-center",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),t?"تحديث":"Actualiser"]}),e.jsxs(L,{onClick:o,variant:"outline",className:"flex items-center",children:[e.jsx(dt,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),t?"تصدير":"Exporter"]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Gt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:a,onChange:m=>n(m.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"week",children:t?"هذا الأسبوع":"Cette semaine"}),e.jsx("option",{value:"month",children:t?"هذا الشهر":"Ce mois"}),e.jsx("option",{value:"quarter",children:t?"هذا الربع":"Ce trimestre"}),e.jsx("option",{value:"year",children:t?"هذا العام":"Cette année"})]})]})]})]}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"إجمالي الأطفال":"Total Enfants"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:l.overview.totalChildren}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(gs,{className:"w-4 h-4 text-green-500 mr-1 rtl:mr-0 rtl:ml-1"}),e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400",children:["+",l.trends.childrenGrowth,"% ",t?"هذا الشهر":"ce mois"]})]})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:e.jsx(le,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"معدل الحضور":"Taux Présence"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[l.overview.averageAttendance,"%"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(gs,{className:"w-4 h-4 text-green-500 mr-1 rtl:mr-0 rtl:ml-1"}),e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400",children:["+",l.trends.attendanceChange,"% ",t?"هذا الأسبوع":"cette semaine"]})]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:e.jsx(ae,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"معدل الإشغال":"Taux Occupation"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[l.overview.occupancyRate,"%"]}),e.jsx("div",{className:"flex items-center mt-2",children:e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.overview.totalChildren,"/",l.overview.capacity," ",t?"أماكن":"places"]})})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:e.jsx(pl,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"تقييم الرضا":"Satisfaction"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[l.trends.satisfactionScore,"/5"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(jt,{className:"w-4 h-4 text-yellow-500 mr-1 rtl:mr-0 rtl:ml-1"}),e.jsx("span",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:t?"ممتاز":"Excellent"})]})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center",children:e.jsx(jt,{className:"w-6 h-6 text-yellow-600"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"lg:col-span-2",children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(ar,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"اتجاهات التسجيل الشهرية":"Tendances Mensuelles d'Inscription"]})}),e.jsx(I,{children:e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2 rtl:space-x-reverse",children:l.monthly.enrollments.map((m,c)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"bg-primary-500 rounded-t w-full transition-all hover:bg-primary-600",style:{height:`${m/Math.max(...l.monthly.enrollments)*200}px`}}),e.jsx("span",{className:"text-xs text-gray-500 mt-2",children:["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"][c]}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:m})]},c))})})]})}),e.jsx(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Be,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"التوزيع حسب العمر":"Répartition par Âge"]})}),e.jsx(I,{className:"space-y-4",children:l.departments.map((m,c)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:m.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:[m.count," (",m.percentage,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${c===0?"bg-blue-500":c===1?"bg-green-500":"bg-purple-500"}`,style:{width:`${m.percentage}%`}})})]},c))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(jt,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"أفضل الموظفين":"Meilleurs Performeurs"]})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-4",children:l.topPerformers.map((m,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${c===0?"bg-yellow-500":c===1?"bg-gray-400":"bg-orange-500"}`,children:c+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:m.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:m.role})]})]}),e.jsx("div",{className:"text-right rtl:text-left",children:e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[m.score,"%"]})})]},c))})})]})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(_t,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"التنبيهات والإشعارات":"Alertes et Notifications"]})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-3",children:l.alerts.map((m,c)=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 rtl:border-l-0 rtl:border-r-4 ${m.type==="warning"?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-400":m.type==="info"?"bg-blue-50 dark:bg-blue-900/20 border-blue-400":"bg-green-50 dark:bg-green-900/20 border-green-400"}`,children:e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[m.type==="warning"&&e.jsx(_t,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),m.type==="info"&&e.jsx(ae,{className:"w-5 h-5 text-blue-600 mt-0.5"}),m.type==="success"&&e.jsx(je,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsx("p",{className:`text-sm ${m.type==="warning"?"text-yellow-800 dark:text-yellow-200":m.type==="info"?"text-blue-800 dark:text-blue-200":"text-green-800 dark:text-green-200"}`,children:m.message})]})},c))})})]})})]})]})},af=()=>{const{isRTL:t}=te(),{isDark:s}=es(),[r,a]=b.useState(!1),[n,l]=b.useState([]),[i,o]=b.useState([]),[d,m]=b.useState(null),[c,u]=b.useState({dateFrom:"",dateTo:"",childName:"",status:"all"}),[h,y]=b.useState({totalPresent:0,totalAbsent:0,totalLate:0,attendanceRate:0}),f=async()=>{try{a(!0),m(null);const g=(await B.get("/api/attendance/report")).data;if(g.success){const _=g.attendances||[];l(_),o(_),p(_),console.log("Données chargées:",_.length,"enregistrements")}else throw new Error(g.error||"Erreur dans la réponse API")}catch(N){console.error("Erreur détaillée:",N),m(`Erreur: ${N.message}`),U.error(t?"خطأ في تحميل البيانات":"Erreur de chargement")}finally{a(!1)}},p=N=>{const g=N.filter(C=>C.status==="present").length,_=N.filter(C=>C.status==="absent").length,w=N.filter(C=>C.status==="late").length,P=N.length,D=P>0?Math.round(g/P*100):0;y({totalPresent:g,totalAbsent:_,totalLate:w,attendanceRate:D})},x=()=>{let N=[...n];c.childName&&(N=N.filter(g=>g.child_name.toLowerCase().includes(c.childName.toLowerCase()))),c.status!=="all"&&(N=N.filter(g=>g.status===c.status)),c.dateFrom&&(N=N.filter(g=>new Date(g.date)>=new Date(c.dateFrom))),c.dateTo&&(N=N.filter(g=>new Date(g.date)<=new Date(c.dateTo))),o(N),p(N)},j=(N,g)=>{u(_=>({..._,[N]:g}))},v=()=>{u({dateFrom:"",dateTo:"",childName:"",status:"all"}),o(n),p(n)},k=()=>{const g=[["Enfant","Date","Statut","Heure d'arrivée","Heure de départ"].join(","),...i.map(D=>[D.child_name,D.date,D.status==="present"?"Présent":D.status==="absent"?"Absent":"En retard",D.check_in||"",D.check_out||""].join(","))].join(`
`),_=new Blob([g],{type:"text/csv"}),w=window.URL.createObjectURL(_),P=document.createElement("a");P.href=w,P.download=`rapport_presence_${new Date().toISOString().split("T")[0]}.csv`,P.click(),window.URL.revokeObjectURL(w)};return b.useEffect(()=>{f()},[]),b.useEffect(()=>{x()},[c,n]),e.jsx("div",{className:`min-h-screen p-6 ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[d&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-800",children:t?"حدث خطأ":"Une erreur s'est produite"}),e.jsx("p",{className:"text-red-600 text-sm",children:d}),e.jsxs(L,{onClick:f,variant:"outline",size:"sm",className:"mt-2",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),t?"إعادة المحاولة":"Réessayer"]})]})]})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold mb-2 ${s?"text-white":"text-gray-900"}`,children:t?"تقرير الحضور":"Rapport de Présence"}),e.jsx("p",{className:`${s?"text-gray-300":"text-gray-600"}`,children:t?"تقرير مفصل عن حضور الأطفال مع الإحصائيات":"Rapport détaillé avec statistiques de présence"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{onClick:k,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-4 h-4"}),t?"تصدير CSV":"Exporter CSV"]}),e.jsxs(L,{onClick:f,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),t?"تحديث":"Actualiser"]})]})]})}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:e.jsx(je,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4 rtl:ml-0 rtl:mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"حاضر":"Présents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.totalPresent})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center",children:e.jsx(Ke,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-4 rtl:ml-0 rtl:mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"غائب":"Absents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.totalAbsent})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center",children:e.jsx(ae,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4 rtl:ml-0 rtl:mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"متأخر":"En retard"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.totalLate})]})]})})}),e.jsx($,{children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:e.jsx(Be,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4 rtl:ml-0 rtl:mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t?"معدل الحضور":"Taux présence"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[h.attendanceRate,"%"]})]})]})})})]}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Gt,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"تصفية البيانات":"Filtres"]})}),e.jsx(I,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"من تاريخ":"Date de début"}),e.jsx("input",{type:"date",value:c.dateFrom,onChange:N=>j("dateFrom",N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"إلى تاريخ":"Date de fin"}),e.jsx("input",{type:"date",value:c.dateTo,onChange:N=>j("dateTo",N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"اسم الطفل":"Nom enfant"}),e.jsx("input",{type:"text",placeholder:t?"البحث بالاسم...":"Rechercher par nom...",value:c.childName,onChange:N=>j("childName",N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"الحالة":"Statut"}),e.jsxs("select",{value:c.status,onChange:N=>j("status",N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:t?"الكل":"Tous"}),e.jsx("option",{value:"present",children:t?"حاضر":"Présent"}),e.jsx("option",{value:"absent",children:t?"غائب":"Absent"}),e.jsx("option",{value:"late",children:t?"متأخر":"En retard"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(L,{onClick:v,variant:"outline",className:"w-full",children:t?"إعادة تعيين":"Réinitialiser"})})]})})]})}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"بيانات الحضور":"Données de présence"]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?`${i.length} سجل`:`${i.length} enregistrements`})]})}),e.jsx(I,{children:r?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ne,{})}):i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ce,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t?"لا توجد بيانات للعرض":"Aucune donnée à afficher"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t?"الطفل":"Enfant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t?"التاريخ":"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t?"وقت الوصول":"Arrivée"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t?"وقت المغادرة":"Départ"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t?"الحالة":"Statut"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:i.map((N,g)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:N.child_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(N.date).toLocaleDateString(t?"ar-TN":"fr-FR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:N.check_in?e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1 text-green-500"}),N.check_in]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:N.check_out?e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1 text-red-500"}),N.check_out]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.status==="present"?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400":N.status==="absent"?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400"}`,children:[N.status==="present"&&e.jsx(je,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),N.status==="absent"&&e.jsx(Ke,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),N.status==="late"&&e.jsx(ae,{className:"w-3 h-3 mr-1 rtl:mr-0 rtl:ml-1"}),t?N.status==="present"?"حاضر":N.status==="absent"?"غائب":"متأخر":N.status==="present"?"Présent":N.status==="absent"?"Absent":"En retard"]})})]},g))})]})})})]})})]})})},nf=()=>{var k,N;const{isRTL:t,currentLanguage:s,toggleLanguage:r}=te(),{theme:a,toggleTheme:n}=es(),{user:l}=oe(),[i,o]=b.useState(!1),[d,m]=b.useState(!1),[c,u]=b.useState([]),[h,y]=b.useState("national"),[f,p]=b.useState({nurseryName:"",address:"",phone:"",email:"",capacity:0,openingTime:"",closingTime:"",saturdayOpen:!1,saturdayOpeningTime:"08:00",saturdayClosingTime:"14:00",emailNotifications:!0,smsNotifications:!1,attendanceAlerts:!0,enrollmentAlerts:!0,sessionTimeout:30,passwordExpiry:90,twoFactorAuth:!1,autoBackup:!0,backupFrequency:"daily",dataRetention:365});b.useEffect(()=>{(async()=>{var _,w,P,D,C;console.log("🔄 NOUVELLE FONCTION - Chargement des paramètres...");try{const S=localStorage.getItem("token");console.log("🔑 Token présent:",!!S);const H=(await B.get("/api/nursery-settings")).data;if(console.log("📡 Réponse API:",200),console.log("📋 DONNÉES BRUTES REÇUES:",JSON.stringify(H,null,2)),console.log("🔍 STRUCTURE DATA:",{hasSuccess:"success"in H,hasSettings:"settings"in H,dataKeys:Object.keys(H),settingsKeys:H.settings?Object.keys(H.settings):"N/A"}),H.success&&H.settings){console.log("✅ Structure détectée: {success, settings}");const{settings:z}=H;console.log("🏢 nursery_name:",z.nursery_name),console.log("📍 address:",z.address),console.log("📞 phone:",z.phone),console.log("📧 email:",z.email),console.log("👥 capacity:",z.capacity),console.log("🕐 working_hours_weekdays:",z.working_hours_weekdays),console.log("📅 saturday_open:",z.saturday_open),console.log("🕐 working_hours_saturday:",z.working_hours_saturday),console.log("🔍 VALEURS EXTRAITES:"),console.log("  - nurseryName:",z.nursery_name),console.log("  - capacity:",z.capacity),console.log("  - saturday_open:",z.saturday_open),console.log("  - working_hours_saturday:",z.working_hours_saturday);const T={nurseryName:z.nursery_name||"Crèche Mima Elghalia",address:z.address||"16 Rue Bizerte, Medenine 4100, Tunisie",phone:z.phone||"+216 25 95 35 32",email:z.email||"contact@mimaelghalia.tn",capacity:parseInt((_=z.capacity)==null?void 0:_.toString().replace(/\D/g,""))||40,openingTime:((w=z.working_hours_weekdays)==null?void 0:w.split("-")[0])||"07:00",closingTime:((P=z.working_hours_weekdays)==null?void 0:P.split("-")[1])||"18:00",saturdayOpen:z.saturday_open==="true"||z.saturday_open===!0,saturdayOpeningTime:((D=z.working_hours_saturday)==null?void 0:D.split("-")[0])||"08:00",saturdayClosingTime:((C=z.working_hours_saturday)==null?void 0:C.split("-")[1])||"12:00"};console.log("🎯 PARAMÈTRES FINAUX:",T),p(T),o(!1)}else console.error("❌ Structure de données non reconnue:",H),setError("Format de données non reconnu"),o(!1)}catch(S){console.error("❌ Erreur de connexion:",S),setError("Erreur de connexion au serveur"),o(!1)}})()},[]),b.useEffect(()=>{(async()=>{try{m(!0);const _=new Date().getFullYear();let w=[];try{const T=await fetch(`https://date.nager.at/api/v3/PublicHolidays/${_}/TN`);T.ok&&(w=[...(await T.json()).map((M,O)=>({external_id:`ext_${O}`,name:t&&M.localName||M.name,date:M.date,type:"national",is_active:!1}))])}catch{console.log("API externe non disponible pour les jours nationaux")}const P=[{external_id:"rel_1",name:t?"رأس السنة الهجرية":"Nouvel An Hégirien (1er Muharram)",date:`${_}-07-07`,type:"religious",is_active:!1},{external_id:"rel_2",name:t?"عاشوراء":"Achoura (10 Muharram)",date:`${_}-07-16`,type:"religious",is_active:!1},{external_id:"rel_3",name:t?"المولد النبوي الشريف":"Mawlid (Naissance du Prophète)",date:`${_}-09-15`,type:"religious",is_active:!1},{external_id:"rel_4",name:t?"ليلة الإسراء والمعراج":"Isra et Miraj (Voyage Nocturne)",date:`${_}-01-27`,type:"religious",is_active:!1},{external_id:"rel_5",name:t?"عيد الفطر (اليوم الأول)":"Aïd el-Fitr (1er jour)",date:`${_}-04-10`,type:"religious",is_active:!1},{external_id:"rel_6",name:t?"عيد الفطر (اليوم الثاني)":"Aïd el-Fitr (2e jour)",date:`${_}-04-11`,type:"religious",is_active:!1},{external_id:"rel_7",name:t?"عيد الفطر (اليوم الثالث)":"Aïd el-Fitr (3e jour)",date:`${_}-04-12`,type:"religious",is_active:!1},{external_id:"rel_8",name:t?"وقفة عرفة":"Jour d'Arafat",date:`${_}-06-15`,type:"religious",is_active:!1},{external_id:"rel_9",name:t?"عيد الأضحى (اليوم الأول)":"Aïd el-Adha (1er jour)",date:`${_}-06-16`,type:"religious",is_active:!1},{external_id:"rel_10",name:t?"عيد الأضحى (اليوم الثاني)":"Aïd el-Adha (2e jour)",date:`${_}-06-17`,type:"religious",is_active:!1},{external_id:"rel_11",name:t?"عيد الأضحى (اليوم الثالث)":"Aïd el-Adha (3e jour)",date:`${_}-06-18`,type:"religious",is_active:!1},{external_id:"rel_12",name:t?"عيد الأضحى (اليوم الرابع)":"Aïd el-Adha (4e jour)",date:`${_}-06-19`,type:"religious",is_active:!1},{external_id:"sch_1",name:t?"عطلة الخريف (بداية)":"Vacances d'Automne (Début)",date:`${_}-10-28`,type:"school",is_active:!1},{external_id:"sch_2",name:t?"عطلة الخريف (نهاية)":"Vacances d'Automne (Fin)",date:`${_}-11-05`,type:"school",is_active:!1},{external_id:"sch_3",name:t?"عطلة الشتاء (بداية)":"Vacances d'Hiver (Début)",date:`${_}-12-23`,type:"school",is_active:!1},{external_id:"sch_4",name:t?"عطلة الشتاء (نهاية)":"Vacances d'Hiver (Fin)",date:`${_+1}-01-08`,type:"school",is_active:!1},{external_id:"sch_5",name:t?"عطلة الربيع (بداية)":"Vacances de Printemps (Début)",date:`${_}-03-25`,type:"school",is_active:!1},{external_id:"sch_6",name:t?"عطلة الربيع (نهاية)":"Vacances de Printemps (Fin)",date:`${_}-04-08`,type:"school",is_active:!1},{external_id:"sch_7",name:t?"عطلة الصيف (بداية)":"Vacances d'Été (Début)",date:`${_}-06-15`,type:"school",is_active:!1},{external_id:"sch_8",name:t?"عطلة الصيف (نهاية)":"Vacances d'Été (Fin)",date:`${_}-09-15`,type:"school",is_active:!1}];w=[...w,...P],w.filter(T=>T.type==="national").length===0&&(w=[...[{external_id:"nat_1",name:t?"رأس السنة الميلادية":"Jour de l'An",date:`${_}-01-01`,type:"national",is_active:!1},{external_id:"nat_2",name:t?"عيد الثورة والشباب":"Fête de la Révolution et de la Jeunesse",date:`${_}-01-14`,type:"national",is_active:!1},{external_id:"nat_3",name:t?"عيد الاستقلال":"Fête de l'Indépendance",date:`${_}-03-20`,type:"national",is_active:!1},{external_id:"nat_4",name:t?"عيد الشهداء":"Fête des Martyrs",date:`${_}-04-09`,type:"national",is_active:!1},{external_id:"nat_5",name:t?"عيد العمال":"Fête du Travail",date:`${_}-05-01`,type:"national",is_active:!1},{external_id:"nat_6",name:t?"عيد الجمهورية":"Fête de la République",date:`${_}-07-25`,type:"national",is_active:!1},{external_id:"nat_7",name:t?"عيد المرأة":"Fête de la Femme",date:`${_}-08-13`,type:"national",is_active:!1},{external_id:"nat_8",name:t?"عيد الجلاء":"Fête de l'Évacuation",date:`${_}-10-15`,type:"national",is_active:!1}],...P]);const D=localStorage.getItem("token");let C=[];try{console.log("🔄 Chargement des jours fériés depuis la base de données...");const T=await B.get("/api/holidays");console.log("📡 Réponse DB holidays:",T.status),console.log("📊 Données DB reçues:",T.data),T.data.success?(C=T.data.holidays,console.log("✅ Jours fériés en base de données:",C.length),console.log("📋 Liste des jours fériés DB:",C.map(A=>{var q;return{id:A.id,name:A.name,date:(q=A.date)==null?void 0:q.split("T")[0],is_closed:A.is_closed}}))):console.log("❌ Erreur réponse DB:",T.data)}catch(T){console.log("❌ Erreur chargement base de données:",T)}console.log("🔄 Début de la correspondance holidays...");const S=w.map(T=>{var q;let A=C.find(M=>{const O=M.date.split("T")[0],X=T.date,K=At=>At.toLowerCase().trim().replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ç]/g,"c").replace(/['']/g,"'").replace(/\s+/g," "),ue=K(M.name),Se=K(T.name),we=ue===Se&&O===X,ht=ue===Se,jr=O===X;return we?!0:ht?Math.abs(new Date(O)-new Date(X))/(24*60*60*1e3)<=7:!1});return A||(A=C.find(M=>{const O=M.date.split("T")[0],X=T.date;return O===X}),A&&console.log(`📅 Correspondance par DATE trouvée: ${T.name} = ${A.name}`)),console.log(`🔍 Résultat final ${T.name} (${T.date}):`,{found:!!A,dbId:A==null?void 0:A.id,dbName:A==null?void 0:A.name,dbDate:(q=A==null?void 0:A.date)==null?void 0:q.split("T")[0]}),{...T,id:A?A.id:null,is_active:!!A,is_closed:A?A.is_closed:!0}});console.log("📋 Jours fériés chargés:",S.length),console.log("🏛️ Nationaux:",S.filter(T=>T.type==="national").length),console.log("🕌 Religieux:",S.filter(T=>T.type==="religious").length),console.log("🏫 Scolaires:",S.filter(T=>T.type==="school").length);const R=C.filter(T=>!S.some(A=>A.id===T.id));console.log("🆕 Jours fériés en DB non trouvés dans la liste:",R.length);const H=R.map(T=>({id:T.id,external_id:`db_${T.id}`,name:T.name,date:T.date.split("T")[0],type:"custom",is_active:!0,is_closed:T.is_closed,description:T.description||"Jour férié personnalisé"})),z=[...S,...H];console.log("📋 Jours fériés chargés TOTAL:",z.length),console.log("🏛️ Nationaux:",z.filter(T=>T.type==="national").length),console.log("🕌 Religieux:",z.filter(T=>T.type==="religious").length),console.log("🏫 Scolaires:",z.filter(T=>T.type==="school").length),console.log("🎯 Personnalisés:",z.filter(T=>T.type==="custom").length),console.log("✅ Jours fériés ACTIFS (toggles ON):",z.filter(T=>T.is_active).length),console.log("⚪ Jours fériés INACTIFS (toggles OFF):",z.filter(T=>!T.is_active).length),u(z)}catch(_){console.error("Erreur lors du chargement des jours fériés:",_);const w=new Date().getFullYear(),P=[{id:1,name:t?"رأس السنة الميلادية":"Jour de l'An",date:`${w}-01-01`,type:"national"},{id:2,name:t?"عيد الثورة والشباب":"Fête de la Révolution et de la Jeunesse",date:`${w}-01-14`,type:"national"},{id:3,name:t?"عيد الاستقلال":"Fête de l'Indépendance",date:`${w}-03-20`,type:"national"},{id:4,name:t?"عيد الشهداء":"Fête des Martyrs",date:`${w}-04-09`,type:"national"},{id:5,name:t?"عيد العمال":"Fête du Travail",date:`${w}-05-01`,type:"national"},{id:6,name:t?"عيد الجمهورية":"Fête de la République",date:`${w}-07-25`,type:"national"},{id:7,name:t?"عيد المرأة":"Fête de la Femme",date:`${w}-08-13`,type:"national"},{id:8,name:t?"عيد الجلاء":"Fête de l'Évacuation",date:`${w}-10-15`,type:"national"},{id:9,name:t?"عيد الفطر":"Aïd el-Fitr",date:`${w}-04-10`,type:"religious"},{id:10,name:t?"عيد الأضحى":"Aïd el-Adha",date:`${w}-06-16`,type:"religious"},{id:11,name:t?"رأس السنة الهجرية":"Nouvel An Hégirien",date:`${w}-07-07`,type:"religious"},{id:12,name:t?"المولد النبوي":"Mawlid (Naissance du Prophète)",date:`${w}-09-16`,type:"religious"}],D=[{id:200,name:t?"عطلة الخريف (بداية)":"Vacances d'Automne (Début)",date:`${w}-10-28`,type:"school"},{id:201,name:t?"عطلة الخريف (نهاية)":"Vacances d'Automne (Fin)",date:`${w}-11-05`,type:"school"},{id:202,name:t?"عطلة الشتاء (بداية)":"Vacances d'Hiver (Début)",date:`${w}-12-23`,type:"school"},{id:203,name:t?"عطلة الشتاء (نهاية)":"Vacances d'Hiver (Fin)",date:`${w+1}-01-08`,type:"school"},{id:204,name:t?"عطلة الربيع (بداية)":"Vacances de Printemps (Début)",date:`${w}-03-25`,type:"school"},{id:205,name:t?"عطلة الربيع (نهاية)":"Vacances de Printemps (Fin)",date:`${w}-04-08`,type:"school"},{id:206,name:t?"عطلة الصيف (بداية)":"Vacances d'Été (Début)",date:`${w}-06-15`,type:"school"},{id:207,name:t?"عطلة الصيف (نهاية)":"Vacances d'Été (Fin)",date:`${w}-09-15`,type:"school"}];u([...P,...D])}finally{m(!1)}})()},[t]);const x=async(g,_)=>{try{console.log("🔄 Toggle holiday:",{holiday:g,isActive:_}),console.log("👤 Utilisateur actuel:",{role:l==null?void 0:l.role,email:l==null?void 0:l.email,id:l==null?void 0:l.id,fullUser:l});const w=localStorage.getItem("token");if(console.log("🔑 Token présent:",!!w),console.log("🔑 Token (premiers caractères):",(w==null?void 0:w.substring(0,20))+"..."),w)try{const D=w.split(".");if(D.length===3){const C=JSON.parse(atob(D[1]));console.log("🔍 Payload du token:",C),console.log("⏰ Token expire à:",new Date(C.exp*1e3)),console.log("⏰ Maintenant:",new Date),console.log("✅ Token valide:",C.exp*1e3>Date.now())}}catch(D){console.log("❌ Erreur décodage token:",D)}if(!w){U.error(t?"خطأ في المصادقة":"Erreur d'authentification");return}if((l==null?void 0:l.role)!=="admin"){console.log("❌ Rôle insuffisant:",l==null?void 0:l.role,"attendu: admin"),U.error(t?"هذه الوظيفة متاحة للمديرين فقط":"Cette fonctionnalité est réservée aux administrateurs");return}console.log("✅ Vérifications passées, envoi de la requête...");const P=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="192.168.1.60"?"http://localhost:3003":"https://creche-backend.onrender.com";if(console.log("🌐 URL de base:",P),console.log("📍 Endpoint cible:",`${P}/api/holidays`),_){console.log("➕ Ajout du jour férié:",g.name);const D=await B.post("/api/holidays",{name:g.name,date:g.date,is_closed:!0,description:`Jour férié de type ${g.type}`});if(console.log("📡 Réponse POST:",D.status),console.log("✅ Données reçues:",D.data),D.data.success)u(C=>C.map(S=>S.external_id===g.external_id?{...S,id:D.data.holiday.id,is_active:!0}:S)),U.success(t?"تم تفعيل العطلة - الحضانة ستكون مغلقة":"Jour férié activé - La crèche sera fermée");else throw new Error(D.data.error||"Erreur inconnue lors de l'ajout")}else if(g.id){console.log("🗑️ Suppression du jour férié ID:",g.id);const D=await B.delete(`/api/holidays/${g.id}`);console.log("📡 Réponse DELETE:",D.status),u(C=>C.map(S=>S.external_id===g.external_id?{...S,id:null,is_active:!1}:S)),U.success(t?"تم إلغاء تفعيل العطلة - الحضانة ستكون مفتوحة":"Jour férié désactivé - La crèche sera ouverte")}else console.warn("⚠️ Pas d'ID pour supprimer le jour férié")}catch(w){console.error("❌ Erreur toggle holiday:",{message:w.message,stack:w.stack,holiday:g==null?void 0:g.name,isActive:_}),U.error(t?"خطأ في تحديث حالة العطلة":`Erreur: ${w.message}`)}},j=(g,_)=>{p(w=>({...w,[g]:_}))},v=async()=>{console.log("💾 Début de la sauvegarde des paramètres..."),console.log("📝 Settings actuels:",f),o(!0);try{const g=localStorage.getItem("token"),_={nursery_name:f.nurseryName,address:f.address,phone:f.phone,email:f.email,capacity:`${f.capacity} enfants`,working_hours_weekdays:`${f.openingTime}-${f.closingTime}`,saturday_open:f.saturdayOpen.toString(),working_hours_saturday:`${f.saturdayOpeningTime}-${f.saturdayClosingTime}`};console.log("📤 Données à envoyer (API simple):",_);const P=(await B.post("/api/nursery-settings/simple-update",_)).data;console.log("📡 Réponse sauvegarde:",200),console.log("✅ Sauvegarde réussie:",P),U.success(t?"تم حفظ الإعدادات بنجاح":"Paramètres sauvegardés avec succès")}catch(g){console.error("💥 Erreur lors de la sauvegarde:",g),U.error(t?"خطأ في حفظ الإعدادات":"Erreur lors de la sauvegarde")}finally{o(!1)}};return i?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(rd,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"معلومات الحضانة":"Informations Crèche"]})}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"اسم الحضانة":"Nom de la crèche"}),e.jsx("input",{type:"text",value:f.nurseryName,onChange:g=>j("nurseryName",g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"العنوان":"Adresse"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:f.address,onChange:g=>j("address",g.target.value),className:"w-full pl-10 rtl:pl-3 rtl:pr-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"الهاتف":"Téléphone"}),e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"tel",value:f.phone,onChange:g=>j("phone",g.target.value),className:"w-full pl-10 rtl:pl-3 rtl:pr-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",dir:"ltr"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"البريد الإلكتروني":"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 rtl:left-auto rtl:right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"email",value:f.email,onChange:g=>j("email",g.target.value),className:"w-full pl-10 rtl:pl-3 rtl:pr-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"السعة القصوى":"Capacité max"}),e.jsx("input",{type:"number",value:f.capacity,onChange:g=>j("capacity",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"ساعة الافتتاح":"Heure ouverture"}),e.jsx("input",{type:"time",dir:"ltr",value:f.openingTime,onChange:g=>j("openingTime",g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"ساعة الإغلاق":"Heure fermeture"}),e.jsx("input",{type:"time",dir:"ltr",value:f.closingTime,onChange:g=>j("closingTime",g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:t?"ساعات العمل يوم السبت":"Horaires du Samedi"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t?"فتح يوم السبت":"Ouvert le samedi"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?"تفعيل العمل يوم السبت":"Activer l'ouverture le samedi"})]}),e.jsx("button",{onClick:()=>j("saturdayOpen",!f.saturdayOpen),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${f.saturdayOpen?"bg-primary-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f.saturdayOpen?"translate-x-6 rtl:-translate-x-6":"translate-x-1 rtl:-translate-x-1"}`})})]}),f.saturdayOpen&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"ساعة الافتتاح (السبت)":"Heure ouverture (samedi)"}),e.jsx("input",{type:"time",dir:"ltr",value:f.saturdayOpeningTime,onChange:g=>j("saturdayOpeningTime",g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"ساعة الإغلاق (السبت)":"Heure fermeture (samedi)"}),e.jsx("input",{type:"time",dir:"ltr",value:f.saturdayClosingTime,onChange:g=>j("saturdayClosingTime",g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:e.jsxs(L,{onClick:v,disabled:i,className:"w-full",children:[e.jsx(_a,{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2"}),i?t?"جاري الحفظ...":"Sauvegarde...":t?"حفظ الإعدادات":"Sauvegarder les paramètres"]})})]})]})}),e.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(ad,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"تفضيلات الواجهة":"Préférences Interface"]})}),e.jsxs(I,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t?"المظهر المظلم":"Mode sombre"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?"تفعيل المظهر المظلم للواجهة":"Activer le thème sombre"})]}),e.jsxs("button",{onClick:n,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a==="dark"?"bg-primary-600":"bg-gray-200"}`,children:[e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a==="dark"?"translate-x-6 rtl:-translate-x-6":"translate-x-1 rtl:-translate-x-1"}`}),a==="dark"?e.jsx(il,{className:"absolute left-1 rtl:left-auto rtl:right-1 w-3 h-3 text-white"}):e.jsx(ll,{className:"absolute right-1 rtl:right-auto rtl:left-1 w-3 h-3 text-gray-400"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t?"اللغة":"Langue"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?"تغيير لغة الواجهة":"Changer la langue de l'interface"})]}),e.jsxs("button",{onClick:r,className:"flex items-center space-x-2 rtl:space-x-reverse px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(nd,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:s==="fr"?"Français":"العربية"})]})]})]})]}),e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Js,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"إعدادات الإشعارات":"Paramètres Notifications"]})}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t?"إشعارات البريد الإلكتروني":"Notifications Email"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?"تلقي الإشعارات عبر البريد الإلكتروني":"Recevoir les notifications par email"})]}),e.jsx("button",{onClick:()=>j("emailNotifications",!f.emailNotifications),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${f.emailNotifications?"bg-primary-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f.emailNotifications?"translate-x-6 rtl:-translate-x-6":"translate-x-1 rtl:-translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t?"تنبيهات الحضور":"Alertes Présence"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?"تنبيهات عند وصول أو مغادرة الأطفال":"Alertes lors des arrivées/départs"})]}),e.jsx("button",{onClick:()=>j("attendanceAlerts",!f.attendanceAlerts),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${f.attendanceAlerts?"bg-primary-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f.attendanceAlerts?"translate-x-6 rtl:-translate-x-6":"translate-x-1 rtl:-translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t?"تنبيهات التسجيل":"Alertes Inscription"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?"تنبيهات عند طلبات التسجيل الجديدة":"Alertes pour nouvelles inscriptions"})]}),e.jsx("button",{onClick:()=>j("enrollmentAlerts",!f.enrollmentAlerts),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${f.enrollmentAlerts?"bg-primary-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f.enrollmentAlerts?"translate-x-6 rtl:-translate-x-6":"translate-x-1 rtl:-translate-x-1"}`})})]})]})]}),e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Qe,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"إعدادات الأمان":"Paramètres Sécurité"]})}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"انتهاء الجلسة (دقيقة)":"Expiration session (min)"}),e.jsxs("select",{value:f.sessionTimeout,onChange:g=>j("sessionTimeout",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsxs("option",{value:15,children:["15 ",t?"دقيقة":"minutes"]}),e.jsxs("option",{value:30,children:["30 ",t?"دقيقة":"minutes"]}),e.jsxs("option",{value:60,children:["60 ",t?"دقيقة":"minutes"]}),e.jsxs("option",{value:120,children:["120 ",t?"دقيقة":"minutes"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t?"انتهاء كلمة المرور (يوم)":"Expiration mot de passe (jours)"}),e.jsxs("select",{value:f.passwordExpiry,onChange:g=>j("passwordExpiry",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsxs("option",{value:30,children:["30 ",t?"يوم":"jours"]}),e.jsxs("option",{value:60,children:["60 ",t?"يوم":"jours"]}),e.jsxs("option",{value:90,children:["90 ",t?"يوم":"jours"]}),e.jsxs("option",{value:180,children:["180 ",t?"يوم":"jours"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t?"المصادقة الثنائية":"Authentification 2FA"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?"تفعيل الأمان الإضافي":"Activer la sécurité renforcée"})]}),e.jsx("button",{onClick:()=>j("twoFactorAuth",!f.twoFactorAuth),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${f.twoFactorAuth?"bg-primary-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f.twoFactorAuth?"translate-x-6 rtl:-translate-x-6":"translate-x-1 rtl:-translate-x-1"}`})})]})]})]})]})]}),e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(be,{className:"w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2"}),t?"إدارة الأعياد والعطل":"Gestion des Jours Fériés"]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("div",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full",children:e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h==="national"?t?`${c.filter(g=>g.type==="national").length} أيام وطنية`:`${c.filter(g=>g.type==="national").length} jours nationaux`:h==="religious"?t?`${c.filter(g=>g.type==="religious").length} أيام دينية`:`${c.filter(g=>g.type==="religious").length} jours religieux`:h==="school"?t?`${c.filter(g=>g.type==="school").length} عطل مدرسية`:`${c.filter(g=>g.type==="school").length} vacances scolaires`:t?`${c.filter(g=>g.type==="custom").length} أيام مخصصة`:`${c.filter(g=>g.type==="custom").length} jours personnalisés`})}),e.jsx("div",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/20 rounded-full",children:e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:t?`${c.filter(g=>g.type===h).filter(g=>g.is_active).length} مفعل`:`${c.filter(g=>g.type===h).filter(g=>g.is_active).length} activés`})})]})]})}),e.jsxs(I,{className:"space-y-6",children:[(l==null?void 0:l.role)!=="admin"&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-2 border-yellow-300 dark:border-yellow-700 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_t,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-yellow-800 dark:text-yellow-200 text-base",children:t?"⚠️ صلاحيات محدودة":"⚠️ Accès limité"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1 leading-relaxed",children:t?"أنت تستطيع فقط عرض قائمة الأعياد والعطل. لتعديل حالة الأعياد (تفعيل/إلغاء تفعيل)، يجب أن تكون مديراً للنظام.":"Vous pouvez uniquement consulter la liste des jours fériés. Pour modifier leur statut (activer/désactiver), vous devez avoir le rôle d'administrateur."}),e.jsxs("div",{className:"mt-2 p-2 bg-yellow-100 dark:bg-yellow-800/30 rounded border-l-4 border-yellow-400",children:[e.jsx("p",{className:"text-xs font-medium text-yellow-800 dark:text-yellow-200",children:t?`👤 دورك الحالي: ${(k=l==null?void 0:l.role)==null?void 0:k.toUpperCase()}`:`👤 Votre rôle actuel: ${(N=l==null?void 0:l.role)==null?void 0:N.toUpperCase()}`}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1",children:t?"للحصول على صلاحيات المدير، اتصل بمدير النظام":"Pour obtenir les privilèges admin, contactez l'administrateur système"}),e.jsxs("div",{className:"mt-2 text-xs text-yellow-600 dark:text-yellow-400",children:[e.jsx("strong",{children:t?"حساب المدير الافتراضي:":"Compte admin par défaut:"}),e.jsx("br",{}),"📧 Email: malekaidoudi@gmail.com",e.jsx("br",{}),"🔑 Mot de passe: admin123"]})]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:[t?"قائمة الأعياد والعطل":"Liste des Jours Fériés",e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2 rtl:ml-0 rtl:mr-2",children:["(",c.filter(g=>g.type===h).length," ",t?"عطلة":"jours",")"]})]}),e.jsx("div",{className:"flex gap-2",children:[{key:"national",label:t?"وطني":"National",color:"bg-blue-500"},{key:"religious",label:t?"ديني":"Religieux",color:"bg-green-500"},{key:"school",label:t?"مدرسي":"Scolaire",color:"bg-orange-500"}].map(g=>e.jsx("button",{onClick:()=>y(g.key),className:`px-3 py-1 text-xs rounded-full transition-colors ${h===g.key?`${g.color} text-white`:"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:g.label},g.key))})]}),c.length>0&&e.jsx("div",{className:"space-y-3",children:c.filter(g=>g.type===h).sort((g,_)=>new Date(g.date)-new Date(_.date)).map(g=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g.type==="national"?"bg-blue-500":g.type==="religious"?"bg-green-500":g.type==="school"?"bg-orange-500":"bg-purple-500"}`}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:g.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(g.date).toLocaleDateString(t?"ar-TN":"fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.type==="national"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300":g.type==="religious"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":g.type==="school"?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300":"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300"}`,children:g.type==="national"?t?"وطني":"National":g.type==="religious"?t?"ديني":"Religieux":g.type==="school"?t?"عطلة مدرسية":"Vacances scolaires":t?"مخصص":"Personnalisé"}),(l==null?void 0:l.role)==="admin"?e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("span",{className:`text-xs font-medium ${g.is_active?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:g.is_active?t?"مفعل":"Activé":t?"غير مفعل":"Désactivé"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:g.is_active||!1,onChange:_=>x(g,_.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-red-600"})]})]}):e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("span",{className:`text-xs font-medium ${g.is_active?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:g.is_active?t?"مفعل":"Activé":t?"غير مفعل":"Désactivé"}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:t?"(للمدير فقط)":"(Admin seulement)"})]})]})]},g.external_id||g.id))})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e.jsx("strong",{children:t?"كيف يعمل النظام:":"Comment fonctionne le système:"})}),e.jsxs("ul",{className:"text-sm text-blue-600 dark:text-blue-400 mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:t?"📅 يتم تحميل جميع الأعياد والعطل من مصادر خارجية (وطنية، دينية، مدرسية)":"📅 Tous les jours fériés sont chargés depuis des sources externes (nationaux, religieux, scolaires)"}),e.jsx("li",{children:t?"🔄 المدير يختار الأيام التي ستكون فيها الحضانة مغلقة باستخدام المفاتيح":"🔄 L'admin choisit les jours où la crèche sera fermée avec les toggles"}),e.jsx("li",{children:t?"💾 فقط الأيام المفعلة (المغلقة) يتم حفظها في قاعدة البيانات":"💾 Seuls les jours activés (fermés) sont sauvegardés en base de données"}),e.jsx("li",{children:t?"📊 الخدمات الأخرى (الحضور، الإحصائيات) تستخدم هذه القائمة لمعرفة أيام الإغلاق":"📊 Les autres services (présence, stats) utilisent cette liste pour connaître les jours de fermeture"})]})]})]})]})})]})})},ns=({children:t,roles:s=[],redirectTo:r="/login"})=>{const{isAuthenticated:a,user:n,loading:l}=oe(),i=Ns();return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(ne,{size:"lg"})}):a?s.length>0&&!s.includes(n==null?void 0:n.role)?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"403"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8",children:"Accès refusé - Privilèges insuffisants"}),e.jsx("button",{onClick:()=>window.history.back(),className:"btn-primary",children:"Retour"})]})}):t:e.jsx(Fc,{to:r,state:{from:i},replace:!0})};class lf extends al.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,r){this.setState({error:s,errorInfo:r}),console.error("ErrorBoundary caught an error:",s,r)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[e.jsx(_t,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Oops! Une erreur s'est produite"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Quelque chose s'est mal passé. Veuillez recharger la page."}),!1,e.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Recharger la page"]})]})}):this.props.children}}function of(){return e.jsxs(Vc,{children:[e.jsx(ee,{path:"/login",element:e.jsx(Vg,{})}),e.jsx(ee,{path:"/register",element:e.jsx(Og,{})}),e.jsxs(ee,{path:"/",element:e.jsx(qu,{}),children:[e.jsx(ee,{index:!0,element:e.jsx(Pg,{})}),e.jsx(ee,{path:"articles",element:e.jsx(Mg,{})}),e.jsx(ee,{path:"articles/:id",element:e.jsx(Lg,{})}),e.jsx(ee,{path:"inscription",element:e.jsx($g,{})}),e.jsx(ee,{path:"contact",element:e.jsx(Ig,{})}),e.jsx(ee,{path:"visite-virtuelle",element:e.jsx(Fg,{})}),e.jsx(ee,{path:"mon-espace",element:e.jsx(ns,{roles:["parent","admin","staff"],children:e.jsx(zg,{})})}),e.jsx(ee,{path:"profile",element:e.jsx(ns,{roles:["admin","staff","parent"],children:e.jsx(tl,{})})}),e.jsx(ee,{path:"attendance-parent",element:e.jsx(ns,{roles:["parent"],children:e.jsx(Bg,{})})}),e.jsx(ee,{path:"absence-request",element:e.jsx(ns,{roles:["parent"],children:e.jsx(Hg,{})})})]}),e.jsxs(ee,{path:"/dashboard",element:e.jsx(ns,{roles:["admin","staff"],children:e.jsx(Eg,{})}),children:[e.jsx(ee,{index:!0,element:e.jsx(Gg,{})}),e.jsx(ee,{path:"profile",element:e.jsx(tl,{})}),e.jsx(ee,{path:"children",element:e.jsx(Yg,{})}),e.jsx(ee,{path:"children/add",element:e.jsx(Jg,{})}),e.jsx(ee,{path:"enrollments",element:e.jsx(Vs,{})}),e.jsx(ee,{path:"pending-enrollments",element:e.jsx(Qg,{})}),e.jsx(ee,{path:"enrollments/today",element:e.jsx(Vs,{})}),e.jsx(ee,{path:"enrollments/history",element:e.jsx(Vs,{})}),e.jsx(ee,{path:"enrollments/stats",element:e.jsx(Vs,{})}),e.jsx(ee,{path:"attendance",element:e.jsx(Os,{})}),e.jsx(ee,{path:"attendance/today",element:e.jsx(Os,{})}),e.jsx(ee,{path:"attendance/history",element:e.jsx(Os,{})}),e.jsx(ee,{path:"attendance/stats",element:e.jsx(Os,{})}),e.jsx(ee,{path:"documents",element:e.jsx(zr,{})}),e.jsx(ee,{path:"documents/download",element:e.jsx(zr,{})}),e.jsx(ee,{path:"documents/uploaded",element:e.jsx(zr,{})}),e.jsx(ee,{path:"parents",element:e.jsx(ef,{})}),e.jsx(ee,{path:"staff",element:e.jsx(tf,{})}),e.jsx(ee,{path:"add-user",element:e.jsx(sf,{})}),e.jsx(ee,{path:"general-stats",element:e.jsx(rf,{})}),e.jsx(ee,{path:"attendance-report",element:e.jsx(af,{})}),e.jsx(ee,{path:"settings",element:e.jsx(lf,{children:e.jsx(nf,{})})})]}),e.jsx(ee,{path:"*",element:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"404"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Page non trouvée"}),e.jsx("a",{href:"/",className:"btn-primary",children:"Retour à l'accueil"})]})})})]})}const cf={common:{loading:"Chargement...",error:"Erreur",success:"Succès",save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",add:"Ajouter",search:"Rechercher",filter:"Filtrer",reset:"Réinitialiser",submit:"Soumettre",close:"Fermer",yes:"Oui",no:"Non",confirm:"Confirmer",back:"Retour",next:"Suivant",previous:"Précédent",home:"Accueil",dashboard:"Tableau de bord",profile:"Profil",settings:"Paramètres",logout:"Déconnexion",login:"Connexion",register:"Inscription",email:"Email",password:"Mot de passe",name:"Nom",firstName:"Prénom",lastName:"Nom de famille",phone:"Téléphone",address:"Adresse",date:"Date",time:"Heure",status:"Statut",actions:"Actions",details:"Détails",view:"Voir",download:"Télécharger",upload:"Téléverser",required:"Requis",optional:"Optionnel",page:"Page",of:"sur",total:"Total",items:"éléments",noData:"Aucune donnée disponible",selectLanguage:"Choisir la langue"},nav:{home:"Accueil",articles:"Articles",news:"Actualités",enrollment:"Inscription",contact:"Contact",dashboard:"Tableau de bord",users:"Utilisateurs",children:"Enfants",enrollments:"Inscriptions",attendance:"Présences",articlesManagement:"Gestion Articles",newsManagement:"Gestion Actualités",contacts:"Messages"},auth:{login:"Connexion",register:"Inscription",logout:"Déconnexion",email:"Adresse email",password:"Mot de passe",confirmPassword:"Confirmer le mot de passe",firstName:"Prénom",lastName:"Nom",phone:"Téléphone",role:"Rôle",loginButton:"Se connecter",registerButton:"S'inscrire",forgotPassword:"Mot de passe oublié ?",noAccount:"Pas de compte ?",hasAccount:"Déjà un compte ?",loginSuccess:"Connexion réussie",registerSuccess:"Inscription réussie",logoutSuccess:"Déconnexion réussie",invalidCredentials:"Identifiants invalides",emailRequired:"Email requis",passwordRequired:"Mot de passe requis",passwordMinLength:"Le mot de passe doit contenir au moins 6 caractères",passwordsNotMatch:"Les mots de passe ne correspondent pas"},roles:{admin:"Administrateur",staff:"Personnel",parent:"Parent"},status:{active:"Actif",inactive:"Inactif",pending:"En attente",approved:"Approuvé",rejected:"Rejeté",cancelled:"Annulé",draft:"Brouillon",published:"Publié",new:"Nouveau",read:"Lu",replied:"Répondu"},home:{title:"Bienvenue dans notre crèche",subtitle:"Un environnement sûr et bienveillant pour vos enfants",cta:"Inscrire votre enfant",features:{title:"Nos services",education:{title:"Éducation de qualité",description:"Programme éducatif adapté à chaque âge"},care:{title:"Soins attentionnés",description:"Personnel qualifié et bienveillant"},safety:{title:"Sécurité maximale",description:"Environnement sécurisé et surveillé"}}},enrollment:{title:"Inscription de votre enfant",childInfo:"Informations de l'enfant",parentInfo:"Informations du parent",childFirstName:"Prénom de l'enfant",childLastName:"Nom de l'enfant",birthDate:"Date de naissance",gender:"Sexe",male:"Garçon",female:"Fille",medicalInfo:"Informations médicales",emergencyContact:"Contact d'urgence",emergencyContactName:"Nom du contact d'urgence",emergencyContactPhone:"Téléphone du contact d'urgence",enrollmentDate:"Date d'inscription souhaitée",notes:"Notes supplémentaires",documents:"Documents requis",carnetMedical:"Carnet médical",acteNaissance:"Acte de naissance",certificatMedical:"Certificat médical",documentsInfo:"Veuillez télécharger tous les documents requis",reglement:"Règlement intérieur",downloadReglement:"Télécharger le règlement",submit:"Soumettre la demande",success:"Demande d'inscription envoyée avec succès"},contact:{title:"Contactez-nous",subtitle:"Nous sommes là pour répondre à vos questions",name:"Nom complet",email:"Email",phone:"Téléphone",subject:"Sujet",message:"Message",send:"Envoyer le message",success:"Message envoyé avec succès",info:{title:"Informations de contact",address:"Adresse",phone:"Téléphone",email:"Email",hours:"Horaires d'ouverture"}},dashboard:{welcome:"Bienvenue, {{name}}",overview:"Vue d'ensemble",stats:{totalUsers:"Total utilisateurs",totalChildren:"Total enfants",todayAttendance:"Présences aujourd'hui",pendingEnrollments:"Inscriptions en attente",attendanceRate:"Taux de présence"}},children:{title:"Gestion des enfants",addChild:"Ajouter un enfant",editChild:"Modifier l'enfant",childDetails:"Détails de l'enfant",firstName:"Prénom",lastName:"Nom",birthDate:"Date de naissance",age:"Âge",gender:"Sexe",medicalInfo:"Informations médicales",emergencyContact:"Contact d'urgence",photo:"Photo",isPresent:"Présent aujourd'hui",attendance:"Présences"},attendance:{title:"Gestion des présences",checkIn:"Arrivée",checkOut:"Départ",child:"Enfant",staff:"Personnel",checkInTime:"Heure d'arrivée",checkOutTime:"Heure de départ",notes:"Notes",today:"Aujourd'hui",present:"Présents",departed:"Partis",recordCheckIn:"Enregistrer l'arrivée",recordCheckOut:"Enregistrer le départ"},articles:{title:"Articles",addArticle:"Ajouter un article",editArticle:"Modifier l'article",titleFr:"Titre (Français)",titleAr:"Titre (Arabe)",contentFr:"Contenu (Français)",contentAr:"Contenu (Arabe)",image:"Image",status:"Statut",author:"Auteur",publishedAt:"Publié le",readMore:"Lire la suite"},news:{title:"Actualités",addNews:"Ajouter une actualité",editNews:"Modifier l'actualité",titleFr:"Titre (Français)",titleAr:"Titre (Arabe)",descriptionFr:"Description (Français)",descriptionAr:"Description (Arabe)",eventDate:"Date de l'événement",upcoming:"À venir",past:"Passées"},validation:{required:"Ce champ est requis",email:"Email invalide",minLength:"Minimum {{min}} caractères",maxLength:"Maximum {{max}} caractères",phone:"Numéro de téléphone invalide",date:"Date invalide",url:"URL invalide"}},df={common:{loading:"جاري التحميل...",error:"خطأ",success:"نجح",save:"حفظ",cancel:"إلغاء",delete:"حذف",edit:"تعديل",add:"إضافة",search:"بحث",filter:"تصفية",reset:"إعادة تعيين",submit:"إرسال",close:"إغلاق",yes:"نعم",no:"لا",confirm:"تأكيد",back:"رجوع",next:"التالي",previous:"السابق",home:"الرئيسية",dashboard:"لوحة التحكم",profile:"الملف الشخصي",settings:"الإعدادات",logout:"تسجيل الخروج",login:"تسجيل الدخول",register:"التسجيل",email:"البريد الإلكتروني",password:"كلمة المرور",name:"الاسم",firstName:"الاسم الأول",lastName:"اسم العائلة",phone:"الهاتف",address:"العنوان",date:"التاريخ",time:"الوقت",status:"الحالة",actions:"الإجراءات",details:"التفاصيل",view:"عرض",download:"تحميل",upload:"رفع",required:"مطلوب",optional:"اختياري",page:"صفحة",of:"من",total:"المجموع",items:"عناصر",noData:"لا توجد بيانات متاحة",selectLanguage:"اختر اللغة"},nav:{home:"الرئيسية",articles:"المقالات",news:"الأخبار",enrollment:"التسجيل",contact:"اتصل بنا",dashboard:"لوحة التحكم",users:"المستخدمون",children:"الأطفال",enrollments:"التسجيلات",attendance:"الحضور",articlesManagement:"إدارة المقالات",newsManagement:"إدارة الأخبار",contacts:"الرسائل"},auth:{login:"تسجيل الدخول",register:"التسجيل",logout:"تسجيل الخروج",email:"عنوان البريد الإلكتروني",password:"كلمة المرور",confirmPassword:"تأكيد كلمة المرور",firstName:"الاسم الأول",lastName:"الاسم الأخير",phone:"الهاتف",role:"الدور",loginButton:"دخول",registerButton:"تسجيل",forgotPassword:"نسيت كلمة المرور؟",noAccount:"ليس لديك حساب؟",hasAccount:"لديك حساب بالفعل؟",loginSuccess:"تم تسجيل الدخول بنجاح",registerSuccess:"تم التسجيل بنجاح",logoutSuccess:"تم تسجيل الخروج بنجاح",invalidCredentials:"بيانات اعتماد غير صحيحة",emailRequired:"البريد الإلكتروني مطلوب",passwordRequired:"كلمة المرور مطلوبة",passwordMinLength:"يجب أن تحتوي كلمة المرور على 6 أحرف على الأقل",passwordsNotMatch:"كلمات المرور غير متطابقة"},roles:{admin:"مدير",staff:"موظف",parent:"والد"},status:{active:"نشط",inactive:"غير نشط",pending:"في الانتظار",approved:"موافق عليه",rejected:"مرفوض",cancelled:"ملغى",draft:"مسودة",published:"منشور",new:"جديد",read:"مقروء",replied:"تم الرد"},home:{title:"مرحباً بكم في حضانتنا",subtitle:"بيئة آمنة ومحبة لأطفالكم",cta:"سجل طفلك",features:{title:"خدماتنا",education:{title:"تعليم عالي الجودة",description:"برنامج تعليمي مناسب لكل عمر"},care:{title:"رعاية متميزة",description:"طاقم مؤهل ومحب"},safety:{title:"أمان تام",description:"بيئة آمنة ومراقبة"}}},enrollment:{title:"تسجيل طفلك",childInfo:"معلومات الطفل",parentInfo:"معلومات الوالد",childFirstName:"اسم الطفل الأول",childLastName:"اسم عائلة الطفل",birthDate:"تاريخ الميلاد",gender:"الجنس",male:"ذكر",female:"أنثى",medicalInfo:"المعلومات الطبية",emergencyContact:"جهة اتصال الطوارئ",emergencyContactName:"اسم جهة اتصال الطوارئ",emergencyContactPhone:"هاتف جهة اتصال الطوارئ",enrollmentDate:"تاريخ التسجيل المرغوب",notes:"ملاحظات إضافية",documents:"الوثائق المطلوبة",carnetMedical:"الدفتر الطبي",acteNaissance:"مضمون الولادة",certificatMedical:"الشهادة الطبية",documentsInfo:"يرجى تحميل جميع الوثائق المطلوبة",reglement:"النظام الداخلي",downloadReglement:"تحميل النظام الداخلي",submit:"إرسال الطلب",success:"تم إرسال طلب التسجيل بنجاح"},contact:{title:"اتصل بنا",subtitle:"نحن هنا للإجابة على أسئلتكم",name:"الاسم الكامل",email:"البريد الإلكتروني",phone:"الهاتف",subject:"الموضوع",message:"الرسالة",send:"إرسال الرسالة",success:"تم إرسال الرسالة بنجاح",info:{title:"معلومات الاتصال",address:"العنوان",phone:"الهاتف",email:"البريد الإلكتروني",hours:"ساعات العمل"}},dashboard:{welcome:"مرحباً، {{name}}",overview:"نظرة عامة",stats:{totalUsers:"إجمالي المستخدمين",totalChildren:"إجمالي الأطفال",todayAttendance:"حضور اليوم",pendingEnrollments:"التسجيلات المعلقة",attendanceRate:"معدل الحضور"}},children:{title:"إدارة الأطفال",addChild:"إضافة طفل",editChild:"تعديل الطفل",childDetails:"تفاصيل الطفل",firstName:"الاسم الأول",lastName:"الاسم الأخير",birthDate:"تاريخ الميلاد",age:"العمر",gender:"الجنس",medicalInfo:"المعلومات الطبية",emergencyContact:"جهة اتصال الطوارئ",photo:"الصورة",isPresent:"حاضر اليوم",attendance:"الحضور"},attendance:{title:"إدارة الحضور",checkIn:"الوصول",checkOut:"المغادرة",child:"الطفل",staff:"الموظف",checkInTime:"وقت الوصول",checkOutTime:"وقت المغادرة",notes:"ملاحظات",today:"اليوم",present:"الحاضرون",departed:"المغادرون",recordCheckIn:"تسجيل الوصول",recordCheckOut:"تسجيل المغادرة"},articles:{title:"المقالات",addArticle:"إضافة مقال",editArticle:"تعديل المقال",titleFr:"العنوان (فرنسي)",titleAr:"العنوان (عربي)",contentFr:"المحتوى (فرنسي)",contentAr:"المحتوى (عربي)",image:"الصورة",status:"الحالة",author:"الكاتب",publishedAt:"نُشر في",readMore:"اقرأ المزيد"},news:{title:"الأخبار",addNews:"إضافة خبر",editNews:"تعديل الخبر",titleFr:"العنوان (فرنسي)",titleAr:"العنوان (عربي)",descriptionFr:"الوصف (فرنسي)",descriptionAr:"الوصف (عربي)",eventDate:"تاريخ الحدث",upcoming:"قادمة",past:"سابقة"},validation:{required:"هذا الحقل مطلوب",email:"بريد إلكتروني غير صحيح",minLength:"الحد الأدنى {{min}} أحرف",maxLength:"الحد الأقصى {{max}} أحرف",phone:"رقم هاتف غير صحيح",date:"تاريخ غير صحيح",url:"رابط غير صحيح"}};ld.use(od).use(cd).use(dd).init({fallbackLng:"fr",debug:!1,resources:{fr:{translation:cf},ar:{translation:df}},interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"}});yl(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(Oc,{basename:"/creche",children:e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-200",children:e.jsx(Xm,{children:e.jsxs(fd,{children:[e.jsx(of,{}),e.jsx(id,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})})}));
//# sourceMappingURL=index-CZZ3O5WW.js.map
